<!DOCTYPE html>
<html><head><title>Bugzilla47971.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(109);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.Controls/Bugzilla47971.cs" target="_top">Bugzilla47971.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.Controls" target="_top">Xamarin.Forms.Controls\Xamarin.Forms.Controls.csproj</a> (Xamarin.Forms.Controls)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">ObjectModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Runtime</span>.<span class="i n">CompilerServices</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">CustomAttributes</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Internals</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Controls</span>.<span class="i n">Issues</span>
{
	[<a href="/Xamarin.Forms.Core/A.html#86e8cd96f62aab08" class="t constructor">Preserve</a>(<a href="/Xamarin.Forms.Core/A.html#1bacf10dafd22c73" class="i field">AllMembers</a> = <b>true</b>)]
	[<a href="/Xamarin.Forms.CustomAttributes/A.html#7e3803f42297329b" class="t constructor">Issue</a>(<a href="/Xamarin.Forms.CustomAttributes/A.html#71fbc272a65cfefa" class="t t">IssueTracker</a>.<a href="/Xamarin.Forms.CustomAttributes/A.html#4c33f6b873a9476c" class="i field">Bugzilla</a>, 47971, <span class="s">&quot;UWP doesn&#39;t display list items when binding a CommandParameter to BindingContext in a DataTemplate and including a CanExecute method&quot;</span>, <a href="/Xamarin.Forms.CustomAttributes/A.html#e0966d88fdc6123d" class="t t">PlatformAffected</a>.<a href="/Xamarin.Forms.CustomAttributes/A.html#2d3d0118b0cdf073" class="i field">WinRT</a>)]
	<b>public class</b> <a id="afc1cf821e6f259c" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="9e838c5e5ce48645">Bugzilla47971</span></a> : <a href="TestPages.cs.html#68092d82b8b3d7b5" class="t t">TestContentPage</a>
	{
		<b>protected override void</b> <a id="9162afeca5d95b5e" href="R/9162afeca5d95b5e.html" target="n" data-glyph="75,1" class="i method">Init</a>()
		{
			<a href="#3f9f4f45965725d9" class="k">var</a> <span id="r0 rd" class="r0 r">viewModel</span> = <b>new</b> <a href="#2e651a5b181852c5" class="t constructor">_47971ViewModel</a>();
 
			<a href="/Xamarin.Forms.Core/A.html#bde8d740ed7039c7" class="k">var</a> <span id="r1 rd" class="r1 r">lv</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#6f349a8ce3b4362f" class="t constructor">ListView</a> { <a href="/Xamarin.Forms.Core/A.html#ec31b23be1ce91d4" class="i property">BindingContext</a> = <span class="r0 r">viewModel</span> };
 
			<span class="r1 r">lv</span>.<a href="/Xamarin.Forms.Core/A.html#d05c3999b6e90555" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#bde8d740ed7039c7" class="t t">ListView</a>.<a href="/Xamarin.Forms.Core/A.html#ec65dccca42e4f36" class="i field">ItemsSourceProperty</a>, <b>new</b> <a href="/Xamarin.Forms.Core/A.html#c79f6c91a3606a34" class="t constructor">Binding</a>(<span class="s">&quot;Models&quot;</span>));
			<span class="r1 r">lv</span>.<a href="/Xamarin.Forms.Core/A.html#d05c3999b6e90555" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#bde8d740ed7039c7" class="t t">ListView</a>.<a href="/Xamarin.Forms.Core/A.html#e2fbab739592c40d" class="i field">SelectedItemProperty</a>, <b>new</b> <a href="/Xamarin.Forms.Core/A.html#c79f6c91a3606a34" class="t constructor">Binding</a>(<span class="s">&quot;SelectedModel&quot;</span>));
 
			<span class="r1 r">lv</span>.<a href="/Xamarin.Forms.Core/A.html#e714497888d14198" class="i property">ItemTemplate</a> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#5d29a04f9d12654c" class="t constructor">DataTemplate</a>(() =&gt;
			{
				<a href="/Xamarin.Forms.Core/A.html#ba9b70b0224a44cd" class="k">var</a> <span id="r2 rd" class="r2 r">tc</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#ba9b70b0224a44cd" class="t constructor">TextCell</a>();
 
				<span class="r2 r">tc</span>.<a href="/Xamarin.Forms.Core/A.html#d05c3999b6e90555" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#ba9b70b0224a44cd" class="t t">TextCell</a>.<a href="/Xamarin.Forms.Core/A.html#90f39da3bd0f1868" class="i field">TextProperty</a>, <b>new</b> <a href="/Xamarin.Forms.Core/A.html#c79f6c91a3606a34" class="t constructor">Binding</a>(<span class="s">&quot;Name&quot;</span>));
				<span class="r2 r">tc</span>.<a href="/Xamarin.Forms.Core/A.html#d05c3999b6e90555" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#ba9b70b0224a44cd" class="t t">TextCell</a>.<a href="/Xamarin.Forms.Core/A.html#09fb213431d8e95f" class="i field">CommandParameterProperty</a>, <b>new</b> <a href="/Xamarin.Forms.Core/A.html#c79f6c91a3606a34" class="t constructor">Binding</a>(<span class="s">&quot;.&quot;</span>));
				<span class="r2 r">tc</span>.<a href="/Xamarin.Forms.Core/A.html#d05c3999b6e90555" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#ba9b70b0224a44cd" class="t t">TextCell</a>.<a href="/Xamarin.Forms.Core/A.html#0c84b95dc11c2b82" class="i field">CommandProperty</a>, <b>new</b> <a href="/Xamarin.Forms.Core/A.html#c79f6c91a3606a34" class="t constructor">Binding</a>(<span class="s">&quot;BindingContext.ModelSelectedCommand&quot;</span>, <span class="r3 r">source</span>: <span class="r1 r">lv</span>));
 
				<b>return</b> <span class="r2 r">tc</span>;
			});
 
			<a href="/Xamarin.Forms.Core/A.html#5c88f1e97bd1f520" class="k">var</a> <span id="r4 rd" class="r4 r">layout</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#9eff482dc844e6af" class="t constructor">StackLayout</a> { <a href="/Xamarin.Forms.Core/A.html#caf7e252c413a6c4" class="i property">Spacing</a> = 10 };
			<a href="/Xamarin.Forms.Core/A.html#9467fb795433a9ba" class="k">var</a> <span id="r5 rd" class="r5 r">instructions</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#aa576bf63d926ee6" class="t constructor">Label</a> {<a href="/Xamarin.Forms.Core/A.html#60b82bdc24dcbdf6" class="i property">Text</a> = <span class="s">&quot;The ListView below should display three items (Item1, Item2, and Item3). If it does not, this test has failed.&quot;</span> };
 
			<span class="r4 r">layout</span>.<a href="/Xamarin.Forms.Core/A.html#5049824abac2f58c" class="i property">Children</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r5 r">instructions</span>);
			<span class="r4 r">layout</span>.<a href="/Xamarin.Forms.Core/A.html#5049824abac2f58c" class="i property">Children</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r1 r">lv</span>);
 
			<a href="/Xamarin.Forms.Core/A.html#3929eda3f5d3e80d" class="i property">Content</a> = <span class="r4 r">layout</span>;
		}
 
		[<a href="/Xamarin.Forms.Core/A.html#86e8cd96f62aab08" class="t constructor">Preserve</a>(<a href="/Xamarin.Forms.Core/A.html#1bacf10dafd22c73" class="i field">AllMembers</a> = <b>true</b>)]
		<b>internal class</b> <a id="3f9f4f45965725d9" href="R/3f9f4f45965725d9.html" target="n" data-glyph="2,1" class="t t">_47971ViewModel</a> : <span class="t t">INotifyPropertyChanged</span>
		{
			<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a> <a id="8c3efc55e4a3b625" href="R/8c3efc55e4a3b625.html" target="n" data-glyph="46,2" class="i field">_selectedModel</a>;
			<a href="/Xamarin.Forms.Core/A.html#72d986f738e94e84" class="t t">Command</a>&lt;<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a>&gt; <a id="04b5697df60a25ca" href="R/04b5697df60a25ca.html" target="n" data-glyph="46,2" class="i field">_modelSelectedCommand</a>;
			<span class="t t">ObservableCollection</span>&lt;<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a>&gt; <a id="88144a5cb82c4b1b" href="R/88144a5cb82c4b1b.html" target="n" data-glyph="46,2" class="i field">_models</a>;
 
			<b>public</b> <span class="t t">ObservableCollection</span>&lt;<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a>&gt; <a id="2617b69763b4e5b4" href="R/../../0000000000.html" target="n" data-glyph="102,2" class="i property">Models</a>
			{
				<b>get</b> { <b>return</b> <a href="#88144a5cb82c4b1b" class="i field">_models</a>; }
				<b>set</b>
				{
					<a href="#88144a5cb82c4b1b" class="i field">_models</a> = <b>value</b>;
					<a href="#ec36d425b7f6583b" class="i method">OnPropertyChanged</a>();
				}
			}
 
			<b>public</b> <a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a> <a id="65289afceeac1592" href="R/../../0000000000.html" target="n" data-glyph="102,2" class="i property">SelectedModel</a>
			{
				<b>get</b> { <b>return</b> <a href="#8c3efc55e4a3b625" class="i field">_selectedModel</a>; }
				<b>set</b>
				{
					<a href="#8c3efc55e4a3b625" class="i field">_selectedModel</a> = <b>value</b>;
					<a href="#ec36d425b7f6583b" class="i method">OnPropertyChanged</a>();
				}
			}
 
			<b>public</b> <a href="/Xamarin.Forms.Core/A.html#72d986f738e94e84" class="t t">Command</a>&lt;<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a>&gt; <a id="ed8fdfe606b1f2d2" href="R/../../0000000000.html" target="n" data-glyph="102,2" class="i property">ModelSelectedCommand</a> =&gt; <a href="#04b5697df60a25ca" class="i field">_modelSelectedCommand</a> ??
				(<a href="#04b5697df60a25ca" class="i field">_modelSelectedCommand</a> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#da5f6020752c637c" class="t constructor">Command</a>&lt;<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a>&gt;(<a href="#c6f1d7295edde0f7" class="i method">ModelSelectedCommandExecute</a>, <a href="#467409fbf1562c86" class="i method">CanExecute</a>));
 
			<b>bool</b> <a id="467409fbf1562c86" href="R/467409fbf1562c86.html" target="n" data-glyph="76,2" class="i method">CanExecute</a>(<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a> <span id="r6 rd" class="r6 r">itemModel</span>)
			{
				<b>return true</b>;
			}
 
			<b>void</b> <a id="c6f1d7295edde0f7" href="R/c6f1d7295edde0f7.html" target="n" data-glyph="76,2" class="i method">ModelSelectedCommandExecute</a>(<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a> <span id="r7 rd" class="r7 r">model</span>)
			{
				<span class="i n">System</span>.<span class="i n">Diagnostics</span>.<span class="t t">Debug</span>.<span class="i method">WriteLine</span>(<span class="r7 r">model</span>.<a href="#a38e582377bee452" class="i property">Name</a>);
			}
 
			<b>public</b> <a id="2e651a5b181852c5" href="R/2e651a5b181852c5.html" target="n" data-glyph="72,2" class="i constructor">_47971ViewModel</a>()
			{
				<a href="#88144a5cb82c4b1b" class="i field">_models</a> = <b>new</b> <span class="t constructor">ObservableCollection</span>&lt;<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a>&gt;(
					<b>new</b> <a href="@1@System.Collections/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="#e4272858c1eb2ecb" class="t t">_47971ItemModel</a>&gt;()
					{
						<b>new</b> <a href="#e4272858c1eb2ecb" class="t constructor">_47971ItemModel</a>() { <a href="#a38e582377bee452" class="i property">Name</a> = <span class="s">&quot;Item 1&quot;</span>},
						<b>new</b> <a href="#e4272858c1eb2ecb" class="t constructor">_47971ItemModel</a>() { <a href="#a38e582377bee452" class="i property">Name</a> = <span class="s">&quot;Item 2&quot;</span>},
						<b>new</b> <a href="#e4272858c1eb2ecb" class="t constructor">_47971ItemModel</a>() { <a href="#a38e582377bee452" class="i property">Name</a> = <span class="s">&quot;Item 3&quot;</span>}
					});
			}
 
			<b>public event</b> <span class="t t">PropertyChangedEventHandler</span> <a id="c58598e7f2798302" href="R/c58598e7f2798302.html" target="n" data-glyph="30,2" class="i">PropertyChanged</a>;
 
			<b>protected virtual void</b> <a id="ec36d425b7f6583b" href="R/ec36d425b7f6583b.html" target="n" data-glyph="75,2" class="i method">OnPropertyChanged</a>([<a href="@1@System.Runtime/A.html#3b59f8cb5102fd8b" class="t constructor">CallerMemberName</a>] <b>string</b> <span id="r8 rd" class="r8 r">propertyName</span> = <b>null</b>)
			{
				<a href="#c58598e7f2798302" class="i">PropertyChanged</a>?.<span class="i method">Invoke</span>(<a href="#3f9f4f45965725d9" class="k">this</a>, <b>new</b> <span class="t constructor">PropertyChangedEventArgs</span>(<span class="r8 r">propertyName</span>));
			}
		}
 
		[<a href="/Xamarin.Forms.Core/A.html#86e8cd96f62aab08" class="t constructor">Preserve</a>(<a href="/Xamarin.Forms.Core/A.html#1bacf10dafd22c73" class="i field">AllMembers</a> = <b>true</b>)]
		<b>internal class</b> <a id="e4272858c1eb2ecb" href="R/e4272858c1eb2ecb.html" target="n" data-glyph="2,1" class="t t"><span id="3bfcf500730b8331">_47971ItemModel</span></a>
		{
			<b>public string</b> <a id="a38e582377bee452" href="R/a38e582377bee452.html" target="n" data-glyph="102,2" class="i property">Name</a> { <b>get</b>; <b>set</b>; }
		}
	}
}</pre></td></tr></table></div></body></html>
