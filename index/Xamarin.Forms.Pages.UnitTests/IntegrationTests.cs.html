<!DOCTYPE html>
<html><head><title>IntegrationTests.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(151);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.Pages.UnitTests/IntegrationTests.cs" target="_top">IntegrationTests.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.Pages.UnitTests" target="_top">Xamarin.Forms.Pages.UnitTests\Xamarin.Forms.Pages.UnitTests.csproj</a> (Xamarin.Forms.Pages.UnitTests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">ObjectModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Diagnostics</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">IO</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Text</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Newtonsoft</span>.<span class="i n">Json</span>;
<b>using</b> <span class="i n">Newtonsoft</span>.<span class="i n">Json</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i">NUnit</span>.<span class="i">Framework</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Core</span>.<span class="i n">UnitTests</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Pages</span>.<span class="i n">UnitTests</span>
{
	[<span class="i">TestFixture</span>]
	<b>internal class</b> <a id="a46f95a2cd00d772" href="R/../../0000000000.html" target="n" data-glyph="2,0" class="t t"><span id="b46ad1e17d2cbae4">IntegrationTests</span></a>
	{
		[<span class="i">SetUp</span>]
		<b>public void</b> <a id="372ae6428ba0c7ec" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Setup</a> ()
		{
			<a href="/Xamarin.Forms.Core/A.html#4809323d42d3030a" class="t t">Device</a>.<a href="/Xamarin.Forms.Core/A.html#4b16d4a43172fca6" class="i property">PlatformServices</a> = <b>new</b> <a href="MockPlatformServices.cs.html#d341129cbc0c5d8b" class="t constructor">MockPlatformServices</a> ();
		}
 
		[<span class="i">TearDown</span>]
		<b>public void</b> <a id="3e2a9a4327897950" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">TearDown</a> ()
		{
			<a href="/Xamarin.Forms.Core/A.html#4809323d42d3030a" class="t t">Device</a>.<a href="/Xamarin.Forms.Core/A.html#4b16d4a43172fca6" class="i property">PlatformServices</a> = <b>null</b>;
		}
 
		<b>public class</b> <a id="6baeaa45afe02705" href="R/6baeaa45afe02705.html" target="n" data-glyph="0,1" class="t t">SimpleDataSource</a> : <a href="/Xamarin.Forms.Pages/A.html#be0402394a3896e6" class="t t">BaseDataSource</a>
		{
			<b>readonly</b> <a href="@0@System/A.html#f63ea2601f5edbbb" class="t t">ObservableCollection</a>&lt;<a href="/Xamarin.Forms.Pages/A.html#6562e03746e7c406" class="t t">IDataItem</a>&gt; <a id="7beeb5f543cc727d" href="R/7beeb5f543cc727d.html" target="n" data-glyph="46,2" class="i field">dataItems</a> = <b>new</b> <a href="@0@System/A.html#a0b7a0640c9feb02" class="t constructor">ObservableCollection</a>&lt;<a href="/Xamarin.Forms.Pages/A.html#6562e03746e7c406" class="t t">IDataItem</a>&gt; ();
			<b>string</b> <a id="0c0cea5ef472dcc6" href="R/0c0cea5ef472dcc6.html" target="n" data-glyph="46,2" class="i field">json</a>;
 
			<b>public</b> <a id="c7a85285ea3209f4" href="R/c7a85285ea3209f4.html" target="n" data-glyph="72,2" class="i constructor">SimpleDataSource</a> ()
			{
				<a href="#dff2a7bcdc4d180d" class="i property">Json</a> = <span class="s">@&quot;{
 &#39;Name&#39; : &#39;Jason Smith&#39;,
 &#39;Phone&#39; : &#39;(555)248-7561&#39;,
 &#39;PrimaryEmail&#39; : &#39;jason@xamarin.com&#39;,
 &#39;JobTitle&#39; : &#39;Software Engineering Manager&#39;,
 &#39;TimeZone&#39; : &#39;PST&#39;,
 &#39;Image&#39; : &#39;https://c1.staticflickr.com/3/2877/10612763564_7f2d1734ea_b.jpg&#39;,
 &#39;Address&#39; : &#39;430 Pacific Ave, San Francisico CA, 55592&#39;,
}&quot;</span>;
			}
 
			<b>public string</b> <a id="dff2a7bcdc4d180d" href="R/dff2a7bcdc4d180d.html" target="n" data-glyph="102,2" class="i property">Json</a>
			{
				<b>get</b> { <b>return</b> <a href="#0c0cea5ef472dcc6" class="i field">json</a>; }
				<b>set</b>
				{
					<a href="#0c0cea5ef472dcc6" class="i field">json</a> = <b>value</b>;
					<b>try</b> {
						<a href="@0@mscorlib/A.html#d3599058f8d79be0" class="k">var</a> <span id="r0 rd" class="r0 r">dict</span> = <span class="t t">JsonConvert</span>.<span class="i method">DeserializeObject</span>&lt;<a href="@0@mscorlib/A.html#d3599058f8d79be0" class="t t">Dictionary</a>&lt;<b>string</b>, <b>object</b>&gt;&gt; (<a href="#0c0cea5ef472dcc6" class="i field">json</a>);
						<b>foreach</b> (<a href="@0@mscorlib/A.html#8585965bb176a426" class="k">var</a> <span id="r1 rd" class="r1 r">kvp</span> <b>in</b> <span class="r0 r">dict</span>)
							<a href="#7beeb5f543cc727d" class="i field">dataItems</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<b>new</b> <span class="t">DataItem</span> (<span class="r1 r">kvp</span>.<a href="@0@mscorlib/A.html#f9d1c04feb1af032" class="i property">Key</a>, <span class="r1 r">kvp</span>.<a href="@0@mscorlib/A.html#38c0e86cc4b30170" class="i property">Value</a>));
					} <b>catch</b> (<a href="@0@mscorlib/A.html#f092fb2b893a0162" class="t t">Exception</a> <span id="r2 rd" class="r2 r">ex</span>) {
						<a href="@0@System/A.html#632c6da37ce825df" class="t t">Debug</a>.<a href="@0@System/A.html#73de7bb60da320d3" class="i method">WriteLine</a> (<span class="r2 r">ex</span>.<a href="@0@mscorlib/A.html#5fba0e16215b42a3" class="i property">Message</a>);
					}
				}
			}
 
			<b>protected override</b> <a href="@0@mscorlib/A.html#5ca7b77f3df89fc6" class="t t">Task</a>&lt;<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="/Xamarin.Forms.Pages/A.html#6562e03746e7c406" class="t t">IDataItem</a>&gt;&gt; <a id="94ec7197e7765bea" href="R/94ec7197e7765bea.html" target="n" data-glyph="75,2" class="i method">GetRawData</a> ()
			{
				<b>return</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@0@mscorlib/A.html#11a386e7d7cae64a" class="i method">FromResult</a>&lt;<a href="@0@mscorlib/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="/Xamarin.Forms.Pages/A.html#6562e03746e7c406" class="t t">IDataItem</a>&gt;&gt; (<a href="#7beeb5f543cc727d" class="i field">dataItems</a>);
			}
 
			<b>protected override object</b> <a id="733d5d59d143ca8f" href="R/../../0000000000.html" target="n" data-glyph="75,2" class="i method">GetValue</a> (<b>string</b> <span id="r3 rd" class="r3 r">key</span>)
			{
				<b>var</b> <span id="r4 rd" class="r4 r">target</span> = <a href="#7beeb5f543cc727d" class="i field">dataItems</a>.<span class="i">FirstOrDefault</span> (<span id="r5 rd" class="r5 r">d</span> =&gt; <span class="r5 r">d</span>.<a href="/Xamarin.Forms.Pages/A.html#848c9c74d2f68fa3" class="i property">Name</a> == <span class="r3 r">key</span>);
				<b>if</b> (<span class="r4 r">target</span> == <b>null</b>)
					<b>return null</b>;
					<span class="c">//throw new KeyNotFoundException ();</span>
				<b>return</b> <span class="r4 r">target</span>.<span class="i">Value</span>;
			}
 
			<b>protected override bool</b> <a id="8dda325599d10e31" href="R/../../0000000000.html" target="n" data-glyph="75,2" class="i method">SetValue</a> (<b>string</b> <span id="r6 rd" class="r6 r">key</span>, <b>object</b> <span id="r7 rd" class="r7 r">value</span>)
			{
				<b>var</b> <span id="r8 rd" class="r8 r">target</span> = <a href="#7beeb5f543cc727d" class="i field">dataItems</a>.<span class="i">FirstOrDefault</span> (<span id="r9 rd" class="r9 r">d</span> =&gt; <span class="r9 r">d</span>.<a href="/Xamarin.Forms.Pages/A.html#848c9c74d2f68fa3" class="i property">Name</a> == <span class="r6 r">key</span>);
				<b>if</b> (<span class="r8 r">target</span> == <b>null</b>) {
					<a href="#7beeb5f543cc727d" class="i field">dataItems</a>.<a href="@0@mscorlib/A.html#5c61cc24de82f7e7" class="i method">Add</a> (<b>new</b> <span class="t">DataItem</span> (<span class="r6 r">key</span>, <span class="r7 r">value</span>));
					<b>return true</b>;
				}
				<b>if</b> (<span class="r8 r">target</span>.<span class="i">Value</span> == <span class="r7 r">value</span>)
					<b>return false</b>;
				<span class="r8 r">target</span>.<span class="i">Value</span> = <span class="r7 r">value</span>;
				<b>return true</b>;
			}
		}
 
		<b>public class</b> <a id="e26073dcef6965d3" href="R/e26073dcef6965d3.html" target="n" data-glyph="0,1" class="t t">TestPage</a> : <a href="/Xamarin.Forms.Pages/A.html#8e8304bb44484750" class="t t">PersonDetailPage</a>
		{
			<b>public</b> <a id="cf988d8aa2943893" href="R/cf988d8aa2943893.html" target="n" data-glyph="72,2" class="i constructor">TestPage</a> ()
			{
				<a href="/Xamarin.Forms.Core/A.html#d05c3999b6e90555" class="i method">SetBinding</a> (<a href="/Xamarin.Forms.Pages/A.html#1f36aa76ac3580ef" class="i field">DisplayNameProperty</a>, <b>new</b> <span class="t">DataSourceBinding</span> (<span class="s">&quot;Name&quot;</span>));
				<a href="/Xamarin.Forms.Core/A.html#d05c3999b6e90555" class="i method">SetBinding</a> (<a href="/Xamarin.Forms.Pages/A.html#b364a64d794263cd" class="i field">PhoneNumberProperty</a>, <b>new</b> <span class="t">DataSourceBinding</span> (<span class="s">&quot;Phone&quot;</span>));
				<a href="/Xamarin.Forms.Core/A.html#d05c3999b6e90555" class="i method">SetBinding</a> (<a href="/Xamarin.Forms.Pages/A.html#6b5b6624b8ea3692" class="i field">EmailProperty</a>, <b>new</b> <span class="t">DataSourceBinding</span> (<span class="s">&quot;PrimaryEmail&quot;</span>));
			}
		}
 
		[<span class="i">Test</span>]
		<b>public void</b> <a id="b569e3ee3b5b026f" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">Test1</a> ()
		{
			<a href="#e26073dcef6965d3" class="k">var</a> <span id="r10 rd" class="r10 r">page</span> = <b>new</b> <a href="#cf988d8aa2943893" class="t constructor">TestPage</a> ();
			
			<span class="r10 r">page</span>.<span class="i">DataSource</span> = <b>new</b> <a href="#c7a85285ea3209f4" class="t constructor">SimpleDataSource</a> ();
			<span class="r10 r">page</span>.<a href="/Xamarin.Forms.Core/A.html#1b1e73276f1d0e92" class="i property">Platform</a> = <b>new</b> <a href="UnitPlatform.cs.html#4d6b7f332f838116" class="t constructor">UnitPlatform</a>();
 
			<span class="i">Assert</span>.<span class="i">AreEqual</span> (9, <span class="r10 r">page</span>.<a href="/Xamarin.Forms.Pages/A.html#37c0c23f0c3d91fd" class="i property">DataSource</a>.<a href="/Xamarin.Forms.Pages/A.html#46583dc3f28765d4" class="i property">MaskedKeys</a>.<span class="i">Count</span> ());
		}
 
		[<span class="i">Test</span>]
		<b>public void</b> <a id="5bc55cd0f4baf4fe" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">JsonDataSourceComplex</a> ()
		{
			<a href="/Xamarin.Forms.Pages/A.html#841cb2360aaffce3" class="k">var</a> <span id="r11 rd" class="r11 r">jsonDataSource</span> = <b>new</b> <span class="t">JsonDataSource</span> ();
 
			<a href="@0@mscorlib/A.html#8281103e6f23cb5c" class="k">var</a> <span id="r12 rd" class="r12 r">json</span> = <span class="s">@&quot;[
	{
		&#39;Name&#39;: &#39;Kristen Perez&#39;,
		&#39;Address&#39;: &#39;Ap #325-3386 Ac Av.&#39;,
		&#39;Phone&#39;: &#39;(016977) 7108&#39;,
		&#39;Title&#39;: &#39;Lorem Ipsum Dolor Incorporated&#39;,
		&#39;Email&#39;: &#39;ac.risus.Morbi@interdum.co.uk&#39;,
		&#39;List&#39; : [
          &#39;Foo&#39;, &#39;Bar&#39;, &#39;Baz&#39;
        ]
	},
	{
		&#39;Name&#39;: &#39;Murphy Cote&#39;,
		&#39;Address&#39;: &#39;906-6938 Porttitor Ave&#39;,
		&#39;Phone&#39;: &#39;076 9223 8954&#39;,
		&#39;Title&#39;: &#39;Vulputate Industries&#39;,
		&#39;Email&#39;: &#39;non@consequat.ca&#39;,
        &#39;List&#39; : [ { &#39;Second&#39; : &#39;Thing&#39; } ]
	},
	{
		&#39;Name&#39;: &#39;Nicole Valdez&#39;,
		&#39;Address&#39;: &#39;485-9530 Ut Rd.&#39;,
		&#39;Phone&#39;: &#39;0800 364 0760&#39;,
		&#39;Title&#39;: &#39;Diam At Ltd&#39;,
		&#39;Email&#39;: &#39;nisl@ipsum.edu&#39;
	}
]&quot;</span>;
			<span class="r11 r">jsonDataSource</span>.<span class="i">Source</span> = <span class="r12 r">json</span>;
			<a href="@0@System/A.html#632c6da37ce825df" class="t t">Debug</a>.<a href="@0@System/A.html#de18340cbf015ef1" class="i method">WriteLine</a> (<span class="r11 r">jsonDataSource</span>);
		}
	}
}
</pre></td></tr></table></div></body></html>
