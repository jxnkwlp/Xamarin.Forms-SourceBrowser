<!DOCTYPE html>
<html><head><title>VisualElementTracker.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(587);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.Platform.UAP/VisualElementTracker.cs" target="_top">VisualElementTracker.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.Platform.UAP" target="_top">Xamarin.Forms.Platform.UAP\Xamarin.Forms.Platform.UAP.csproj</a> (Xamarin.Forms.Platform.UAP)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i">System</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Collections</span>.<span class="i">Generic</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Collections</span>.<span class="i">ObjectModel</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Collections</span>.<span class="i">Specialized</span>;
<b>using</b> <span class="i">System</span>.<span class="i">ComponentModel</span>;
<b>using</b> <span class="i">System</span>.<span class="i">Linq</span>;
<b>using</b> <span class="i n">Windows</span>.<span class="i n">UI</span>.<span class="i n">Xaml</span>;
<b>using</b> <span class="i n">Windows</span>.<span class="i n">UI</span>.<span class="i n">Xaml</span>.<span class="i n">Input</span>;
<b>using</b> <span class="i n">Windows</span>.<span class="i n">UI</span>.<span class="i n">Xaml</span>.<span class="i n">Media</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Internals</span>;
 
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">WINDOWS_UWP</span>
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Platform</span>.<span class="i n">UWP</span>
<span class="k preprocess">#</span><span class="k preprocess">else</span>
<span class="e">
namespace Xamarin.Forms.Platform.WinRT
</span><span class="k preprocess">#</span><span class="k preprocess">endif</span>
{
	<b>public class</b> <a id="5eede7d092b7a8ae" href="R/5eede7d092b7a8ae.html" target="n" data-glyph="0,0" class="t t">VisualElementTracker</a>&lt;<span id="r0 rd t" class="r0 r t">TElement</span>, <span id="r1 rd t" class="r1 r t">TNativeElement</span>&gt; : <span class="i">IDisposable</span> <b>where</b> <span class="r0 r t">TElement</span> : <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <b>where</b> <span class="r1 r t">TNativeElement</span> : <span class="t t">FrameworkElement</span>
	{
		<b>readonly</b> <span class="i">NotifyCollectionChangedEventHandler</span> <a id="09b6403f7121febd" href="R/09b6403f7121febd.html" target="n" data-glyph="46,1" class="i field">_collectionChangedHandler</a>;
		<b>readonly</b> <span class="i">List</span>&lt;<b>uint</b>&gt; <a id="9184c41f24664a32" href="R/9184c41f24664a32.html" target="n" data-glyph="46,1" class="i field">_fingers</a> = <b>new</b> <span class="i">List</span>&lt;<b>uint</b>&gt;();
		<span class="t t">FrameworkElement</span> <a id="b1fc40a6f33cfd31" href="R/b1fc40a6f33cfd31.html" target="n" data-glyph="46,1" class="i field">_container</a>;
		<span class="r1 r t">TNativeElement</span> <a id="8c0b2507facd4fc4" href="R/8c0b2507facd4fc4.html" target="n" data-glyph="46,1" class="i field">_control</a>;
		<span class="r0 r t">TElement</span> <a id="30162e4bb17dd9c8" href="R/30162e4bb17dd9c8.html" target="n" data-glyph="46,1" class="i field">_element</a>;
 
		<b>bool</b> <a id="8ec89b09be087a04" href="R/8ec89b09be087a04.html" target="n" data-glyph="46,1" class="i field">_invalidateArrangeNeeded</a>;
 
		<b>bool</b> <a id="ca8653014bcf47e7" href="R/ca8653014bcf47e7.html" target="n" data-glyph="46,1" class="i field">_isDisposed</a>;
		<b>bool</b> <a id="75a9d6d9fbb36354" href="R/75a9d6d9fbb36354.html" target="n" data-glyph="46,1" class="i field">_isPanning</a>;
		<b>bool</b> <a id="66ba8511c3fd58cd" href="R/66ba8511c3fd58cd.html" target="n" data-glyph="46,1" class="i field">_isPinching</a>;
		<b>bool</b> <a id="6d54e8417c6f4e61" href="R/6d54e8417c6f4e61.html" target="n" data-glyph="46,1" class="i field">_wasPanGestureStartedSent</a>;
		<b>bool</b> <a id="f34a6e27d7136831" href="R/f34a6e27d7136831.html" target="n" data-glyph="46,1" class="i field">_wasPinchGestureStartedSent</a>;
 
		<b>public</b> <a id="7c8732b55e17035b" href="R/7c8732b55e17035b.html" target="n" data-glyph="72,1" class="i constructor">VisualElementTracker</a>()
		{
			<a href="#09b6403f7121febd" class="i field">_collectionChangedHandler</a> = <span class="i">ModelGestureRecognizersOnCollectionChanged</span>;
		}
 
		<b>public</b> <span class="t t">FrameworkElement</span> <a id="c5324a165ab0dec8" href="R/c5324a165ab0dec8.html" target="n" data-glyph="102,1" class="i property">Container</a>
		{
			<b>get</b> { <b>return</b> <a href="#b1fc40a6f33cfd31" class="i field">_container</a>; }
			<b>set</b>
			{
				<b>if</b> (<a href="#b1fc40a6f33cfd31" class="i field">_container</a> == <b>value</b>)
					<b>return</b>;
 
				<b>if</b> (<a href="#b1fc40a6f33cfd31" class="i field">_container</a> != <b>null</b>)
				{
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">Tapped</span> -= <span class="i">OnTap</span>;
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">DoubleTapped</span> -= <span class="i">OnDoubleTap</span>;
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationDelta</span> -= <span class="i">OnManipulationDelta</span>;
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationStarted</span> -= <span class="i">OnManipulationStarted</span>;
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationCompleted</span> -= <span class="i">OnManipulationCompleted</span>;
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerPressed</span> -= <span class="i">OnPointerPressed</span>;
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerExited</span> -= <span class="i">OnPointerExited</span>;
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerReleased</span> -= <span class="i">OnPointerReleased</span>;
					<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerCanceled</span> -= <span class="i">OnPointerCanceled</span>;
				}
 
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a> = <b>value</b>;
 
				<a href="#0abdd92976e3d3ff" class="i method">UpdatingGestureRecognizers</a>();
 
				<a href="#a21919be80d1ad5a" class="i method">UpdateNativeControl</a>();
			}
		}
 
		<b>public bool</b> <a id="7d7f70520e85bc9e" href="R/7d7f70520e85bc9e.html" target="n" data-glyph="102,1" class="i property">PreventGestureBubbling</a> { <b>get</b>; <b>set</b>; }
 
		<b>public</b> <span class="r1 r t">TNativeElement</span> <a id="8bd6c42528f7d271" href="R/8bd6c42528f7d271.html" target="n" data-glyph="102,1" class="i property">Control</a>
		{
			<b>get</b> { <b>return</b> <a href="#8c0b2507facd4fc4" class="i field">_control</a>; }
			<b>set</b>
			{
				<b>if</b> (<a href="#8c0b2507facd4fc4" class="i field">_control</a> == <b>value</b>)
					<b>return</b>;
 
				<b>if</b> (<a href="#8c0b2507facd4fc4" class="i field">_control</a> != <b>null</b>)
				{
					<a href="#8c0b2507facd4fc4" class="i field">_control</a>.<span class="i">Tapped</span> -= <span class="i">HandleTapped</span>;
					<a href="#8c0b2507facd4fc4" class="i field">_control</a>.<span class="i">DoubleTapped</span> -= <span class="i">HandleDoubleTapped</span>;
				}
 
				<a href="#8c0b2507facd4fc4" class="i field">_control</a> = <b>value</b>;
				<a href="#a21919be80d1ad5a" class="i method">UpdateNativeControl</a>();
 
				<b>if</b> (<a href="#7d7f70520e85bc9e" class="i property">PreventGestureBubbling</a>)
				{
					<a href="#0abdd92976e3d3ff" class="i method">UpdatingGestureRecognizers</a>();
				}
			}
		}
 
		<b>public</b> <span class="r0 r t">TElement</span> <a id="0f1fd41cefec6568" href="R/0f1fd41cefec6568.html" target="n" data-glyph="102,1" class="i property">Element</a>
		{
			<b>get</b> { <b>return</b> <a href="#30162e4bb17dd9c8" class="i field">_element</a>; }
			<b>set</b>
			{
				<b>if</b> (<a href="#30162e4bb17dd9c8" class="i field">_element</a> == <b>value</b>)
					<b>return</b>;
 
				<b>if</b> (<a href="#30162e4bb17dd9c8" class="i field">_element</a> != <b>null</b>)
				{
					<a href="#30162e4bb17dd9c8" class="i field">_element</a>.<span class="i">BatchCommitted</span> -= <span class="i">OnRedrawNeeded</span>;
					<a href="#30162e4bb17dd9c8" class="i field">_element</a>.<span class="i">PropertyChanged</span> -= <span class="i">OnPropertyChanged</span>;
 
					<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r2 rd" class="r2 r">view</span> = <a href="#30162e4bb17dd9c8" class="i field">_element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
					<b>if</b> (<span class="r2 r">view</span> != <b>null</b>)
					{
						<b>var</b> <span id="r3 rd" class="r3 r">oldRecognizers</span> = (<span class="i">ObservableCollection</span>&lt;<a href="/Xamarin.Forms.Core/A.html#dded1e9ac7a4a124" class="t t">IGestureRecognizer</a>&gt;)<span class="r2 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>;
						<span class="r3 r">oldRecognizers</span>.<span class="i">CollectionChanged</span> -= <a href="#09b6403f7121febd" class="i field">_collectionChangedHandler</a>;
					}
				}
 
				<a href="#30162e4bb17dd9c8" class="i field">_element</a> = <b>value</b>;
 
				<b>if</b> (<a href="#30162e4bb17dd9c8" class="i field">_element</a> != <b>null</b>)
				{
					<a href="#30162e4bb17dd9c8" class="i field">_element</a>.<span class="i">BatchCommitted</span> += <span class="i">OnRedrawNeeded</span>;
					<a href="#30162e4bb17dd9c8" class="i field">_element</a>.<span class="i">PropertyChanged</span> += <span class="i">OnPropertyChanged</span>;
 
					<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r4 rd" class="r4 r">view</span> = <a href="#30162e4bb17dd9c8" class="i field">_element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
					<b>if</b> (<span class="r4 r">view</span> != <b>null</b>)
					{
						<b>var</b> <span id="r5 rd" class="r5 r">newRecognizers</span> = (<span class="i">ObservableCollection</span>&lt;<a href="/Xamarin.Forms.Core/A.html#dded1e9ac7a4a124" class="t t">IGestureRecognizer</a>&gt;)<span class="r4 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>;
						<span class="r5 r">newRecognizers</span>.<span class="i">CollectionChanged</span> += <a href="#09b6403f7121febd" class="i field">_collectionChangedHandler</a>;
					}
				}
 
				<a href="#a21919be80d1ad5a" class="i method">UpdateNativeControl</a>();
			}
		}
 
		<b>public void</b> <a id="37ca6f51fdc4e085" href="R/37ca6f51fdc4e085.html" target="n" data-glyph="72,1" class="i method">Dispose</a>()
		{
			<a href="#edb0b0454c92b55f" class="i method">Dispose</a>(<b>true</b>);
		}
 
		<b>public event</b> <span class="i">EventHandler</span> <a id="9cc614ee7ead4fe6" href="R/9cc614ee7ead4fe6.html" target="n" data-glyph="30,1" class="i">Updated</a>;
 
		<b>protected virtual void</b> <a id="edb0b0454c92b55f" href="R/edb0b0454c92b55f.html" target="n" data-glyph="75,1" class="i method">Dispose</a>(<b>bool</b> <span id="r6 rd" class="r6 r">disposing</span>)
		{
			<b>if</b> (<a href="#ca8653014bcf47e7" class="i field">_isDisposed</a>)
				<b>return</b>;
 
			<a href="#ca8653014bcf47e7" class="i field">_isDisposed</a> = <b>true</b>;
 
			<b>if</b> (!<span class="r6 r">disposing</span>)
				<b>return</b>;
 
			<b>if</b> (<a href="#b1fc40a6f33cfd31" class="i field">_container</a> != <b>null</b>)
			{
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerPressed</span> -= <span class="i">OnPointerPressed</span>;
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerExited</span> -= <span class="i">OnPointerExited</span>;
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerReleased</span> -= <span class="i">OnPointerReleased</span>;
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerCanceled</span> -= <span class="i">OnPointerCanceled</span>;
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">Tapped</span> -= <span class="i">OnTap</span>;
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">DoubleTapped</span> -= <span class="i">OnDoubleTap</span>;
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationDelta</span> -= <span class="i">OnManipulationDelta</span>;
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationStarted</span> -= <span class="i">OnManipulationStarted</span>;
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationCompleted</span> -= <span class="i">OnManipulationCompleted</span>;
			}
 
			<b>if</b> (<a href="#30162e4bb17dd9c8" class="i field">_element</a> != <b>null</b>)
			{
				<a href="#30162e4bb17dd9c8" class="i field">_element</a>.<span class="i">BatchCommitted</span> -= <span class="i">OnRedrawNeeded</span>;
				<a href="#30162e4bb17dd9c8" class="i field">_element</a>.<span class="i">PropertyChanged</span> -= <span class="i">OnPropertyChanged</span>;
 
				<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r7 rd" class="r7 r">view</span> = <a href="#30162e4bb17dd9c8" class="i field">_element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
				<b>if</b> (<span class="r7 r">view</span> != <b>null</b>)
				{
					<b>var</b> <span id="r8 rd" class="r8 r">oldRecognizers</span> = (<span class="i">ObservableCollection</span>&lt;<a href="/Xamarin.Forms.Core/A.html#dded1e9ac7a4a124" class="t t">IGestureRecognizer</a>&gt;)<span class="r7 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>;
					<span class="r8 r">oldRecognizers</span>.<span class="i">CollectionChanged</span> -= <a href="#09b6403f7121febd" class="i field">_collectionChangedHandler</a>;
				}
			}
 
			<b>if</b> (<a href="#8c0b2507facd4fc4" class="i field">_control</a> != <b>null</b>)
			{
				<a href="#8c0b2507facd4fc4" class="i field">_control</a>.<span class="i">Tapped</span> -= <span class="i">HandleTapped</span>;
				<a href="#8c0b2507facd4fc4" class="i field">_control</a>.<span class="i">DoubleTapped</span> -= <span class="i">HandleDoubleTapped</span>;
			}
 
			<a href="#8bd6c42528f7d271" class="i property">Control</a> = <b>null</b>;
			<a href="#0f1fd41cefec6568" class="i property">Element</a> = <b>null</b>;
			<a href="#c5324a165ab0dec8" class="i property">Container</a> = <b>null</b>;
		}
 
		<b>protected virtual void</b> <a id="186b99d36c8e3366" href="R/186b99d36c8e3366.html" target="n" data-glyph="75,1" class="i method">OnPropertyChanged</a>(<b>object</b> <span id="r9 rd" class="r9 r">sender</span>, <span class="i">PropertyChangedEventArgs</span> <span id="r10 rd" class="r10 r">e</span>)
		{
			<b>if</b> (<a href="#0f1fd41cefec6568" class="i property">Element</a>.<span class="i">Batched</span>)
			{
				<b>if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#46ccfebde8187f9b" class="i field">XProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> || <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#dbd1b0cda0775f3b" class="i field">YProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> || <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#da94b849bc513d64" class="i field">WidthProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> ||
					<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#bd8332aab95ecbe7" class="i field">HeightProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
				{
					<a href="#8ec89b09be087a04" class="i field">_invalidateArrangeNeeded</a> = <b>true</b>;
				}
				<b>return</b>;
			}
 
			<b>if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#46ccfebde8187f9b" class="i field">XProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> || <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#dbd1b0cda0775f3b" class="i field">YProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> || <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#da94b849bc513d64" class="i field">WidthProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> ||
				<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#bd8332aab95ecbe7" class="i field">HeightProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
			{
				<a href="#f95620fc3d5f07a9" class="i method">MaybeInvalidate</a>();
			}
			<b>else if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#8b4971ff4c0bf69e" class="i field">AnchorXProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> || <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#c36c1b05b1f88233" class="i field">AnchorYProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
			{
				<span class="i">UpdateScaleAndRotation</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			}
			<b>else if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#7101c14ebc333e1d" class="i field">ScaleProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
			{
				<span class="i">UpdateScaleAndRotation</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			}
			<b>else if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#c3af2bf418be5028" class="i field">TranslationXProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> || <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#753acb521b5e3f04" class="i field">TranslationYProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> ||
					 <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#81bca7dd24e8a626" class="i field">RotationProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> || <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#212ad62d6a9bf671" class="i field">RotationXProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a> || <span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#818973b117d7de1f" class="i field">RotationYProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
			{
				<span class="i">UpdateRotation</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			}
			<b>else if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#acdb30ca7e3e8994" class="i field">IsVisibleProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
			{
				<span class="i">UpdateVisibility</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			}
			<b>else if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#b7f80bf625ddd6d6" class="i field">OpacityProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
			{
				<span class="i">UpdateOpacity</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			}
			<b>else if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#0a624730d6bd2c02" class="i field">InputTransparentProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
			{
				<span class="i">UpdateInputTransparent</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			}
			<b>else if</b> (<span class="r10 r">e</span>.<span class="i">PropertyName</span> == <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a>.<a href="/Xamarin.Forms.Core/A.html#d798cc16e0e87f98" class="i field">IsEnabledProperty</a>.<a href="/Xamarin.Forms.Core/A.html#3e8a9f30dd5c9578" class="i property">PropertyName</a>)
			{
				<span class="i">UpdateInputTransparent</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			}
		}
 
		<b>protected virtual void</b> <a id="a21919be80d1ad5a" href="R/a21919be80d1ad5a.html" target="n" data-glyph="75,1" class="i method">UpdateNativeControl</a>()
		{
			<b>if</b> (<a href="#0f1fd41cefec6568" class="i property">Element</a> == <b>null</b> || <a href="#c5324a165ab0dec8" class="i property">Container</a> == <b>null</b>)
				<b>return</b>;
 
			<span class="i">UpdateVisibility</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			<span class="i">UpdateOpacity</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			<span class="i">UpdateScaleAndRotation</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
			<span class="i">UpdateInputTransparent</span>(<a href="#0f1fd41cefec6568" class="i property">Element</a>, <a href="#c5324a165ab0dec8" class="i property">Container</a>);
 
			<b>if</b> (<a href="#8ec89b09be087a04" class="i field">_invalidateArrangeNeeded</a>)
			{
				<a href="#f95620fc3d5f07a9" class="i method">MaybeInvalidate</a>();
			}
			<a href="#8ec89b09be087a04" class="i field">_invalidateArrangeNeeded</a> = <b>false</b>;
 
			<a href="#d027dda2ca3fa48c" class="i method">OnUpdated</a>();
		}
 
		<b>void</b> <a id="a01e4ac6a5add774" href="R/a01e4ac6a5add774.html" target="n" data-glyph="76,1" class="i method">HandlePan</a>(<span class="t t">ManipulationDeltaRoutedEventArgs</span> <span id="r11 rd" class="r11 r">e</span>, <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a> <span id="r12 rd" class="r12 r">view</span>)
		{
			<b>if</b> (<span class="r12 r">view</span> == <b>null</b>)
				<b>return</b>;
 
			<a href="#75a9d6d9fbb36354" class="i field">_isPanning</a> = <b>true</b>;
 
			<b>foreach</b> (<a href="/Xamarin.Forms.Core/A.html#1f03cea068cff275" class="t t">PanGestureRecognizer</a> <span id="r13 rd" class="r13 r">recognizer</span> <b>in</b> <span class="r12 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#1f03cea068cff275" class="t t">PanGestureRecognizer</a>&gt;().<span class="i">Where</span>(<span id="r14 rd" class="r14 r">g</span> =&gt; <span class="r14 r">g</span>.<span class="i">TouchPoints</span> == <a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Count</span>))
			{
				<b>if</b> (!<a href="#6d54e8417c6f4e61" class="i field">_wasPanGestureStartedSent</a>)
				{
					<span class="r13 r">recognizer</span>.<span class="i">SendPanStarted</span>(<span class="r12 r">view</span>, <a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="/Xamarin.Forms.Core/A.html#e25b34aa6b05e57d" class="i property">PanGestureId</a>);
				}
				<span class="r13 r">recognizer</span>.<span class="i">SendPan</span>(<span class="r12 r">view</span>, <span class="r11 r">e</span>.<span class="i property">Delta</span>.<span class="i field">Translation</span>.<span class="i">X</span> + <span class="r11 r">e</span>.<span class="i property">Cumulative</span>.<span class="i field">Translation</span>.<span class="i">X</span>, <span class="r11 r">e</span>.<span class="i property">Delta</span>.<span class="i field">Translation</span>.<span class="i">Y</span> + <span class="r11 r">e</span>.<span class="i property">Cumulative</span>.<span class="i field">Translation</span>.<span class="i">Y</span>, <a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="/Xamarin.Forms.Core/A.html#e25b34aa6b05e57d" class="i property">PanGestureId</a>);
			}
			<a href="#6d54e8417c6f4e61" class="i field">_wasPanGestureStartedSent</a> = <b>true</b>;
		}
 
		<b>void</b> <a id="768377c1a8994a86" href="R/768377c1a8994a86.html" target="n" data-glyph="76,1" class="i method">HandlePinch</a>(<span class="t t">ManipulationDeltaRoutedEventArgs</span> <span id="r15 rd" class="r15 r">e</span>, <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a> <span id="r16 rd" class="r16 r">view</span>)
		{
			<b>if</b> (<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Count</span> &lt; 2 || <span class="r16 r">view</span> == <b>null</b>)
				<b>return</b>;
 
			<a href="#66ba8511c3fd58cd" class="i field">_isPinching</a> = <b>true</b>;
 
			<span class="i n">Windows</span>.<span class="i n">Foundation</span>.<span class="i">Point</span> <span id="r17 rd" class="r17 r">translationPoint</span> = <span class="r15 r">e</span>.<span class="i property">Container</span>.<span class="i method">TransformToVisual</span>(<a href="#c5324a165ab0dec8" class="i property">Container</a>).<span class="i">TransformPoint</span>(<span class="r15 r">e</span>.<span class="i property">Position</span>);
 
			<a href="/Xamarin.Forms.Core/A.html#71c2b8add148844d" class="k">var</a> <span id="r18 rd" class="r18 r">scaleOriginPoint</span> = <b>new</b> <span class="t">Point</span>(<span class="r17 r">translationPoint</span>.<span class="i">X</span> / <span class="r16 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#4b4ff8e00e0429d0" class="i property">Width</a>, <span class="r17 r">translationPoint</span>.<span class="i">Y</span> / <span class="r16 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#5d4bfa7087771a1d" class="i property">Height</a>);
			<span class="i">IEnumerable</span>&lt;<a href="/Xamarin.Forms.Core/A.html#9699ff25643962b1" class="t t">PinchGestureRecognizer</a>&gt; <span id="r19 rd" class="r19 r">pinchGestures</span> = <span class="r16 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#9699ff25643962b1" class="t t">PinchGestureRecognizer</a>&gt;();
			<b>foreach</b> (<a href="/Xamarin.Forms.Core/A.html#9699ff25643962b1" class="t t">PinchGestureRecognizer</a> <span id="r20 rd" class="r20 r">recognizer</span> <b>in</b> <span class="r19 r">pinchGestures</span>)
			{
				<b>if</b> (!<a href="#f34a6e27d7136831" class="i field">_wasPinchGestureStartedSent</a>)
				{
					<span class="r20 r">recognizer</span>.<span class="i">SendPinchStarted</span>(<span class="r16 r">view</span>, <span class="r18 r">scaleOriginPoint</span>);
				}
				<span class="r20 r">recognizer</span>.<span class="i">SendPinch</span>(<span class="r16 r">view</span>, <span class="r15 r">e</span>.<span class="i property">Delta</span>.<span class="i field">Scale</span>, <span class="r18 r">scaleOriginPoint</span>);
			}
			<a href="#f34a6e27d7136831" class="i field">_wasPinchGestureStartedSent</a> = <b>true</b>;
		}
 
		<b>void</b> <a id="f95620fc3d5f07a9" href="R/f95620fc3d5f07a9.html" target="n" data-glyph="76,1" class="i method">MaybeInvalidate</a>()
		{
			<b>if</b> (<a href="#0f1fd41cefec6568" class="i property">Element</a>.<span class="i">IsInNativeLayout</span>)
				<b>return</b>;
 
			<b>var</b> <span id="r21 rd" class="r21 r">parent</span> = (<span class="t t">FrameworkElement</span>)<a href="#c5324a165ab0dec8" class="i property">Container</a>.<span class="i property">Parent</span>;
			<span class="r21 r">parent</span>?.<span class="i">InvalidateMeasure</span>();
			<a href="#c5324a165ab0dec8" class="i property">Container</a>.<span class="i">InvalidateMeasure</span>();
		}
 
		<b>void</b> <a id="ca6280d37626b52b" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">ModelGestureRecognizersOnCollectionChanged</a>(<b>object</b> <span id="r22 rd" class="r22 r">sender</span>, <span class="i">NotifyCollectionChangedEventArgs</span> <span id="r23 rd" class="r23 r">notifyCollectionChangedEventArgs</span>)
		{
			<a href="#0abdd92976e3d3ff" class="i method">UpdatingGestureRecognizers</a>();
		}
 
		<b>void</b> <a id="1172409d6519414e" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnDoubleTap</a>(<b>object</b> <span id="r24 rd" class="r24 r">sender</span>, <span class="t t">DoubleTappedRoutedEventArgs</span> <span id="r25 rd" class="r25 r">e</span>)
		{
			<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r26 rd" class="r26 r">view</span> = <a href="#0f1fd41cefec6568" class="i property">Element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
			<b>if</b> (<span class="r26 r">view</span> == <b>null</b>)
				<b>return</b>;
 
			<span class="i">IEnumerable</span>&lt;<a href="/Xamarin.Forms.Core/A.html#ee3163fce3030ae2" class="t t">TapGestureRecognizer</a>&gt; <span id="r27 rd" class="r27 r">doubleTapGestures</span> = <span class="r26 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#ee3163fce3030ae2" class="t t">TapGestureRecognizer</a>&gt;(<span id="r28 rd" class="r28 r">g</span> =&gt; <span class="r28 r">g</span>.<span class="i">NumberOfTapsRequired</span> == 2);
			<b>foreach</b> (<a href="/Xamarin.Forms.Core/A.html#ee3163fce3030ae2" class="t t">TapGestureRecognizer</a> <span id="r29 rd" class="r29 r">recognizer</span> <b>in</b> <span class="r27 r">doubleTapGestures</span>)
				<span class="r29 r">recognizer</span>.<span class="i">SendTapped</span>(<span class="r26 r">view</span>);
		}
 
		<b>void</b> <a id="7600c398df0780f2" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnManipulationCompleted</a>(<b>object</b> <span id="r30 rd" class="r30 r">sender</span>, <span class="t t">ManipulationCompletedRoutedEventArgs</span> <span id="r31 rd" class="r31 r">e</span>)
		{
			<a href="#3de104f936405b50" class="i method">PinchComplete</a>(<b>true</b>);
			<a href="#868659fd3107dfa3" class="i method">PanComplete</a>(<b>true</b>);
		}
 
		<b>void</b> <a id="2eb8c9e18eaeb5f8" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnManipulationDelta</a>(<b>object</b> <span id="r32 rd" class="r32 r">sender</span>, <span class="t t">ManipulationDeltaRoutedEventArgs</span> <span id="r33 rd" class="r33 r">e</span>)
		{
			<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r34 rd" class="r34 r">view</span> = <a href="#0f1fd41cefec6568" class="i property">Element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
			<b>if</b> (<span class="r34 r">view</span> == <b>null</b>)
				<b>return</b>;
 
			<a href="#768377c1a8994a86" class="i method">HandlePinch</a>(<span class="r33 r">e</span>, <span class="r34 r">view</span>);
			<a href="#a01e4ac6a5add774" class="i method">HandlePan</a>(<span class="r33 r">e</span>, <span class="r34 r">view</span>);
		}
 
		<b>void</b> <a id="d7d980e66e31c3f3" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnManipulationStarted</a>(<b>object</b> <span id="r35 rd" class="r35 r">sender</span>, <span class="t t">ManipulationStartedRoutedEventArgs</span> <span id="r36 rd" class="r36 r">e</span>)
		{
			<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r37 rd" class="r37 r">view</span> = <a href="#0f1fd41cefec6568" class="i property">Element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
			<b>if</b> (<span class="r37 r">view</span> == <b>null</b>)
				<b>return</b>;
			<a href="#f34a6e27d7136831" class="i field">_wasPinchGestureStartedSent</a> = <b>false</b>;
			<a href="#6d54e8417c6f4e61" class="i field">_wasPanGestureStartedSent</a> = <b>false</b>;
		}
 
		<b>void</b> <a id="db3a5e615a61ec54" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnPointerCanceled</a>(<b>object</b> <span id="r38 rd" class="r38 r">sender</span>, <span class="t t">PointerRoutedEventArgs</span> <span id="r39 rd" class="r39 r">e</span>)
		{
			<b>uint</b> <span id="r40 rd" class="r40 r">id</span> = <span class="r39 r">e</span>.<span class="i property">Pointer</span>.<span class="i property">PointerId</span>;
			<b>if</b> (<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Contains</span>(<span class="r40 r">id</span>))
				<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Remove</span>(<span class="r40 r">id</span>);
 
			<a href="#3de104f936405b50" class="i method">PinchComplete</a>(<b>false</b>);
			<a href="#868659fd3107dfa3" class="i method">PanComplete</a>(<b>false</b>);
		}
 
		<b>void</b> <a id="59d0e9773e3adae5" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnPointerExited</a>(<b>object</b> <span id="r41 rd" class="r41 r">sender</span>, <span class="t t">PointerRoutedEventArgs</span> <span id="r42 rd" class="r42 r">e</span>)
		{
			<b>uint</b> <span id="r43 rd" class="r43 r">id</span> = <span class="r42 r">e</span>.<span class="i property">Pointer</span>.<span class="i property">PointerId</span>;
			<b>if</b> (<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Contains</span>(<span class="r43 r">id</span>))
				<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Remove</span>(<span class="r43 r">id</span>);
 
			<a href="#3de104f936405b50" class="i method">PinchComplete</a>(<b>true</b>);
			<a href="#868659fd3107dfa3" class="i method">PanComplete</a>(<b>true</b>);
		}
 
		<b>void</b> <a id="418d53a1e787a506" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnPointerPressed</a>(<b>object</b> <span id="r44 rd" class="r44 r">sender</span>, <span class="t t">PointerRoutedEventArgs</span> <span id="r45 rd" class="r45 r">e</span>)
		{
			<b>uint</b> <span id="r46 rd" class="r46 r">id</span> = <span class="r45 r">e</span>.<span class="i property">Pointer</span>.<span class="i property">PointerId</span>;
			<b>if</b> (!<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Contains</span>(<span class="r46 r">id</span>))
				<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Add</span>(<span class="r46 r">id</span>);
		}
 
		<b>void</b> <a id="60b7b28a7ff7d02a" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnPointerReleased</a>(<b>object</b> <span id="r47 rd" class="r47 r">sender</span>, <span class="t t">PointerRoutedEventArgs</span> <span id="r48 rd" class="r48 r">e</span>)
		{
			<b>uint</b> <span id="r49 rd" class="r49 r">id</span> = <span class="r48 r">e</span>.<span class="i property">Pointer</span>.<span class="i property">PointerId</span>;
			<b>if</b> (<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Contains</span>(<span class="r49 r">id</span>))
				<a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Remove</span>(<span class="r49 r">id</span>);
 
			<a href="#3de104f936405b50" class="i method">PinchComplete</a>(<b>true</b>);
			<a href="#868659fd3107dfa3" class="i method">PanComplete</a>(<b>true</b>);
		}
 
		<b>void</b> <a id="a20a1de962b9f2e7" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnRedrawNeeded</a>(<b>object</b> <span id="r50 rd" class="r50 r">sender</span>, <span class="i">EventArgs</span> <span id="r51 rd" class="r51 r">e</span>)
		{
			<a href="#a21919be80d1ad5a" class="i method">UpdateNativeControl</a>();
		}
 
		<b>void</b> <a id="b1b45b21236aeb29" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">OnTap</a>(<b>object</b> <span id="r52 rd" class="r52 r">sender</span>, <span class="t t">TappedRoutedEventArgs</span> <span id="r53 rd" class="r53 r">e</span>)
		{
			<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r54 rd" class="r54 r">view</span> = <a href="#0f1fd41cefec6568" class="i property">Element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
			<b>if</b> (<span class="r54 r">view</span> == <b>null</b>)
				<b>return</b>;
 
			<span class="i">IEnumerable</span>&lt;<a href="/Xamarin.Forms.Core/A.html#ee3163fce3030ae2" class="t t">TapGestureRecognizer</a>&gt; <span id="r55 rd" class="r55 r">tapGestures</span> = <span class="r54 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#ee3163fce3030ae2" class="t t">TapGestureRecognizer</a>&gt;(<span id="r56 rd" class="r56 r">g</span> =&gt; <span class="r56 r">g</span>.<span class="i">NumberOfTapsRequired</span> == 1);
			<b>foreach</b> (<a href="/Xamarin.Forms.Core/A.html#ee3163fce3030ae2" class="t t">TapGestureRecognizer</a> <span id="r57 rd" class="r57 r">recognizer</span> <b>in</b> <span class="r55 r">tapGestures</span>)
			{
				<span class="r57 r">recognizer</span>.<span class="i">SendTapped</span>(<span class="r54 r">view</span>);
				<span class="r53 r">e</span>.<span class="i property">Handled</span> = <b>true</b>;
			}
		}
 
		<b>void</b> <a id="d027dda2ca3fa48c" href="R/d027dda2ca3fa48c.html" target="n" data-glyph="76,1" class="i method">OnUpdated</a>()
		{
			<b>if</b> (<a href="#9cc614ee7ead4fe6" class="i">Updated</a> != <b>null</b>)
				<a href="#9cc614ee7ead4fe6" class="i">Updated</a>(<a href="#5eede7d092b7a8ae" class="k">this</a>, <span class="i">EventArgs</span>.<span class="i">Empty</span>);
		}
 
		<b>void</b> <a id="868659fd3107dfa3" href="R/868659fd3107dfa3.html" target="n" data-glyph="76,1" class="i method">PanComplete</a>(<b>bool</b> <span id="r58 rd" class="r58 r">success</span>)
		{
			<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r59 rd" class="r59 r">view</span> = <a href="#0f1fd41cefec6568" class="i property">Element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
			<b>if</b> (<span class="r59 r">view</span> == <b>null</b> || !<a href="#75a9d6d9fbb36354" class="i field">_isPanning</a>)
				<b>return</b>;
 
			<b>foreach</b> (<a href="/Xamarin.Forms.Core/A.html#1f03cea068cff275" class="t t">PanGestureRecognizer</a> <span id="r60 rd" class="r60 r">recognizer</span> <b>in</b> <span class="r59 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#1f03cea068cff275" class="t t">PanGestureRecognizer</a>&gt;().<span class="i">Where</span>(<span id="r61 rd" class="r61 r">g</span> =&gt; <span class="r61 r">g</span>.<span class="i">TouchPoints</span> == <a href="#9184c41f24664a32" class="i field">_fingers</a>.<span class="i">Count</span>))
			{
				<b>if</b> (<span class="r58 r">success</span>)
				{
					<span class="r60 r">recognizer</span>.<span class="i">SendPanCompleted</span>(<span class="r59 r">view</span>, <a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="/Xamarin.Forms.Core/A.html#e25b34aa6b05e57d" class="i property">PanGestureId</a>);
				}
				<b>else</b>
				{
					<span class="r60 r">recognizer</span>.<span class="i">SendPanCanceled</span>(<span class="r59 r">view</span>, <a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="/Xamarin.Forms.Core/A.html#e25b34aa6b05e57d" class="i property">PanGestureId</a>);
				}
			}
 
			<a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="/Xamarin.Forms.Core/A.html#e25b34aa6b05e57d" class="i property">PanGestureId</a>++;
			<a href="#75a9d6d9fbb36354" class="i field">_isPanning</a> = <b>false</b>;
		}
 
		<b>void</b> <a id="3de104f936405b50" href="R/3de104f936405b50.html" target="n" data-glyph="76,1" class="i method">PinchComplete</a>(<b>bool</b> <span id="r62 rd" class="r62 r">success</span>)
		{
			<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r63 rd" class="r63 r">view</span> = <a href="#0f1fd41cefec6568" class="i property">Element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
			<b>if</b> (<span class="r63 r">view</span> == <b>null</b> || !<a href="#66ba8511c3fd58cd" class="i field">_isPinching</a>)
				<b>return</b>;
 
			<span class="i">IEnumerable</span>&lt;<a href="/Xamarin.Forms.Core/A.html#9699ff25643962b1" class="t t">PinchGestureRecognizer</a>&gt; <span id="r64 rd" class="r64 r">pinchGestures</span> = <span class="r63 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#9699ff25643962b1" class="t t">PinchGestureRecognizer</a>&gt;();
			<b>foreach</b> (<a href="/Xamarin.Forms.Core/A.html#9699ff25643962b1" class="t t">PinchGestureRecognizer</a> <span id="r65 rd" class="r65 r">recognizer</span> <b>in</b> <span class="r64 r">pinchGestures</span>)
			{
				<b>if</b> (<span class="r62 r">success</span>)
				{
					<span class="r65 r">recognizer</span>.<span class="i">SendPinchEnded</span>(<span class="r63 r">view</span>);
				}
				<b>else</b>
				{
					<span class="r65 r">recognizer</span>.<span class="i">SendPinchCanceled</span>(<span class="r63 r">view</span>);
				}
			}
 
			<a href="#66ba8511c3fd58cd" class="i field">_isPinching</a> = <b>false</b>;
		}
 
		<b>static void</b> <a id="ab092204d0aa782e" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">UpdateInputTransparent</a>(<a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <span id="r66 rd" class="r66 r">view</span>, <span class="t t">FrameworkElement</span> <span id="r67 rd" class="r67 r">frameworkElement</span>)
		{
			<span class="r67 r">frameworkElement</span>.<span class="i property">IsHitTestVisible</span> = <span class="r66 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#3497e1caaa2fb3cc" class="i property">IsEnabled</a> &amp;&amp; !<span class="r66 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#02b822eb508e27ff" class="i property">InputTransparent</a>;
		}
 
		<b>static void</b> <a id="bc981aa1b6e74710" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">UpdateOpacity</a>(<a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <span id="r68 rd" class="r68 r">view</span>, <span class="t t">FrameworkElement</span> <span id="r69 rd" class="r69 r">frameworkElement</span>)
		{
			<span class="r69 r">frameworkElement</span>.<span class="i property">Opacity</span> = <span class="r68 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#564121ba41a80a9d" class="i property">Opacity</a>;
		}
 
		<b>static void</b> <a id="6fcef51327a538f6" href="R/6fcef51327a538f6.html" target="n" data-glyph="76,1" class="i method">UpdateRotation</a>(<a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <span id="r70 rd" class="r70 r">view</span>, <span class="t t">FrameworkElement</span> <span id="r71 rd" class="r71 r">frameworkElement</span>)
		{
			<b>double</b> <span id="r72 rd" class="r72 r">anchorX</span> = <span class="r70 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#a00998b71a5dcbae" class="i property">AnchorX</a>;
			<b>double</b> <span id="r73 rd" class="r73 r">anchorY</span> = <span class="r70 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#f6d4e7f8be1952ed" class="i property">AnchorY</a>;
			<b>double</b> <span id="r74 rd" class="r74 r">rotationX</span> = <span class="r70 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#ac8ee4ff2947fb8f" class="i property">RotationX</a>;
			<b>double</b> <span id="r75 rd" class="r75 r">rotationY</span> = <span class="r70 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#dbfc39f79da9ef5e" class="i property">RotationY</a>;
			<b>double</b> <span id="r76 rd" class="r76 r">rotation</span> = <span class="r70 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#d77e9855d74702dd" class="i property">Rotation</a>;
			<b>double</b> <span id="r77 rd" class="r77 r">translationX</span> = <span class="r70 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#e319cb8ba4509319" class="i property">TranslationX</a>;
			<b>double</b> <span id="r78 rd" class="r78 r">translationY</span> = <span class="r70 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#4f7b15503ebb471e" class="i property">TranslationY</a>;
			<b>double</b> <span id="r79 rd" class="r79 r">scale</span> = <span class="r70 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#71fa0e02a53ce494" class="i property">Scale</a>;
 
			<b>if</b> (<span class="r74 r">rotationX</span> % 360 == 0 &amp;&amp; <span class="r75 r">rotationY</span> % 360 == 0 &amp;&amp; <span class="r76 r">rotation</span> % 360 == 0 &amp;&amp; <span class="r77 r">translationX</span> == 0 &amp;&amp; <span class="r78 r">translationY</span> == 0 &amp;&amp; <span class="r79 r">scale</span> == 1)
			{
				<span class="r71 r">frameworkElement</span>.<span class="i">Projection</span> = <b>null</b>;
			}
			<b>else</b>
			{
				<span class="r71 r">frameworkElement</span>.<span class="i">Projection</span> = <b>new</b> <span class="t">PlaneProjection</span>
				{
					<span class="i property">CenterOfRotationX</span> = <span class="r72 r">anchorX</span>,
					<span class="i property">CenterOfRotationY</span> = <span class="r73 r">anchorY</span>,
					<span class="i property">GlobalOffsetX</span> = <span class="r79 r">scale</span> == 0 ? 0 : <span class="r77 r">translationX</span> / <span class="r79 r">scale</span>,
					<span class="i property">GlobalOffsetY</span> = <span class="r79 r">scale</span> == 0 ? 0 : <span class="r78 r">translationY</span> / <span class="r79 r">scale</span>,
					<span class="i property">RotationX</span> = -<span class="r74 r">rotationX</span>,
					<span class="i property">RotationY</span> = -<span class="r75 r">rotationY</span>,
					<span class="i property">RotationZ</span> = -<span class="r76 r">rotation</span>
				};
			}
		}
 
		<b>static void</b> <a id="677f33d31d8c2b45" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">UpdateScaleAndRotation</a>(<a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <span id="r80 rd" class="r80 r">view</span>, <span class="t t">FrameworkElement</span> <span id="r81 rd" class="r81 r">frameworkElement</span>)
		{
			<b>double</b> <span id="r82 rd" class="r82 r">anchorX</span> = <span class="r80 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#a00998b71a5dcbae" class="i property">AnchorX</a>;
			<b>double</b> <span id="r83 rd" class="r83 r">anchorY</span> = <span class="r80 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#f6d4e7f8be1952ed" class="i property">AnchorY</a>;
			<b>double</b> <span id="r84 rd" class="r84 r">scale</span> = <span class="r80 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#71fa0e02a53ce494" class="i property">Scale</a>;
			<span class="r81 r">frameworkElement</span>.<span class="i property">RenderTransformOrigin</span> = <b>new</b> <span class="i n">Windows</span>.<span class="i n">Foundation</span>.<span class="i">Point</span>(<span class="r82 r">anchorX</span>, <span class="r83 r">anchorY</span>);
			<span class="r81 r">frameworkElement</span>.<span class="i">RenderTransform</span> = <b>new</b> <span class="t">ScaleTransform</span> { <span class="i property">ScaleX</span> = <span class="r84 r">scale</span>, <span class="i property">ScaleY</span> = <span class="r84 r">scale</span> };
 
			<a href="#6fcef51327a538f6" class="i method">UpdateRotation</a>(<span class="r80 r">view</span>, <span class="r81 r">frameworkElement</span>);
		}
 
		<b>static void</b> <a id="81cf1ca50f0fc324" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">UpdateVisibility</a>(<a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <span id="r85 rd" class="r85 r">view</span>, <span class="t t">FrameworkElement</span> <span id="r86 rd" class="r86 r">frameworkElement</span>)
		{
			<span class="r86 r">frameworkElement</span>.<span class="i property">Visibility</span> = <span class="r85 r">view</span>.<a href="/Xamarin.Forms.Core/A.html#138318a4447c6c41" class="i property">IsVisible</a> ? <span class="t t">Visibility</span>.<span class="i field">Visible</span> : <span class="t t">Visibility</span>.<span class="i field">Collapsed</span>;
		}
 
		<b>void</b> <a id="0abdd92976e3d3ff" href="R/0abdd92976e3d3ff.html" target="n" data-glyph="76,1" class="i method">UpdatingGestureRecognizers</a>()
		{
			<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="k">var</a> <span id="r87 rd" class="r87 r">view</span> = <a href="#0f1fd41cefec6568" class="i property">Element</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>;
			<span class="i">IList</span>&lt;<a href="/Xamarin.Forms.Core/A.html#dded1e9ac7a4a124" class="t t">IGestureRecognizer</a>&gt; <span id="r88 rd" class="r88 r">gestures</span> = <span class="r87 r">view</span>?.<a href="/Xamarin.Forms.Core/A.html#47b8b15a0c49e516" class="i property">GestureRecognizers</a>;
 
			<b>if</b> (<a href="#b1fc40a6f33cfd31" class="i field">_container</a> == <b>null</b> || <span class="r88 r">gestures</span> == <b>null</b>)
				<b>return</b>;
 
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">Tapped</span> -= <span class="i">OnTap</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">DoubleTapped</span> -= <span class="i">OnDoubleTap</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationDelta</span> -= <span class="i">OnManipulationDelta</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationStarted</span> -= <span class="i">OnManipulationStarted</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationCompleted</span> -= <span class="i">OnManipulationCompleted</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerPressed</span> -= <span class="i">OnPointerPressed</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerExited</span> -= <span class="i">OnPointerExited</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerReleased</span> -= <span class="i">OnPointerReleased</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerCanceled</span> -= <span class="i">OnPointerCanceled</span>;
 
			<b>if</b> (<span class="r88 r">gestures</span>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#ee3163fce3030ae2" class="t t">TapGestureRecognizer</a>&gt;(<span id="r89 rd" class="r89 r">g</span> =&gt; <span class="r89 r">g</span>.<span class="i">NumberOfTapsRequired</span> == 1).<span class="i">Any</span>())
			{
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">Tapped</span> += <span class="i">OnTap</span>;
			}
			<b>else</b>
			{
				<b>if</b> (<a href="#8c0b2507facd4fc4" class="i field">_control</a> != <b>null</b> &amp;&amp; <a href="#7d7f70520e85bc9e" class="i property">PreventGestureBubbling</a>)
				{
					<a href="#8c0b2507facd4fc4" class="i field">_control</a>.<span class="i">Tapped</span> += <span class="i">HandleTapped</span>;
				}
			}
 
			<b>if</b> (<span class="r88 r">gestures</span>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#ee3163fce3030ae2" class="t t">TapGestureRecognizer</a>&gt;(<span id="r90 rd" class="r90 r">g</span> =&gt; <span class="r90 r">g</span>.<span class="i">NumberOfTapsRequired</span> == 2).<span class="i">Any</span>())
			{
				<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">DoubleTapped</span> += <span class="i">OnDoubleTap</span>;
			}
			<b>else</b>
			{
				<b>if</b> (<a href="#8c0b2507facd4fc4" class="i field">_control</a> != <b>null</b> &amp;&amp; <a href="#7d7f70520e85bc9e" class="i property">PreventGestureBubbling</a>)
				{
					<a href="#8c0b2507facd4fc4" class="i field">_control</a>.<span class="i">DoubleTapped</span> += <span class="i">HandleDoubleTapped</span>;
				}
			}
 
			<b>bool</b> <span id="r91 rd" class="r91 r">hasPinchGesture</span> = <span class="r88 r">gestures</span>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#9699ff25643962b1" class="t t">PinchGestureRecognizer</a>&gt;().<span class="i">GetEnumerator</span>().<span class="i">MoveNext</span>();
			<b>bool</b> <span id="r92 rd" class="r92 r">hasPanGesture</span> = <span class="r88 r">gestures</span>.<span class="i">GetGesturesFor</span>&lt;<a href="/Xamarin.Forms.Core/A.html#1f03cea068cff275" class="t t">PanGestureRecognizer</a>&gt;().<span class="i">GetEnumerator</span>().<span class="i">MoveNext</span>();
			<b>if</b> (!<span class="r91 r">hasPinchGesture</span> &amp;&amp; !<span class="r92 r">hasPanGesture</span>)
				<b>return</b>;
 
			<span class="c">//We can&#39;t handle ManipulationMode.Scale and System , so we don&#39;t support pinch/pan on a scrollview </span>
			<b>if</b> (<a href="#0f1fd41cefec6568" class="i property">Element</a> <b>is</b> <a href="/Xamarin.Forms.Core/A.html#f4df39c3e50ec61f" class="t t">ScrollView</a>)
			{
				<b>if</b> (<span class="r91 r">hasPinchGesture</span>)
					<a href="/Xamarin.Forms.Core/A.html#43dda5e5ea5ad8f9" class="t t">Log</a>.<span class="i">Warning</span>(<span class="s">&quot;Gestures&quot;</span>, <span class="s">&quot;PinchGestureRecognizer is not supported on a ScrollView in Windows Platforms&quot;</span>);
				<b>if</b> (<span class="r92 r">hasPanGesture</span>)
					<a href="/Xamarin.Forms.Core/A.html#43dda5e5ea5ad8f9" class="t t">Log</a>.<span class="i">Warning</span>(<span class="s">&quot;Gestures&quot;</span>, <span class="s">&quot;PanGestureRecognizer is not supported on a ScrollView in Windows Platforms&quot;</span>);
				<b>return</b>;
			}
 
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i property">ManipulationMode</span> = <span class="t t">ManipulationModes</span>.<span class="i field">Scale</span> | <span class="t t">ManipulationModes</span>.<span class="i field">TranslateX</span> | <span class="t t">ManipulationModes</span>.<span class="i field">TranslateY</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationDelta</span> += <span class="i">OnManipulationDelta</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationStarted</span> += <span class="i">OnManipulationStarted</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">ManipulationCompleted</span> += <span class="i">OnManipulationCompleted</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerPressed</span> += <span class="i">OnPointerPressed</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerExited</span> += <span class="i">OnPointerExited</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerReleased</span> += <span class="i">OnPointerReleased</span>;
			<a href="#b1fc40a6f33cfd31" class="i field">_container</a>.<span class="i">PointerCanceled</span> += <span class="i">OnPointerCanceled</span>;
		}
 
		<b>void</b> <a id="fe23da9a1824e1fc" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">HandleTapped</a>(<b>object</b> <span id="r93 rd" class="r93 r">sender</span>, <span class="t t">TappedRoutedEventArgs</span> <span id="r94 rd" class="r94 r">tappedRoutedEventArgs</span>)
		{
			<span class="r94 r">tappedRoutedEventArgs</span>.<span class="i property">Handled</span> = <b>true</b>;
		}
 
		<b>void</b> <a id="3718e3233d354df2" href="R/../../0000000000.html" target="n" data-glyph="76,1" class="i method">HandleDoubleTapped</a>(<b>object</b> <span id="r95 rd" class="r95 r">sender</span>, <span class="t t">DoubleTappedRoutedEventArgs</span> <span id="r96 rd" class="r96 r">doubleTappedRoutedEventArgs</span>)
		{
			<span class="r96 r">doubleTappedRoutedEventArgs</span>.<span class="i property">Handled</span> = <b>true</b>;
		}
	}
}</pre></td></tr></table></div></body></html>
