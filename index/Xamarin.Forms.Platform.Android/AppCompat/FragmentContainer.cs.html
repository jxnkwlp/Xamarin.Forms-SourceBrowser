<!DOCTYPE html>
<html><head><title>FragmentContainer.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(154);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.Platform.Android/AppCompat/FragmentContainer.cs" target="_top">AppCompat\FragmentContainer.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.Platform.Android" target="_top">Xamarin.Forms.Platform.Android\Xamarin.Forms.Platform.Android.csproj</a> (Xamarin.Forms.Platform.Android)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i">System</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">OS</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Runtime</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Views</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">PlatformConfiguration</span>.<span class="i n">AndroidSpecific</span>.<span class="i n">AppCompat</span>;
<b>using</b> <span class="i">AView</span> = <span class="i">Android</span>.<span class="i">Views</span>.<span class="i">View</span>;
<b>using</b> <span class="i">Fragment</span> = <span class="i">Android</span>.<span class="i">Support</span>.<span class="i">V4</span>.<span class="i">App</span>.<span class="i">Fragment</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Platform</span>.<span class="i n">Android</span>.<span class="i n">AppCompat</span>
{
	<b>internal class</b> <a id="b3b2ac86eebf487a" href="../R/b3b2ac86eebf487a.html" target="n" data-glyph="2,0" class="t t">FragmentContainer</a> : <span class="i">Fragment</span>
	{
		<b>readonly</b> <span class="i">WeakReference</span> <a id="bc1f7ac5e06a1e1b" href="../R/bc1f7ac5e06a1e1b.html" target="n" data-glyph="46,1" class="i field">_pageReference</a>;
 
		<span class="i">Action</span>&lt;<a href="../Renderers/PageContainer.cs.html#850efedae0cd1f03" class="t t">PageContainer</a>&gt; <a id="917ffeb4ac8c0867" href="../R/917ffeb4ac8c0867.html" target="n" data-glyph="46,1" class="i field">_onCreateCallback</a>;
		<b>bool</b>? <a id="97bcde884c03f8d9" href="../R/97bcde884c03f8d9.html" target="n" data-glyph="46,1" class="i field">_isVisible</a>;
		<a href="../Renderers/PageContainer.cs.html#850efedae0cd1f03" class="t t">PageContainer</a> <a id="f1cfbe3e26c74b50" href="../R/f1cfbe3e26c74b50.html" target="n" data-glyph="46,1" class="i field">_pageContainer</a>;
		<a href="../IVisualElementRenderer.cs.html#0736b5467d596326" class="t t">IVisualElementRenderer</a> <a id="f54123d1d09d5094" href="../R/f54123d1d09d5094.html" target="n" data-glyph="46,1" class="i field">_visualElementRenderer</a>;
 
		<b>public</b> <a id="00309aa3452bbd79" href="../R/00309aa3452bbd79.html" target="n" data-glyph="72,1" class="i constructor">FragmentContainer</a>()
		{
		}
 
		<b>public</b> <a id="a0383bd437869be1" href="../R/a0383bd437869be1.html" target="n" data-glyph="72,1" class="i constructor">FragmentContainer</a>(<a href="/Xamarin.Forms.Core/A.html#d2450da355a1c8f2" class="t t">Page</a> <span id="r0 rd" class="r0 r">page</span>) : <a href="#00309aa3452bbd79" class="k">this</a>()
		{
			<a href="#bc1f7ac5e06a1e1b" class="i field">_pageReference</a> = <b>new</b> <span class="i">WeakReference</span>(<span class="r0 r">page</span>);
		}
 
		<b>protected</b> <a id="2dd8f74f2a3c5481" href="../R/../../0000000000.html" target="n" data-glyph="75,1" class="i constructor">FragmentContainer</a>(<span class="i">IntPtr</span> <span id="r1 rd" class="r1 r">javaReference</span>, <span class="i">JniHandleOwnership</span> <span id="r2 rd" class="r2 r">transfer</span>) : <b>base</b>(<span class="r1 r">javaReference</span>, <span class="r2 r">transfer</span>)
		{
		}
 
		<b>public</b> <a href="/Xamarin.Forms.Core/A.html#d2450da355a1c8f2" class="t t">Page</a> <a id="66bf3c6a12be6ca6" href="../R/66bf3c6a12be6ca6.html" target="n" data-glyph="102,1" class="i property">Page</a> =&gt; (<a href="/Xamarin.Forms.Core/A.html#d2450da355a1c8f2" class="t t">Page</a>)<a href="#bc1f7ac5e06a1e1b" class="i field">_pageReference</a>?.<span class="i">Target</span>;
 
		<a href="/Xamarin.Forms.Core/A.html#b23cf6cd1d6182c9" class="t t">IPageController</a> <a id="47b3f5f303cda7ac" href="../R/47b3f5f303cda7ac.html" target="n" data-glyph="106,1" class="i property">PageController</a> =&gt; <a href="#66bf3c6a12be6ca6" class="i property">Page</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#b23cf6cd1d6182c9" class="t t">IPageController</a>;
 
		<b>public override bool</b> <a id="ef165e4424fe1e8e" href="../R/ef165e4424fe1e8e.html" target="n" data-glyph="102,1" class="i property">UserVisibleHint</a>
		{
			<b>get</b> { <b>return</b> <b>base</b>.<span class="i">UserVisibleHint</span>; }
			<b>set</b>
			{
				<b>base</b>.<span class="i">UserVisibleHint</span> = <b>value</b>;
				<b>if</b> (<a href="#97bcde884c03f8d9" class="i field">_isVisible</a> == <b>value</b>)
					<b>return</b>;
				<a href="#97bcde884c03f8d9" class="i field">_isVisible</a> = <b>value</b>;
				<b>if</b> (<a href="#97bcde884c03f8d9" class="i field">_isVisible</a>.<span class="i">Value</span>)
					<a href="#47b3f5f303cda7ac" class="i property">PageController</a>?.<span class="i">SendAppearing</span>();
				<b>else</b>
					<a href="#47b3f5f303cda7ac" class="i property">PageController</a>?.<span class="i">SendDisappearing</span>();
			}
		}
 
		<b>public static</b> <span class="i">Fragment</span> <a id="7baffd01481c8972" href="../R/7baffd01481c8972.html" target="n" data-glyph="72,1" class="i method">CreateInstance</a>(<a href="/Xamarin.Forms.Core/A.html#d2450da355a1c8f2" class="t t">Page</a> <span id="r3 rd" class="r3 r">page</span>)
		{
			<b>return</b> <b>new</b> <a href="#a0383bd437869be1" class="t constructor">FragmentContainer</a>(<span class="r3 r">page</span>) { <span class="i">Arguments</span> = <b>new</b> <span class="i">Bundle</span>() };
		}
 
		<b>public void</b> <a id="b91fa8318f1c2b21" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">SetOnCreateCallback</a>(<span class="i">Action</span>&lt;<a href="../Renderers/PageContainer.cs.html#850efedae0cd1f03" class="t t">PageContainer</a>&gt; <span id="r4 rd" class="r4 r">callback</span>)
		{
			<a href="#917ffeb4ac8c0867" class="i field">_onCreateCallback</a> = <span class="r4 r">callback</span>;
		}
 
		<b>public override</b> <span class="i">AView</span> <a id="11b523b2a1f4d9f1" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnCreateView</a>(<span class="i">LayoutInflater</span> <span id="r5 rd" class="r5 r">inflater</span>, <span class="i">ViewGroup</span> <span id="r6 rd" class="r6 r">container</span>, <span class="i">Bundle</span> <span id="r7 rd" class="r7 r">savedInstanceState</span>)
		{
			<b>if</b> (<a href="#66bf3c6a12be6ca6" class="i property">Page</a> != <b>null</b>)
			{
				<a href="#f54123d1d09d5094" class="i field">_visualElementRenderer</a> = <span class="i n">Android</span>.<a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<span class="i">CreateRenderer</span>(<a href="#66bf3c6a12be6ca6" class="i property">Page</a>, <span class="i">ChildFragmentManager</span>);
				<span class="i n">Android</span>.<a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<a href="../Platform.cs.html#fd4d9b7c2836c5e6" class="i method">SetRenderer</a>(<a href="#66bf3c6a12be6ca6" class="i property">Page</a>, <a href="#f54123d1d09d5094" class="i field">_visualElementRenderer</a>);
 
				<a href="#f1cfbe3e26c74b50" class="i field">_pageContainer</a> = <b>new</b> <a href="../Renderers/PageContainer.cs.html#e454d48dc90f8658" class="t constructor">PageContainer</a>(<a href="../Forms.cs.html#eb8800bb7e650425" class="t t">Forms</a>.<a href="../Forms.cs.html#51008592798f3c52" class="i property">Context</a>, <a href="#f54123d1d09d5094" class="i field">_visualElementRenderer</a>, <b>true</b>);
 
				<a href="#917ffeb4ac8c0867" class="i field">_onCreateCallback</a>?.<span class="i">Invoke</span>(<a href="#f1cfbe3e26c74b50" class="i field">_pageContainer</a>);
 
				<b>return</b> <a href="#f1cfbe3e26c74b50" class="i field">_pageContainer</a>;
			}
 
			<b>return null</b>;
		}
 
		<b>public override void</b> <a id="a5eb998208b03be3" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnDestroyView</a>()
		{
			<b>if</b> (<a href="#66bf3c6a12be6ca6" class="i property">Page</a> != <b>null</b>)
			{
				<b>if</b> (<a href="#f54123d1d09d5094" class="i field">_visualElementRenderer</a> != <b>null</b>)
				{
					<b>if</b> (<a href="#f54123d1d09d5094" class="i field">_visualElementRenderer</a>.<a href="../IVisualElementRenderer.cs.html#0c96abedd7d8e58d" class="i property">View</a>.<span class="i">Handle</span> != <span class="i">IntPtr</span>.<span class="i">Zero</span>)
					{
						<a href="#f54123d1d09d5094" class="i field">_visualElementRenderer</a>.<a href="../IVisualElementRenderer.cs.html#0c96abedd7d8e58d" class="i property">View</a>.<a href="../ViewExtensions.cs.html#ed54340ae84abc92" class="i method">RemoveFromParent</a>();
					}
 
					<a href="#f54123d1d09d5094" class="i field">_visualElementRenderer</a>.<span class="i">Dispose</span>();
				}
 
				<span class="c">// We do *not* eagerly dispose of the _pageContainer here; doing so  causes a memory leak </span>
				<span class="c">// if animated fragment transitions are enabled (it removes some info that the animation&#39;s </span>
				<span class="c">// onAnimationEnd handler requires to properly clean things up)</span>
				<span class="c">// Instead, we let the garbage collector pick it up later, when we can be sure it&#39;s safe</span>
 
				<a href="#66bf3c6a12be6ca6" class="i property">Page</a>?.<span class="i">ClearValue</span>(<span class="i n">Android</span>.<a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<a href="../Platform.cs.html#cda3e6f7841c17d4" class="i field">RendererProperty</a>);
			}
 
			<a href="#917ffeb4ac8c0867" class="i field">_onCreateCallback</a> = <b>null</b>;
			<a href="#f54123d1d09d5094" class="i field">_visualElementRenderer</a> = <b>null</b>;
 
			<b>base</b>.<span class="i">OnDestroyView</span>();
		}
 
		<b>public override void</b> <a id="83b79219cb91ccda" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnHiddenChanged</a>(<b>bool</b> <span id="r8 rd" class="r8 r">hidden</span>)
		{
			<b>base</b>.<span class="i">OnHiddenChanged</span>(<span class="r8 r">hidden</span>);
 
			<b>if</b> (<a href="#66bf3c6a12be6ca6" class="i property">Page</a> == <b>null</b>)
				<b>return</b>;
 
			<b>if</b> (<span class="r8 r">hidden</span>)
				<a href="#47b3f5f303cda7ac" class="i property">PageController</a>?.<span class="i">SendDisappearing</span>();
			<b>else</b>
				<a href="#47b3f5f303cda7ac" class="i property">PageController</a>?.<span class="i">SendAppearing</span>();
		}
 
		<b>public override void</b> <a id="f0d0ac6b43790b7b" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnPause</a>()
		{
			<b>bool</b> <span id="r9 rd" class="r9 r">shouldSendEvent</span> = <a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="../PlatformConfigurationExtensions.cs.html#e5d2b3b6cebe48c2" class="i method">OnThisPlatform</a>().<span class="i">GetSendDisappearingEventOnPause</span>();
			<b>if</b> (<span class="r9 r">shouldSendEvent</span>)
				<a href="#a0e8dfbf7f59ce61" class="i method">SendLifecycleEvent</a>(<b>false</b>);
 
			<b>base</b>.<span class="i">OnPause</span>();
		}
 
		<b>public override void</b> <a id="306c2f86d0dabd7d" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnResume</a>()
		{
			<b>bool</b> <span id="r10 rd" class="r10 r">shouldSendEvent</span> = <a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="../PlatformConfigurationExtensions.cs.html#e5d2b3b6cebe48c2" class="i method">OnThisPlatform</a>().<span class="i">GetSendAppearingEventOnResume</span>();
			<b>if</b> (<span class="r10 r">shouldSendEvent</span>)
				<a href="#a0e8dfbf7f59ce61" class="i method">SendLifecycleEvent</a>(<b>true</b>);
 
			<b>base</b>.<span class="i">OnResume</span>();
		}
 
		<b>void</b> <a id="a0e8dfbf7f59ce61" href="../R/a0e8dfbf7f59ce61.html" target="n" data-glyph="76,1" class="i method">SendLifecycleEvent</a>(<b>bool</b> <span id="r11 rd" class="r11 r">isAppearing</span>)
		{
			<a href="/Xamarin.Forms.Core/A.html#187368fc14858e81" class="k">var</a> <span id="r12 rd" class="r12 r">masterDetailPage</span> = <a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="/Xamarin.Forms.Core/A.html#05719483fad2d5f5" class="i property">MainPage</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#187368fc14858e81" class="t t">MasterDetailPage</a>;
			<a href="/Xamarin.Forms.Core/A.html#bc871d05751370ed" class="k">var</a> <span id="r13 rd" class="r13 r">pageContainer</span> = (<span class="r12 r">masterDetailPage</span> != <b>null</b> ? <span class="r12 r">masterDetailPage</span>.<a href="/Xamarin.Forms.Core/A.html#f1d01a371fd01303" class="i property">Detail</a> : <a href="/Xamarin.Forms.Core/A.html#05ea728f56cd3ad5" class="t t">Application</a>.<a href="/Xamarin.Forms.Core/A.html#f64242468de64fbc" class="i property">Current</a>.<a href="/Xamarin.Forms.Core/A.html#05719483fad2d5f5" class="i property">MainPage</a>) <b>as</b> <a href="/Xamarin.Forms.Core/A.html#bc871d05751370ed" class="t t">IPageContainer</a>&lt;<a href="/Xamarin.Forms.Core/A.html#d2450da355a1c8f2" class="t t">Page</a>&gt;;
			<a href="/Xamarin.Forms.Core/A.html#d2450da355a1c8f2" class="t t">Page</a> <span id="r14 rd" class="r14 r">currentPage</span> = <span class="r13 r">pageContainer</span>?.<a href="/Xamarin.Forms.Core/A.html#ba02d65acd22ef3c" class="i property">CurrentPage</a>;
 
			<b>if</b>(!(<span class="r14 r">currentPage</span> == <b>null</b> || <span class="r14 r">currentPage</span> == <a href="#47b3f5f303cda7ac" class="i property">PageController</a>))
				<b>return</b>;
 
			<b>if</b> (<span class="r11 r">isAppearing</span> &amp;&amp; <a href="#ef165e4424fe1e8e" class="i property">UserVisibleHint</a>)
				<a href="#47b3f5f303cda7ac" class="i property">PageController</a>?.<span class="i">SendAppearing</span>();
			<b>else if</b>(!<span class="r11 r">isAppearing</span>)
				<a href="#47b3f5f303cda7ac" class="i property">PageController</a>?.<span class="i">SendDisappearing</span>();
		}
	}
}</pre></td></tr></table></div></body></html>
