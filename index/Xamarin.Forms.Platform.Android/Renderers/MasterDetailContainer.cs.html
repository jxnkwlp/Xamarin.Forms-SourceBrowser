<!DOCTYPE html>
<html><head><title>MasterDetailContainer.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(155);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.Platform.Android/Renderers/MasterDetailContainer.cs" target="_top">Renderers\MasterDetailContainer.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.Platform.Android" target="_top">Xamarin.Forms.Platform.Android\Xamarin.Forms.Platform.Android.csproj</a> (Xamarin.Forms.Platform.Android)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i">System</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">App</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Content</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Content</span>.<span class="i">Res</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Runtime</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Views</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Widget</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Internals</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Platform</span>.<span class="i n">Android</span>
{
	<b>internal class</b> <a id="58cf6602ec4be12f" href="../R/58cf6602ec4be12f.html" target="n" data-glyph="2,0" class="t t">MasterDetailContainer</a> : <span class="i">ViewGroup</span>
	{
		<b>const int</b> <a id="df62a186588a311e" href="../R/df62a186588a311e.html" target="n" data-glyph="10,1" class="i field">DefaultMasterSize</a> = 320;
		<b>const int</b> <a id="fe6a2a0e2bcaf050" href="../R/fe6a2a0e2bcaf050.html" target="n" data-glyph="10,1" class="i field">DefaultSmallMasterSize</a> = 240;
		<b>readonly bool</b> <a id="8e3ce0c5140fabf5" href="../R/8e3ce0c5140fabf5.html" target="n" data-glyph="46,1" class="i field">_isMaster</a>;
		<b>readonly</b> <a href="/Xamarin.Forms.Core/A.html#187368fc14858e81" class="t t">MasterDetailPage</a> <a id="50a6c7bde4dc9ddc" href="../R/50a6c7bde4dc9ddc.html" target="n" data-glyph="46,1" class="i field">_parent</a>;
		<a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <a id="89c3008e6c05f7c8" href="../R/89c3008e6c05f7c8.html" target="n" data-glyph="46,1" class="i field">_childView</a>;
 
		<b>public</b> <a id="3314d10eed8c48e6" href="../R/3314d10eed8c48e6.html" target="n" data-glyph="72,1" class="i constructor">MasterDetailContainer</a>(<a href="/Xamarin.Forms.Core/A.html#187368fc14858e81" class="t t">MasterDetailPage</a> <span id="r0 rd" class="r0 r">parent</span>, <b>bool</b> <span id="r1 rd" class="r1 r">isMaster</span>, <span class="i">Context</span> <span id="r2 rd" class="r2 r">context</span>) : <b>base</b>(<span class="r2 r">context</span>)
		{
			<a href="#50a6c7bde4dc9ddc" class="i field">_parent</a> = <span class="r0 r">parent</span>;
			<a href="#8e3ce0c5140fabf5" class="i field">_isMaster</a> = <span class="r1 r">isMaster</span>;
		}
 
		<b>public</b> <a id="1c99f454f5eb4e90" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">MasterDetailContainer</a>(<span class="i">IntPtr</span> <span id="r3 rd" class="r3 r">javaReference</span>, <span class="i">JniHandleOwnership</span> <span id="r4 rd" class="r4 r">transfer</span>) : <b>base</b>(<span class="r3 r">javaReference</span>, <span class="r4 r">transfer</span>) { }
 
		<a href="/Xamarin.Forms.Core/A.html#00d94b99b18bc5f2" class="t t">IMasterDetailPageController</a> <a id="a4f6d7741bf41366" href="../R/a4f6d7741bf41366.html" target="n" data-glyph="106,1" class="i property">MasterDetailPageController</a> =&gt; <a href="#50a6c7bde4dc9ddc" class="i field">_parent</a> <b>as</b> <a href="/Xamarin.Forms.Core/A.html#00d94b99b18bc5f2" class="t t">IMasterDetailPageController</a>;
 
		<b>public</b> <a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <a id="6b0e9dd254f8d563" href="../R/6b0e9dd254f8d563.html" target="n" data-glyph="102,1" class="i property">ChildView</a>
		{
			<b>get</b> { <b>return</b> <a href="#89c3008e6c05f7c8" class="i field">_childView</a>; }
			<b>set</b>
			{
				<b>if</b> (<a href="#89c3008e6c05f7c8" class="i field">_childView</a> == <b>value</b>)
					<b>return</b>;
 
				<span class="i">RemoveAllViews</span>();
				<b>if</b> (<a href="#89c3008e6c05f7c8" class="i field">_childView</a> != <b>null</b>)
					<a href="#2c0372e9815ccfe8" class="i method">DisposeChildRenderers</a>();
 
				<a href="#89c3008e6c05f7c8" class="i field">_childView</a> = <b>value</b>;
 
				<b>if</b> (<a href="#89c3008e6c05f7c8" class="i field">_childView</a> == <b>null</b>)
					<b>return</b>;
				
				<a href="#2aee93c350d404a4" class="i method">AddChildView</a>(<a href="#89c3008e6c05f7c8" class="i field">_childView</a>);
			}
		}
 
		<b>protected virtual void</b> <a id="2aee93c350d404a4" href="../R/2aee93c350d404a4.html" target="n" data-glyph="75,1" class="i method">AddChildView</a>(<a href="/Xamarin.Forms.Core/A.html#daf307b67182d7d7" class="t t">VisualElement</a> <span id="r5 rd" class="r5 r">childView</span>)
		{
			<a href="../IVisualElementRenderer.cs.html#0736b5467d596326" class="t t">IVisualElementRenderer</a> <span id="r6 rd" class="r6 r">renderer</span> = <a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<a href="../Platform.cs.html#1b78ee69c66639c4" class="i method">GetRenderer</a>(<span class="r5 r">childView</span>);
			<b>if</b> (<span class="r6 r">renderer</span> == <b>null</b>)
				<a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<a href="../Platform.cs.html#fd4d9b7c2836c5e6" class="i method">SetRenderer</a>(<span class="r5 r">childView</span>, <span class="r6 r">renderer</span> = <a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<a href="../Platform.cs.html#4ec2143da4c61d5f" class="i method">CreateRenderer</a>(<span class="r5 r">childView</span>));
 
			<b>if</b> (<span class="r6 r">renderer</span>.<a href="../IVisualElementRenderer.cs.html#0c96abedd7d8e58d" class="i property">View</a>.<span class="i">Parent</span> != <a href="#58cf6602ec4be12f" class="k">this</a>)
			{
				<b>if</b> (<span class="r6 r">renderer</span>.<a href="../IVisualElementRenderer.cs.html#0c96abedd7d8e58d" class="i property">View</a>.<span class="i">Parent</span> != <b>null</b>)
					<span class="r6 r">renderer</span>.<a href="../IVisualElementRenderer.cs.html#0c96abedd7d8e58d" class="i property">View</a>.<a href="../ViewExtensions.cs.html#ed54340ae84abc92" class="i method">RemoveFromParent</a>();
				<a href="#adde5c262943f43d" class="i method">SetDefaultBackgroundColor</a>(<span class="r6 r">renderer</span>);
				<span class="i">AddView</span>(<span class="r6 r">renderer</span>.<a href="../IVisualElementRenderer.cs.html#0c96abedd7d8e58d" class="i property">View</a>);
				<span class="r6 r">renderer</span>.<a href="../IVisualElementRenderer.cs.html#45d0cfa8761dcd6c" class="i method">UpdateLayout</a>();
			}
		}
 
		<b>public int</b> <a id="54c4137c82d83472" href="../R/54c4137c82d83472.html" target="n" data-glyph="102,1" class="i property">TopPadding</a> { <b>get</b>; <b>set</b>; }
 
		<b>double</b> <a id="a65dd084c1c0cb95" href="../R/a65dd084c1c0cb95.html" target="n" data-glyph="106,1" class="i property">DefaultWidthMaster</a>
		{
			<b>get</b>
			{
				<b>double</b> <span id="r7 rd" class="r7 r">w</span> = <span class="i">Context</span>.<span class="i">FromPixels</span>(<span class="i">Resources</span>.<span class="i">DisplayMetrics</span>.<span class="i">WidthPixels</span>);
				<b>return</b> <span class="r7 r">w</span> &lt; <a href="#fe6a2a0e2bcaf050" class="i field">DefaultSmallMasterSize</a> ? <span class="r7 r">w</span> : (<span class="r7 r">w</span> &lt; <a href="#df62a186588a311e" class="i field">DefaultMasterSize</a> ? <a href="#fe6a2a0e2bcaf050" class="i field">DefaultSmallMasterSize</a> : <a href="#df62a186588a311e" class="i field">DefaultMasterSize</a>);
			}
		}
 
		<b>public override bool</b> <a id="d0fe77999e26f84c" href="../R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnInterceptTouchEvent</a>(<span class="i">MotionEvent</span> <span id="r8 rd" class="r8 r">ev</span>)
		{
			<b>bool</b> <span id="r9 rd" class="r9 r">isShowingPopover</span> = <a href="#50a6c7bde4dc9ddc" class="i field">_parent</a>.<a href="/Xamarin.Forms.Core/A.html#59f4de40953f21a2" class="i property">IsPresented</a> &amp;&amp; !<a href="#a4f6d7741bf41366" class="i property">MasterDetailPageController</a>.<a href="/Xamarin.Forms.Core/A.html#8d4438962bc4d2bd" class="i property">ShouldShowSplitMode</a>;
			<b>if</b> (!<a href="#8e3ce0c5140fabf5" class="i field">_isMaster</a> &amp;&amp; <span class="r9 r">isShowingPopover</span>)
				<b>return true</b>;
			<b>return</b> <b>base</b>.<span class="i">OnInterceptTouchEvent</span>(<span class="r8 r">ev</span>);
		}
 
		<b>protected override void</b> <a id="8172adc0be9fd533" href="../R/8172adc0be9fd533.html" target="n" data-glyph="75,1" class="i method">Dispose</a>(<b>bool</b> <span id="r10 rd" class="r10 r">disposing</span>)
		{
			<b>if</b> (<span class="r10 r">disposing</span>)
			{
				<span class="i">RemoveAllViews</span>();
				<a href="#2c0372e9815ccfe8" class="i method">DisposeChildRenderers</a>();
			}
			<b>base</b>.<span class="i">Dispose</span>(<span class="r10 r">disposing</span>);
		}
 
		<b>protected override void</b> <a id="a620b8016535275a" href="../R/a620b8016535275a.html" target="n" data-glyph="75,1" class="i method">OnLayout</a>(<b>bool</b> <span id="r11 rd" class="r11 r">changed</span>, <b>int</b> <span id="r12 rd" class="r12 r">l</span>, <b>int</b> <span id="r13 rd" class="r13 r">t</span>, <b>int</b> <span id="r14 rd" class="r14 r">r</span>, <b>int</b> <span id="r15 rd" class="r15 r">b</span>)
		{
			<b>if</b> (<a href="#89c3008e6c05f7c8" class="i field">_childView</a> == <b>null</b>)
				<b>return</b>;
 
			<a href="/Xamarin.Forms.Core/A.html#2ad9a305ad01941d" class="t t">Rectangle</a> <span id="r16 rd" class="r16 r">bounds</span> = <a href="#852f869a55e4fb20" class="i method">GetBounds</a>(<a href="#8e3ce0c5140fabf5" class="i field">_isMaster</a>, <span class="r12 r">l</span>, <span class="r13 r">t</span>, <span class="r14 r">r</span>, <span class="r15 r">b</span>);
			<b>if</b> (<a href="#8e3ce0c5140fabf5" class="i field">_isMaster</a>)
				<a href="#a4f6d7741bf41366" class="i property">MasterDetailPageController</a>.<span class="i">MasterBounds</span> = <span class="r16 r">bounds</span>;
			<b>else</b>
				<a href="#a4f6d7741bf41366" class="i property">MasterDetailPageController</a>.<span class="i">DetailBounds</span> = <span class="r16 r">bounds</span>;
 
			<a href="../IVisualElementRenderer.cs.html#0736b5467d596326" class="t t">IVisualElementRenderer</a> <span id="r17 rd" class="r17 r">renderer</span> = <a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<a href="../Platform.cs.html#1b78ee69c66639c4" class="i method">GetRenderer</a>(<a href="#89c3008e6c05f7c8" class="i field">_childView</a>);
			<span class="r17 r">renderer</span>?.<a href="../IVisualElementRenderer.cs.html#45d0cfa8761dcd6c" class="i method">UpdateLayout</a>();
		}
 
		<b>void</b> <a id="2c0372e9815ccfe8" href="../R/2c0372e9815ccfe8.html" target="n" data-glyph="76,1" class="i method">DisposeChildRenderers</a>()
		{
			<a href="../IVisualElementRenderer.cs.html#0736b5467d596326" class="t t">IVisualElementRenderer</a> <span id="r18 rd" class="r18 r">childRenderer</span> = <a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<a href="../Platform.cs.html#1b78ee69c66639c4" class="i method">GetRenderer</a>(<a href="#89c3008e6c05f7c8" class="i field">_childView</a>);
			<b>if</b> (<span class="r18 r">childRenderer</span> != <b>null</b>)
				<span class="r18 r">childRenderer</span>.<span class="i">Dispose</span>();
			<a href="#89c3008e6c05f7c8" class="i field">_childView</a>.<span class="i">ClearValue</span>(<a href="../Platform.cs.html#479e712741d44fa2" class="t t">Platform</a>.<a href="../Platform.cs.html#cda3e6f7841c17d4" class="i field">RendererProperty</a>);
		}
 
		<a href="/Xamarin.Forms.Core/A.html#2ad9a305ad01941d" class="t t">Rectangle</a> <a id="852f869a55e4fb20" href="../R/852f869a55e4fb20.html" target="n" data-glyph="76,1" class="i method">GetBounds</a>(<b>bool</b> <span id="r19 rd" class="r19 r">isMasterPage</span>, <b>int</b> <span id="r20 rd" class="r20 r">left</span>, <b>int</b> <span id="r21 rd" class="r21 r">top</span>, <b>int</b> <span id="r22 rd" class="r22 r">right</span>, <b>int</b> <span id="r23 rd" class="r23 r">bottom</span>)
		{
			<b>double</b> <span id="r24 rd" class="r24 r">width</span> = <span class="i">Context</span>.<span class="i">FromPixels</span>(<span class="r22 r">right</span> - <span class="r20 r">left</span>);
			<b>double</b> <span id="r25 rd" class="r25 r">height</span> = <span class="i">Context</span>.<span class="i">FromPixels</span>(<span class="r23 r">bottom</span> - <span class="r21 r">top</span>);
			<b>double</b> <span id="r26 rd" class="r26 r">xPos</span> = 0;
			<b>bool</b> <span id="r27 rd" class="r27 r">supressPadding</span> = <b>false</b>;
 
			<span class="c">//splitview</span>
			<b>if</b> (<a href="#a4f6d7741bf41366" class="i property">MasterDetailPageController</a>.<a href="/Xamarin.Forms.Core/A.html#8d4438962bc4d2bd" class="i property">ShouldShowSplitMode</a>)
			{
				<span class="c">//to keep some behavior we have on iPad where you can toggle and it won&#39;t do anything </span>
				<b>bool</b> <span id="r28 rd" class="r28 r">isDefaultNoToggle</span> = <a href="#50a6c7bde4dc9ddc" class="i field">_parent</a>.<a href="/Xamarin.Forms.Core/A.html#ceada579599c9078" class="i property">MasterBehavior</a> == <a href="/Xamarin.Forms.Core/A.html#8f8631b0d52c0597" class="t t">MasterBehavior</a>.<a href="/Xamarin.Forms.Core/A.html#ccf2946cb6adeec3" class="i field">Default</a>;
				<span class="r26 r">xPos</span> = <span class="r19 r">isMasterPage</span> ? 0 : (<a href="#50a6c7bde4dc9ddc" class="i field">_parent</a>.<a href="/Xamarin.Forms.Core/A.html#59f4de40953f21a2" class="i property">IsPresented</a> || <span class="r28 r">isDefaultNoToggle</span> ? <a href="#a65dd084c1c0cb95" class="i property">DefaultWidthMaster</a> : 0);
				<span class="r24 r">width</span> = <span class="r19 r">isMasterPage</span> ? <a href="#a65dd084c1c0cb95" class="i property">DefaultWidthMaster</a> : <a href="#50a6c7bde4dc9ddc" class="i field">_parent</a>.<a href="/Xamarin.Forms.Core/A.html#59f4de40953f21a2" class="i property">IsPresented</a> || <span class="r28 r">isDefaultNoToggle</span> ? <span class="r24 r">width</span> - <a href="#a65dd084c1c0cb95" class="i property">DefaultWidthMaster</a> : <span class="r24 r">width</span>;
			}
			<b>else</b>
			{
				<span class="c">//if we are showing the normal popover master doesn&#39;t have padding</span>
				<span class="r27 r">supressPadding</span> = <span class="r19 r">isMasterPage</span>;
				<span class="c">//popover make the master smaller</span>
				<span class="r24 r">width</span> = <span class="r19 r">isMasterPage</span> &amp;&amp; (<a href="/Xamarin.Forms.Core/A.html#4809323d42d3030a" class="t t">Device</a>.<a href="/Xamarin.Forms.Core/A.html#996ca2ce6b1f29b2" class="i property">Info</a>.<a href="/Xamarin.Forms.Core/A.html#578640b1d635e4d0" class="i property">CurrentOrientation</a>.<span class="i">IsLandscape</span>() || <a href="/Xamarin.Forms.Core/A.html#4809323d42d3030a" class="t t">Device</a>.<a href="/Xamarin.Forms.Core/A.html#ecd1e66d4705505f" class="i property">Idiom</a> == <a href="/Xamarin.Forms.Core/A.html#642119abfd8db803" class="t t">TargetIdiom</a>.<a href="/Xamarin.Forms.Core/A.html#0f247fdcb2e64049" class="i field">Tablet</a>) ? <a href="#a65dd084c1c0cb95" class="i property">DefaultWidthMaster</a> : <span class="r24 r">width</span>;
			}
 
			<b>double</b> <span id="r29 rd" class="r29 r">padding</span> = <span class="r27 r">supressPadding</span> ? 0 : <span class="i">Context</span>.<span class="i">FromPixels</span>(<a href="#54c4137c82d83472" class="i property">TopPadding</a>);
			<b>return</b> <b>new</b> <span class="t">Rectangle</span>(<span class="r26 r">xPos</span>, <span class="r29 r">padding</span>, <span class="r24 r">width</span>, <span class="r25 r">height</span> - <span class="r29 r">padding</span>);
		}
 
		<b>protected void</b> <a id="adde5c262943f43d" href="../R/adde5c262943f43d.html" target="n" data-glyph="75,1" class="i method">SetDefaultBackgroundColor</a>(<a href="../IVisualElementRenderer.cs.html#0736b5467d596326" class="t t">IVisualElementRenderer</a> <span id="r30 rd" class="r30 r">renderer</span>)
		{
			<b>if</b> (<a href="#6b0e9dd254f8d563" class="i property">ChildView</a>.<a href="/Xamarin.Forms.Core/A.html#8c7f2e13366d12d5" class="i property">BackgroundColor</a> == <a href="/Xamarin.Forms.Core/A.html#8a6a061540451ec4" class="t t">Color</a>.<a href="/Xamarin.Forms.Core/A.html#78f150ac7d83a2c8" class="i property">Default</a>)
			{
				<span class="i">TypedArray</span> <span id="r31 rd" class="r31 r">colors</span> = <span class="i">Context</span>.<span class="i">Theme</span>.<span class="i">ObtainStyledAttributes</span>(<b>new</b>[] { <b>global</b>::<span class="i">Android</span>.<span class="i">Resource</span>.<span class="i">Attribute</span>.<span class="i">ColorBackground</span> });
				<span class="r30 r">renderer</span>.<a href="../IVisualElementRenderer.cs.html#0c96abedd7d8e58d" class="i property">View</a>.<span class="i">SetBackgroundColor</span>(<b>new</b> <b>global</b>::<span class="i">Android</span>.<span class="i">Graphics</span>.<span class="i">Color</span>(<span class="r31 r">colors</span>.<span class="i">GetColor</span>(0, 0)));
			}
		}
	}
}</pre></td></tr></table></div></body></html>
