<!DOCTYPE html>
<html><head><title>ModalActivityIndicatorTest.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(152);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.Core.macOS.UITests/ModalActivityIndicatorTest.cs" target="_top">ModalActivityIndicatorTest.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.Core.macOS.UITests" target="_top">Xamarin.Forms.Core.macOS.UITests\Xamarin.Forms.Core.macOS.UITests.csproj</a> (Xamarin.Forms.Core.macOS.UITests)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Runtime</span>.<span class="i n">CompilerServices</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Threading</span>.<span class="i n">Tasks</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">CustomAttributes</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Internals</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Controls</span>
{
	[<a href="/Xamarin.Forms.Core/A.html#86e8cd96f62aab08" class="t constructor">Preserve</a> (<a href="/Xamarin.Forms.Core/A.html#1bacf10dafd22c73" class="i field">AllMembers</a> = <b>true</b>)]
	[<a href="/Xamarin.Forms.CustomAttributes/A.html#ee8e16fdd2ff2815" class="t constructor">Issue</a> (<a href="/Xamarin.Forms.CustomAttributes/A.html#71fbc272a65cfefa" class="t t">IssueTracker</a>.<a href="/Xamarin.Forms.CustomAttributes/A.html#fa9dd153bdbb8619" class="i field">None</a>, 0, <span class="s">&quot;Activity Indicator Does Not Show when set to default color&quot;</span>)]
	<b>public class</b> <a id="00ed1602d1de2dde" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="cc68c081a5808363">ModalActivityIndicatorTest</span></a> : <a href="TestPages.cs.html#68092d82b8b3d7b5" class="t t">TestContentPage</a> 
	{
		<b>protected override void</b> <a id="7d76b29982863769" href="R/7d76b29982863769.html" target="n" data-glyph="75,1" class="i method">Init</a> ()
		{
			<a href="#c56f5e4e7b589f12" class="k">var</a> <span id="r0 rd" class="r0 r">vm</span> = <b>new</b> <a href="#f5f546521b960d60" class="t constructor">ModalActivityIndicatorModel</a> () { <a href="#f31f67686c2e6265" class="i property">IsBusy</a> = <b>false</b>, <a href="#267b2e8e9f7f7701" class="i property">BusyText</a> = <span class="s">&quot;Not busy&quot;</span> };
 
	 		<a href="/Xamarin.Forms.Core/A.html#c68e8cba3f0e63a3" class="k">var</a> <span id="r1 rd" class="r1 r">button</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#c9ccc9248166aa0f" class="t constructor">Button</a> () { <a href="/Xamarin.Forms.Core/A.html#259ea62d7aa7ac0a" class="i property">Text</a> = <span class="s">&quot;Make Busy&quot;</span> };
			<a href="/Xamarin.Forms.Core/A.html#c68e8cba3f0e63a3" class="k">var</a> <span id="r2 rd" class="r2 r">colorToggle</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#c9ccc9248166aa0f" class="t constructor">Button</a>() {<a href="/Xamarin.Forms.Core/A.html#259ea62d7aa7ac0a" class="i property">Text</a> = <span class="s">&quot;Toggle Activity Indicator Color&quot;</span> };
 
			<span class="r1 r">button</span>.<a href="/Xamarin.Forms.Core/A.html#2f35d86af34f02f3" class="i">Clicked</a> += <b>async</b> (<span id="r3 rd" class="r3 r">sender</span>, <span id="r4 rd" class="r4 r">args</span>) =&gt; {
				<span class="r0 r">vm</span>.<a href="#f31f67686c2e6265" class="i property">IsBusy</a> = <b>true</b>;
				<span class="r0 r">vm</span>.<a href="#267b2e8e9f7f7701" class="i property">BusyText</a> = <span class="s">&quot;Busy&quot;</span>;
				<b>await</b> <a href="@0@mscorlib/A.html#045a746eb48cbaa9" class="t t">Task</a>.<a href="@0@mscorlib/A.html#34b191a243434f6a" class="i method">Delay</a> (1500);
				<span class="r0 r">vm</span>.<a href="#f31f67686c2e6265" class="i property">IsBusy</a> = <b>false</b>;
				<span class="r0 r">vm</span>.<a href="#267b2e8e9f7f7701" class="i property">BusyText</a> = <span class="s">&quot;Not Busy&quot;</span>;
			};
			
			<a href="#289648b428b13490" class="k">var</a> <span id="r5 rd" class="r5 r">activityIndicator</span> = <b>new</b> <a href="#e4f729ed5d3c6104" class="t constructor">ModalActivityIndicator</a>();
			<span class="r5 r">activityIndicator</span>.<a href="/Xamarin.Forms.Core/A.html#ec31b23be1ce91d4" class="i property">BindingContext</a> = <span class="r0 r">vm</span>;
 
			<span class="r2 r">colorToggle</span>.<a href="/Xamarin.Forms.Core/A.html#2f35d86af34f02f3" class="i">Clicked</a> += (<span id="r6 rd" class="r6 r">sender</span>, <span id="r7 rd" class="r7 r">args</span>) =&gt; {
				<span class="r0 r">vm</span>.<a href="#6282745ae4561baa" class="i property">Color</a> = <span class="r0 r">vm</span>.<a href="#6282745ae4561baa" class="i property">Color</a>.<a href="/Xamarin.Forms.Core/A.html#8625c30a5ad855a0" class="i property">IsDefault</a> ? <a href="/Xamarin.Forms.Core/A.html#8a6a061540451ec4" class="t t">Color</a>.<a href="/Xamarin.Forms.Core/A.html#28d4f9781f70b641" class="i field">Green</a> : <a href="/Xamarin.Forms.Core/A.html#8a6a061540451ec4" class="t t">Color</a>.<a href="/Xamarin.Forms.Core/A.html#78f150ac7d83a2c8" class="i property">Default</a>;
			};
 
			<a href="/Xamarin.Forms.Core/A.html#3929eda3f5d3e80d" class="i property">Content</a> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#9eff482dc844e6af" class="t constructor">StackLayout</a>() {
				<a href="/Xamarin.Forms.Core/A.html#5049824abac2f58c" class="i property">Children</a> = { <span class="r1 r">button</span>, <span class="r2 r">colorToggle</span>, <span class="r5 r">activityIndicator</span> }
			};
		}
 
		[<a href="/Xamarin.Forms.Core/A.html#86e8cd96f62aab08" class="t constructor">Preserve</a>(<a href="/Xamarin.Forms.Core/A.html#1bacf10dafd22c73" class="i field">AllMembers</a> = <b>true</b>)]
		<b>public class</b> <a id="c56f5e4e7b589f12" href="R/c56f5e4e7b589f12.html" target="n" data-glyph="0,1" class="t t">ModalActivityIndicatorModel</a> : <a href="@0@System/A.html#fd4b42d7e29d53e5" class="t t">INotifyPropertyChanged</a>
		{
			<b>bool</b> <a id="a33f29e08466d7dd" href="R/a33f29e08466d7dd.html" target="n" data-glyph="46,2" class="i field">_isBusy</a>;
			<b>string</b> <a id="5d6d813dca74b087" href="R/5d6d813dca74b087.html" target="n" data-glyph="46,2" class="i field">_busyText</a>;
			<a href="/Xamarin.Forms.Core/A.html#8a6a061540451ec4" class="t t">Color</a> <a id="110cc05630b6fed7" href="R/110cc05630b6fed7.html" target="n" data-glyph="46,2" class="i field">_color</a>;
 
			<b>public</b> <a id="f5f546521b960d60" href="R/f5f546521b960d60.html" target="n" data-glyph="72,2" class="i constructor">ModalActivityIndicatorModel</a> ()
			{
				<a href="#110cc05630b6fed7" class="i field">_color</a> = <a href="/Xamarin.Forms.Core/A.html#8a6a061540451ec4" class="t t">Color</a>.<a href="/Xamarin.Forms.Core/A.html#78f150ac7d83a2c8" class="i property">Default</a>;
			}
 
			<b>public bool</b> <a id="f31f67686c2e6265" href="R/f31f67686c2e6265.html" target="n" data-glyph="102,2" class="i property">IsBusy</a>
			{
				<b>get</b> { <b>return</b> <a href="#a33f29e08466d7dd" class="i field">_isBusy</a>; }
				<b>set</b>
				{
					<a href="#a33f29e08466d7dd" class="i field">_isBusy</a> = <b>value</b>; 
					<a href="#111995335c198050" class="i method">OnPropertyChanged</a>();
				}
			}
 
			<b>public string</b> <a id="267b2e8e9f7f7701" href="R/267b2e8e9f7f7701.html" target="n" data-glyph="102,2" class="i property">BusyText</a>
			{
				<b>get</b> { <b>return</b> <a href="#5d6d813dca74b087" class="i field">_busyText</a>; }
				<b>set</b>
				{
					<a href="#5d6d813dca74b087" class="i field">_busyText</a> = <b>value</b>;
					<a href="#111995335c198050" class="i method">OnPropertyChanged</a>();
				}
			}
 
			<b>public</b> <a href="/Xamarin.Forms.Core/A.html#8a6a061540451ec4" class="t t">Color</a> <a id="6282745ae4561baa" href="R/6282745ae4561baa.html" target="n" data-glyph="102,2" class="i property">Color</a>
			{
				<b>get</b> { <b>return</b> <a href="#110cc05630b6fed7" class="i field">_color</a>; }
				<b>set</b>
				{
					<a href="#110cc05630b6fed7" class="i field">_color</a> = <b>value</b>; 
					<a href="#111995335c198050" class="i method">OnPropertyChanged</a>();
				}
			}
 
			<b>public event</b> <a href="@0@System/A.html#670754815f6804ff" class="t t">PropertyChangedEventHandler</a> <a id="b5965c4f69525d31" href="R/b5965c4f69525d31.html" target="n" data-glyph="30,2" class="i">PropertyChanged</a>;
 
			<b>protected virtual void</b> <a id="111995335c198050" href="R/111995335c198050.html" target="n" data-glyph="75,2" class="i method">OnPropertyChanged</a> ([<a href="@0@mscorlib/A.html#3b59f8cb5102fd8b" class="t constructor">CallerMemberName</a>] <b>string</b> <span id="r8 rd" class="r8 r">propertyName</span> = <b>null</b>)
			{
				<a href="#b5965c4f69525d31" class="i">PropertyChanged</a>?.<a href="@0@System/A.html#c66222f7abfe2e28" class="i method">Invoke</a> (<a href="#c56f5e4e7b589f12" class="k">this</a>, <b>new</b> <a href="@0@System/A.html#76958b0a96ed2a2e" class="t constructor">PropertyChangedEventArgs</a> (<span class="r8 r">propertyName</span>));
			}
		}
 
		[<a href="/Xamarin.Forms.Core/A.html#86e8cd96f62aab08" class="t constructor">Preserve</a>(<a href="/Xamarin.Forms.Core/A.html#1bacf10dafd22c73" class="i field">AllMembers</a> = <b>true</b>)]
		<b>public class</b> <a id="289648b428b13490" href="R/289648b428b13490.html" target="n" data-glyph="0,1" class="t t">ModalActivityIndicator</a> : <a href="/Xamarin.Forms.Core/A.html#276c24118564f5d7" class="t t">RelativeLayout</a>
		{
			<b>public</b> <a id="e4f729ed5d3c6104" href="R/e4f729ed5d3c6104.html" target="n" data-glyph="72,2" class="i constructor">ModalActivityIndicator</a>()
			{
				<a href="#289648b428b13490" class="k">this</a>.<a href="/Xamarin.Forms.Core/A.html#6da00f516fa898d7" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#acdb30ca7e3e8994" class="i field">IsVisibleProperty</a>, <span class="s">&quot;IsBusy&quot;</span>);
				<a href="#289648b428b13490" class="k">this</a>.<a href="/Xamarin.Forms.Core/A.html#6da00f516fa898d7" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#d798cc16e0e87f98" class="i field">IsEnabledProperty</a>, <span class="s">&quot;IsBusy&quot;</span>);
 
				<a href="/Xamarin.Forms.Core/A.html#061ef9ad01040f5c" class="i property">Children</a>.<a href="/Xamarin.Forms.Core/A.html#8b55b803fdb770bc" class="i method">Add</a>(
					<span class="r9 r">view</span>: <b>new</b> <a href="/Xamarin.Forms.Core/A.html#5fb9aea266d897be" class="t constructor">BoxView</a>
					{
						<a href="/Xamarin.Forms.Core/A.html#564121ba41a80a9d" class="i property">Opacity</a> = .4,
						<a href="/Xamarin.Forms.Core/A.html#8c7f2e13366d12d5" class="i property">BackgroundColor</a> = <a href="/Xamarin.Forms.Core/A.html#8a6a061540451ec4" class="t t">Color</a>.<a href="/Xamarin.Forms.Core/A.html#d0e7c08969926ff6" class="i method">FromHex</a>(<span class="s">&quot;#ccc&quot;</span>)
					},
					<span class="r10 r">widthConstraint</span>: <span class="i n">Forms</span>.<a href="/Xamarin.Forms.Core/A.html#72214994f3f1d9d3" class="t t">Constraint</a>.<a href="/Xamarin.Forms.Core/A.html#84894b8cccd9fbac" class="i method">RelativeToParent</a>((<span id="r11 rd" class="r11 r">parent</span>) =&gt; {
						<b>return</b> <span class="r11 r">parent</span>.<a href="/Xamarin.Forms.Core/A.html#4b4ff8e00e0429d0" class="i property">Width</a>;
					}),
					<span class="r12 r">heightConstraint</span>: <span class="i n">Forms</span>.<a href="/Xamarin.Forms.Core/A.html#72214994f3f1d9d3" class="t t">Constraint</a>.<a href="/Xamarin.Forms.Core/A.html#84894b8cccd9fbac" class="i method">RelativeToParent</a>((<span id="r13 rd" class="r13 r">parent</span>) =&gt; {
						<b>return</b> <span class="r13 r">parent</span>.<a href="/Xamarin.Forms.Core/A.html#5d4bfa7087771a1d" class="i property">Height</a>;
					})
					);
 
				<a href="/Xamarin.Forms.Core/A.html#5c88f1e97bd1f520" class="k">var</a> <span id="r14 rd" class="r14 r">content</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#9eff482dc844e6af" class="t constructor">StackLayout</a>
				{
					<a href="/Xamarin.Forms.Core/A.html#8c7f2e13366d12d5" class="i property">BackgroundColor</a> = <a href="/Xamarin.Forms.Core/A.html#8a6a061540451ec4" class="t t">Color</a>.<a href="/Xamarin.Forms.Core/A.html#a6c01880a405bde1" class="i field">White</a>,
					<a href="/Xamarin.Forms.Core/A.html#caf7e252c413a6c4" class="i property">Spacing</a> = 10,
					<a href="/Xamarin.Forms.Core/A.html#7ca8765029e54dfb" class="i property">Padding</a> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#8d0226bd89b0963d" class="t constructor">Thickness</a>(
						<span class="r15 r">horizontalSize</span>: 10,
						<span class="r16 r">verticalSize</span>: 20
						)
				};
 
				<a href="/Xamarin.Forms.Core/A.html#7bf0ec975c61fa24" class="k">var</a> <span id="r17 rd" class="r17 r">activityIndicator</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#540419626472ee40" class="t constructor">ActivityIndicator</a> { <a href="/Xamarin.Forms.Core/A.html#94f112885c170768" class="i property">IsRunning</a> = <b>true</b> };
				<span class="r17 r">activityIndicator</span>.<a href="/Xamarin.Forms.Core/A.html#6da00f516fa898d7" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#7bf0ec975c61fa24" class="t t">ActivityIndicator</a>.<a href="/Xamarin.Forms.Core/A.html#36381bd32db3e303" class="i field">ColorProperty</a>, <span class="s">&quot;Color&quot;</span>);
 
				<span class="r14 r">content</span>.<a href="/Xamarin.Forms.Core/A.html#5049824abac2f58c" class="i property">Children</a>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r17 r">activityIndicator</span>);
				<a href="/Xamarin.Forms.Core/A.html#9467fb795433a9ba" class="k">var</a> <span id="r18 rd" class="r18 r">label</span> = <b>new</b> <a href="/Xamarin.Forms.Core/A.html#aa576bf63d926ee6" class="t constructor">Label</a> { <a href="/Xamarin.Forms.Core/A.html#f0a998bd8f7ce0dc" class="i property">HorizontalOptions</a> = <a href="/Xamarin.Forms.Core/A.html#633bdae02c57accb" class="t t">LayoutOptions</a>.<a href="/Xamarin.Forms.Core/A.html#612f6bf95f5b2a4c" class="i field">CenterAndExpand</a> };
 
				<span class="r18 r">label</span>.<a href="/Xamarin.Forms.Core/A.html#6da00f516fa898d7" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#9467fb795433a9ba" class="t t">Label</a>.<a href="/Xamarin.Forms.Core/A.html#208bde7cd8e27200" class="i field">TextProperty</a>, <span class="s">&quot;BusyText&quot;</span>);
				<span class="r18 r">label</span>.<a href="/Xamarin.Forms.Core/A.html#6da00f516fa898d7" class="i method">SetBinding</a>(<a href="/Xamarin.Forms.Core/A.html#9467fb795433a9ba" class="t t">Label</a>.<a href="/Xamarin.Forms.Core/A.html#2502a6653e6e612e" class="i field">TextColorProperty</a>, <span class="s">&quot;Color&quot;</span>);
 
				<span class="r14 r">content</span>.<a href="/Xamarin.Forms.Core/A.html#5049824abac2f58c" class="i property">Children</a>.<a href="@0@mscorlib/A.html#a9319db8c62ae453" class="i method">Add</a>(<span class="r18 r">label</span>);
 
				<a href="/Xamarin.Forms.Core/A.html#061ef9ad01040f5c" class="i property">Children</a>.<a href="/Xamarin.Forms.Core/A.html#8b55b803fdb770bc" class="i method">Add</a>(
					<span class="r9 r">view</span>: <span class="r14 r">content</span>,
					<span class="r10 r">widthConstraint</span>: <span class="i n">Forms</span>.<a href="/Xamarin.Forms.Core/A.html#72214994f3f1d9d3" class="t t">Constraint</a>.<a href="/Xamarin.Forms.Core/A.html#84894b8cccd9fbac" class="i method">RelativeToParent</a>((<span id="r19 rd" class="r19 r">parent</span>) =&gt; {
						<b>return</b> <span class="r19 r">parent</span>.<a href="/Xamarin.Forms.Core/A.html#4b4ff8e00e0429d0" class="i property">Width</a> / 2;
					}),
					<span class="r12 r">heightConstraint</span>: <span class="i n">Forms</span>.<a href="/Xamarin.Forms.Core/A.html#72214994f3f1d9d3" class="t t">Constraint</a>.<a href="/Xamarin.Forms.Core/A.html#84894b8cccd9fbac" class="i method">RelativeToParent</a>((<span id="r20 rd" class="r20 r">parent</span>) =&gt; {
						<b>return</b> <span class="r20 r">parent</span>.<a href="/Xamarin.Forms.Core/A.html#4b4ff8e00e0429d0" class="i property">Width</a> / 3;
					}),
					<span class="r21 r">xConstraint</span>: <span class="i n">Forms</span>.<a href="/Xamarin.Forms.Core/A.html#72214994f3f1d9d3" class="t t">Constraint</a>.<a href="/Xamarin.Forms.Core/A.html#84894b8cccd9fbac" class="i method">RelativeToParent</a>((<span id="r22 rd" class="r22 r">parent</span>) =&gt; {
						<b>return</b> <span class="r22 r">parent</span>.<a href="/Xamarin.Forms.Core/A.html#4b4ff8e00e0429d0" class="i property">Width</a> / 4;
					}),
					<span class="r23 r">yConstraint</span>: <span class="i n">Forms</span>.<a href="/Xamarin.Forms.Core/A.html#72214994f3f1d9d3" class="t t">Constraint</a>.<a href="/Xamarin.Forms.Core/A.html#84894b8cccd9fbac" class="i method">RelativeToParent</a>((<span id="r24 rd" class="r24 r">parent</span>) =&gt; {
						<b>return</b> (<span class="r24 r">parent</span>.<a href="/Xamarin.Forms.Core/A.html#5d4bfa7087771a1d" class="i property">Height</a> / 2) - (<span class="r24 r">parent</span>.<a href="/Xamarin.Forms.Core/A.html#4b4ff8e00e0429d0" class="i property">Width</a> / 6);
					})
					);
			}
		}
	}
}</pre></td></tr></table></div></body></html>
