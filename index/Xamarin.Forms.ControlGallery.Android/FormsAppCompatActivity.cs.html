<!DOCTYPE html>
<html><head><title>FormsAppCompatActivity.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(90);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.ControlGallery.Android/FormsAppCompatActivity.cs" target="_top">FormsAppCompatActivity.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.ControlGallery.Android" target="_top">Xamarin.Forms.ControlGallery.Android\Xamarin.Forms.ControlGallery.Android.csproj</a> (Xamarin.Forms.ControlGallery.Android)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<span class="k preprocess">#</span><span class="k preprocess">if</span> !<span class="i">FORMS_APPLICATION_ACTIVITY</span> &amp;&amp; !<span class="i">PRE_APPLICATION_CLASS</span>
 
<b>using</b> <span class="i">System</span>.<span class="i">Diagnostics</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">App</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Content</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Content</span>.<span class="i">PM</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">OS</span>;
<b>using</b> <span class="i n">Java</span>.<span class="i n">Interop</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Controls</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Controls</span>.<span class="i n">Issues</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Platform</span>.<span class="i n">Android</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Platform</span>.<span class="i n">Android</span>.<span class="i n">AppLinks</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">ControlGallery</span>.<span class="i n">Android</span>
{
	<span class="c">// This is the AppCompat version of Activity1</span>
 
	[<span class="i">Activity</span>(<span class="i">Label</span> = <span class="s">&quot;Control Gallery&quot;</span>, <span class="i">Icon</span> = <span class="s">&quot;@drawable/icon&quot;</span>, <span class="i">Theme</span> = <span class="s">&quot;@style/MyTheme&quot;</span>,
		<span class="i">MainLauncher</span> = <b>true</b>, <span class="i">HardwareAccelerated</span> = <b>true</b>, 
		<span class="i">ConfigurationChanges</span> = <span class="i">ConfigChanges</span>.<span class="i">ScreenSize</span> | <span class="i">ConfigChanges</span>.<span class="i">Orientation</span>)]
	[<span class="i">IntentFilter</span>(<b>new</b>[] { <span class="i">Intent</span>.<span class="i">ActionView</span> },
		<span class="i">Categories</span> = <b>new</b>[]
		{
			<span class="i">Intent</span>.<span class="i">ActionView</span>,
			<span class="i">Intent</span>.<span class="i">CategoryDefault</span>,
			<span class="i">Intent</span>.<span class="i">CategoryBrowsable</span>
		},
		<span class="i">DataScheme</span> = <span class="s">&quot;http&quot;</span>, <span class="i">DataHost</span> = <a href="/Xamarin.Forms.Controls/A.html#12ba9bfb7ddfe7df" class="t t">App</a>.<a href="/Xamarin.Forms.Controls/A.html#08cd54cba530e4d3" class="i field">AppName</a>, <span class="i">DataPathPrefix</span> = <span class="s">&quot;/gallery/&quot;</span>
		)
	]
	<b>public</b> <a href="P/388ed8e2a27bd299.html" target="s" class="k">partial</a> <b>class</b> <a id="388ed8e2a27bd299" href="R/../../0000000000.html" target="n" data-glyph="0,0" class="t t"><span id="49239fd848b9bac4">Activity1</span></a> : <a href="/Xamarin.Forms.Platform.Android/A.html#73a28a031ead4b7d" class="t t">FormsAppCompatActivity</a>
	{
		<b>protected override void</b> <a id="33ccf4646868d3c8" href="R/../../0000000000.html" target="n" data-glyph="75,1" class="i method">OnCreate</a>(<span class="i">Bundle</span> <span id="r0 rd" class="r0 r">bundle</span>)
		{
			<a href="/Xamarin.Forms.Platform.Android/A.html#609f596ab3722d80" class="i property">ToolbarResource</a> = <a href="/Xamarin.Forms.Platform.Android/A.html#de82b002b903d152" class="t t">Resource</a>.<span class="i">Layout</span>.<span class="i">Toolbar</span>;
			<a href="/Xamarin.Forms.Platform.Android/A.html#7965cbe6cd97fe5a" class="i property">TabLayoutResource</a> = <a href="/Xamarin.Forms.Platform.Android/A.html#de82b002b903d152" class="t t">Resource</a>.<span class="i">Layout</span>.<span class="i">Tabbar</span>;
 
			<span class="c">// Uncomment the next line to run this as a full screen app (no status bar)</span>
			<span class="c">//Window.AddFlags(WindowManagerFlags.Fullscreen | WindowManagerFlags.TurnScreenOn);</span>
 
			<a href="/Xamarin.Forms.Platform.Android/A.html#73a28a031ead4b7d" class="k">base</a>.<span class="i">OnCreate</span>(<span class="r0 r">bundle</span>);
 
			<b>if</b> (!<span class="i">Debugger</span>.<span class="i">IsAttached</span>)
				<span class="i">Insights</span>.<span class="i">Initialize</span>(<a href="/Xamarin.Forms.Controls/A.html#12ba9bfb7ddfe7df" class="t t">App</a>.<a href="/Xamarin.Forms.Controls/A.html#586d153e1c12f2c9" class="i property">InsightsApiKey</a>, <span class="i">ApplicationContext</span>);
 
<span class="k preprocess">#</span><span class="k preprocess">if</span> <span class="i">TEST_EXPERIMENTAL_RENDERERS</span>
<span class="e">			Forms.SetFlags(&quot;FastRenderers_Experimental&quot;);
</span><span class="k preprocess">#</span><span class="k preprocess">else</span>
			<a href="/Xamarin.Forms.Platform.Android/A.html#eb8800bb7e650425" class="t t">Forms</a>.<span class="i">SetFlags</span>(<span class="s">&quot;Fake_Flag&quot;</span>); <span class="c">// So we can test for flag initialization issues</span>
<span class="k preprocess">#</span><span class="k preprocess">endif</span>
 
			<a href="/Xamarin.Forms.Platform.Android/A.html#eb8800bb7e650425" class="t t">Forms</a>.<span class="i">Init</span>(<a href="P/388ed8e2a27bd299.html#388ed8e2a27bd299" class="k">this</a>, <span class="r0 r">bundle</span>);
 
			<a href="/Xamarin.Forms.Maps.Android/A.html#c79f0e51c842c8ba" class="t t">FormsMaps</a>.<span class="i">Init</span>(<a href="P/388ed8e2a27bd299.html#388ed8e2a27bd299" class="k">this</a>, <span class="r0 r">bundle</span>);
			<a href="/Xamarin.Forms.Platform.Android.AppLinks/A.html#3e5a52277a1ce201" class="t t">AndroidAppLinks</a>.<span class="i">Init</span>(<a href="P/388ed8e2a27bd299.html#388ed8e2a27bd299" class="k">this</a>);
			<a href="/Xamarin.Forms.Platform.Android/A.html#eb8800bb7e650425" class="t t">Forms</a>.<a href="/Xamarin.Forms.Platform.Android/A.html#6d9728c6e11153db" class="i">ViewInitialized</a> += (<span id="r1 rd" class="r1 r">sender</span>, <span id="r2 rd" class="r2 r">e</span>) =&gt; {
				<span class="c">//				if (!string.IsNullOrWhiteSpace(e.View.StyleId)) {</span>
				<span class="c">//					e.NativeView.ContentDescription = e.View.StyleId;</span>
				<span class="c">//				}</span>
			};
 
			<span class="c">// uncomment to verify turning off title bar works. This is not intended to be dynamic really.</span>
			<span class="c">//Forms.SetTitleBarVisibility (AndroidTitleBarVisibility.Never);</span>
 
			<a href="Activity1.cs.html#ffaac6468612eb06" class="i field">_app</a> = <b>new</b> <span class="t">App</span>();
			
			<span class="c">// When the native control gallery loads up, it&#39;ll let us know so we can add the nested native controls</span>
			<a href="/Xamarin.Forms.Core/A.html#68162056f69c1f2c" class="t t">MessagingCenter</a>.<span class="i">Subscribe</span>&lt;<a href="/Xamarin.Forms.Controls/A.html#e84c069f0d08c612" class="t t">NestedNativeControlGalleryPage</a>&gt;(<a href="P/388ed8e2a27bd299.html#388ed8e2a27bd299" class="k">this</a>, <a href="/Xamarin.Forms.Controls/A.html#e84c069f0d08c612" class="t t">NestedNativeControlGalleryPage</a>.<a href="/Xamarin.Forms.Controls/A.html#d2482e2aa47f8a81" class="i field">ReadyForNativeControlsMessage</a>, <span class="i">AddNativeControls</span>);
 
			<span class="c">// When the native binding gallery loads up, it&#39;ll let us know so we can set up the native bindings</span>
			<a href="/Xamarin.Forms.Core/A.html#68162056f69c1f2c" class="t t">MessagingCenter</a>.<span class="i">Subscribe</span>&lt;<a href="/Xamarin.Forms.Controls/A.html#0ebf3b0d6d57e852" class="t t">NativeBindingGalleryPage</a>&gt;(<a href="P/388ed8e2a27bd299.html#388ed8e2a27bd299" class="k">this</a>, <a href="/Xamarin.Forms.Controls/A.html#0ebf3b0d6d57e852" class="t t">NativeBindingGalleryPage</a>.<a href="/Xamarin.Forms.Controls/A.html#e443e305b18cab25" class="i field">ReadyForNativeBindingsMessage</a>, <span class="i">AddNativeBindings</span>);
 
			<span class="c">// Listen for the message from the status bar color toggle test</span>
			<a href="/Xamarin.Forms.Core/A.html#68162056f69c1f2c" class="t t">MessagingCenter</a>.<span class="i">Subscribe</span>&lt;<a href="/Xamarin.Forms.Controls/A.html#b98e92aed6e80224" class="t t">AndroidStatusBarColor</a>&gt;(<a href="P/388ed8e2a27bd299.html#388ed8e2a27bd299" class="k">this</a>, <a href="/Xamarin.Forms.Controls/A.html#b98e92aed6e80224" class="t t">AndroidStatusBarColor</a>.<a href="/Xamarin.Forms.Controls/A.html#72f465bf2996c647" class="i field">Message</a>, <span id="r3 rd" class="r3 r">color</span> =&gt; <span class="i">SetStatusBarColor</span>(<b>global</b>::<span class="i">Android</span>.<span class="i">Graphics</span>.<span class="i">Color</span>.<span class="i">Red</span>));
 
			<a href="Activity1.cs.html#ea58e36af14973dd" class="i method">SetUpForceRestartTest</a>();
 
			<span class="i">LoadApplication</span>(<a href="Activity1.cs.html#ffaac6468612eb06" class="i field">_app</a>);
		}
 
		
		[<span class="i">Export</span>(<span class="s">&quot;IsPreAppCompat&quot;</span>)]
		<b>public bool</b> <a id="a30f7ae9b1cfc38b" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">IsPreAppCompat</a>()
		{
			<b>return false</b>;
		}
	}
}
 
<span class="k preprocess">#</span><span class="k preprocess">endif</span></pre></td></tr></table></div></body></html>
