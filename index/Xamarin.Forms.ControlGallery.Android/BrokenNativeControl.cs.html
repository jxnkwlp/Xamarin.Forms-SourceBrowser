<!DOCTYPE html>
<html><head><title>BrokenNativeControl.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(60);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.ControlGallery.Android/BrokenNativeControl.cs" target="_top">BrokenNativeControl.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.ControlGallery.Android" target="_top">Xamarin.Forms.ControlGallery.Android\Xamarin.Forms.ControlGallery.Android.csproj</a> (Xamarin.Forms.ControlGallery.Android)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i">System</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Content</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Graphics</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Runtime</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Util</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Views</span>;
<b>using</b> <span class="i">Android</span>.<span class="i">Widget</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">ControlGallery</span>.<span class="i n">Android</span>
{
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;</span><span class="c">summary</span><span class="c">&gt;</span>
	<span class="c">///</span><span class="c">     This is a custom Android control which deliberately does some incorrect measuring</span>
	<span class="c">///</span><span class="c"> </span><span class="c">&lt;/</span><span class="c">summary</span><span class="c">&gt;</span>
	<b>internal class</b> <a id="cdd45804c3c9f6d1" href="R/cdd45804c3c9f6d1.html" target="n" data-glyph="2,0" class="t t">BrokenNativeControl</a> : <span class="i">TextView</span>
	{
		<b>bool</b> <a id="007d09e8907886d3" href="R/007d09e8907886d3.html" target="n" data-glyph="46,1" class="i field">_on</a>;
 
		<b>public</b> <a id="1a8e6fabda125b0c" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">BrokenNativeControl</a> (<span class="i">IntPtr</span> <span id="r0 rd" class="r0 r">javaReference</span>, <span class="i">JniHandleOwnership</span> <span id="r1 rd" class="r1 r">transfer</span>) : <b>base</b> (<span class="r0 r">javaReference</span>, <span class="r1 r">transfer</span>)
		{
		}
 
		<b>public</b> <a id="fb6cd6e7f9f2a0c7" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">BrokenNativeControl</a> (<span class="i">Context</span> <span id="r2 rd" class="r2 r">context</span>) : <b>base</b> (<span class="r2 r">context</span>)
		{
		}
 
		<b>public</b> <a id="8d07a0925e1f43bf" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">BrokenNativeControl</a> (<span class="i">Context</span> <span id="r3 rd" class="r3 r">context</span>, <span class="i">IAttributeSet</span> <span id="r4 rd" class="r4 r">attrs</span>) : <b>base</b> (<span class="r3 r">context</span>, <span class="r4 r">attrs</span>)
		{
		}
 
		<b>public</b> <a id="0e6a5b133eb51786" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">BrokenNativeControl</a> (<span class="i">Context</span> <span id="r5 rd" class="r5 r">context</span>, <span class="i">IAttributeSet</span> <span id="r6 rd" class="r6 r">attrs</span>, <b>int</b> <span id="r7 rd" class="r7 r">defStyleAttr</span>)
			: <b>base</b> (<span class="r5 r">context</span>, <span class="r6 r">attrs</span>, <span class="r7 r">defStyleAttr</span>)
		{
		}
 
		<b>public</b> <a id="5f06bc309665e769" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i constructor">BrokenNativeControl</a> (<span class="i">Context</span> <span id="r8 rd" class="r8 r">context</span>, <span class="i">IAttributeSet</span> <span id="r9 rd" class="r9 r">attrs</span>, <b>int</b> <span id="r10 rd" class="r10 r">defStyleAttr</span>, <b>int</b> <span id="r11 rd" class="r11 r">defStyleRes</span>)
			: <b>base</b> (<span class="r8 r">context</span>, <span class="r9 r">attrs</span>, <span class="r10 r">defStyleAttr</span>, <span class="r11 r">defStyleRes</span>)
		{
		}
 
		<b>public override bool</b> <a id="24e6437c2c7a0450" href="R/../../0000000000.html" target="n" data-glyph="72,1" class="i method">OnTouchEvent</a> (<span class="i">MotionEvent</span> <span id="r12 rd" class="r12 r">e</span>)
		{
			<a href="#007d09e8907886d3" class="i field">_on</a> = !<a href="#007d09e8907886d3" class="i field">_on</a>;
 
			<span class="i">SetTypeface</span> (<b>null</b>, <a href="#007d09e8907886d3" class="i field">_on</a> ? <span class="i">TypefaceStyle</span>.<span class="i">Bold</span> : <span class="i">TypefaceStyle</span>.<span class="i">Normal</span>);
 
			<b>return</b> <b>base</b>.<span class="i">OnTouchEvent</span> (<span class="r12 r">e</span>);
		}
 
		<b>protected override void</b> <a id="64a58a8190b5a8eb" href="R/../../0000000000.html" target="n" data-glyph="75,1" class="i method">OnMeasure</a> (<b>int</b> <span id="r13 rd" class="r13 r">widthMeasureSpec</span>, <b>int</b> <span id="r14 rd" class="r14 r">heightMeasureSpec</span>)
		{
			<b>int</b> <span id="r15 rd" class="r15 r">width</span> = <span class="i">MeasureSpec</span>.<span class="i">GetSize</span> (<span class="r13 r">widthMeasureSpec</span>);
 
			<span class="c">// Force the width to 1/2 of what&#39;s being requested. This is deliberately wrong so we can demo </span>
			<span class="c">// giving the LayoutExtensions an override to fix it with</span>
			<b>int</b> <span id="r16 rd" class="r16 r">widthSpec</span> = <span class="i">MeasureSpec</span>.<span class="i">MakeMeasureSpec</span> (<span class="r15 r">width</span> / 2, <span class="i">MeasureSpec</span>.<span class="i">GetMode</span> (<span class="r13 r">widthMeasureSpec</span>));
 
			<b>base</b>.<span class="i">OnMeasure</span> (<span class="r16 r">widthSpec</span>, <span class="r14 r">heightMeasureSpec</span>);
		}
	}
}</pre></td></tr></table></div></body></html>
