<!DOCTYPE html>
<html><head><title>NavigationMenuRenderer.cs</title><link rel="stylesheet" href="../../styles.css"><script src="../../scripts.js"></script></head>
<body class="cB" onload="i(140);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.Platform.iOS/Renderers/NavigationMenuRenderer.cs" target="_top">Renderers\NavigationMenuRenderer.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.Platform.iOS" target="_top">Xamarin.Forms.Platform.iOS\Xamarin.Forms.Platform.iOS.csproj</a> (Xamarin.Forms.Platform.iOS)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">Foundation</span>;
<b>using</b> <span class="i n">UIKit</span>;
<b>using</b> <span class="t">RectangleF</span> = <span class="i n">CoreGraphics</span>.<span class="t t">CGRect</span>;
<b>using</b> <span class="t">SizeF</span> = <span class="i n">CoreGraphics</span>.<span class="t t">CGSize</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Internals</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Platform</span>.<span class="i n">iOS</span>
{
	<b>public class</b> <a id="55b020be2eba2a64" href="../R/55b020be2eba2a64.html" target="n" data-glyph="0,0" class="t t"><span id="456c10d5a1f140d7">NavigationMenuRenderer</span></a> : <a href="../ViewRenderer.cs.html#0be4ef726068bc97" class="t t">ViewRenderer</a>
	{
		<span class="t t">UICollectionView</span> <a id="344b46bf8b69b945" href="../R/344b46bf8b69b945.html" target="n" data-glyph="46,1" class="i field">_collectionView</a>;
 
		<b>protected override void</b> <a id="6ac063d0ccf37c85" href="../R/6ac063d0ccf37c85.html" target="n" data-glyph="75,1" class="i method">OnElementChanged</a>(<a href="../ElementChangedEventArgs.cs.html#8cd59c48d876c811" class="t t">ElementChangedEventArgs</a>&lt;<a href="/Xamarin.Forms.Core/A.html#60f54d5b73cefedd" class="t t">View</a>&gt; <span id="r0 rd" class="r0 r">e</span>)
		{
			<a href="../ViewRenderer.cs.html#0be4ef726068bc97" class="k">base</a>.<a href="../ViewRenderer.cs.html#8d6908150c52ef88" class="i method">OnElementChanged</a>(<span class="r0 r">e</span>);
			<a href="@0@mscorlib/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r1 rd" class="r1 r">pad</span> = <span class="t t">UIDevice</span>.<span class="i property">CurrentDevice</span>.<span class="i property">UserInterfaceIdiom</span> == <span class="t t">UIUserInterfaceIdiom</span>.<span class="i field">Pad</span>;
			<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r2 rd" class="r2 r">size</span> = <span class="r1 r">pad</span> ? 220 : 142;
			<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r3 rd" class="r3 r">margin</span> = <span class="r1 r">pad</span> ? 27 : 12;
			<a href="@0@mscorlib/A.html#225942ed7b7a3252" class="k">var</a> <span id="r4 rd" class="r4 r">bottomMargin</span> = (<b>int</b>)(<span class="r3 r">margin</span> * 0.8);
 
			<a href="#344b46bf8b69b945" class="i field">_collectionView</a> = <b>new</b> <span class="t constructor">UICollectionView</span>(<b>new</b> <span class="t constructor">RectangleF</span>(0, 0, 100, 100),
				<b>new</b> <span class="t constructor">UICollectionViewFlowLayout</span>
				{
					<span class="i property">ItemSize</span> = <b>new</b> <span class="t constructor">SizeF</span>(<span class="r2 r">size</span>, <span class="r2 r">size</span> + 30),
					<span class="i property">ScrollDirection</span> = <span class="t t">UICollectionViewScrollDirection</span>.<span class="i field">Vertical</span>,
					<span class="i property">SectionInset</span> = <b>new</b> <span class="t constructor">UIEdgeInsets</span>(<span class="r3 r">margin</span>, <span class="r3 r">margin</span>, <span class="r4 r">bottomMargin</span>, <span class="r3 r">margin</span>),
					<span class="i property">MinimumInteritemSpacing</span> = <span class="r3 r">margin</span>,
					<span class="i property">MinimumLineSpacing</span> = <span class="r3 r">margin</span>
				})
			{ <span class="i property">DataSource</span> = <b>new</b> <a href="#d95022fbbece94c3" class="t constructor">DataSource</a>((<a href="/Xamarin.Forms.Core/A.html#4fa2a110e0d85e1c" class="t t">NavigationMenu</a>)<a href="../VisualElementRenderer.cs.html#31c34a1126d7ec15" class="i property">Element</a>), <span class="i property">BackgroundColor</span> = <span class="t t">UIColor</span>.<span class="i property">White</span> };
 
			<b>using</b> (<b>var</b> <span id="r5 rd" class="r5 r">navigationCellId</span> = <b>new</b> <span class="t constructor">NSString</span>(<span class="s">&quot;NavigationCell&quot;</span>))
				<a href="#344b46bf8b69b945" class="i field">_collectionView</a>.<span class="i method">RegisterClassForCell</span>(<b>typeof</b>(<a href="#a3d9b793391c60b6" class="t t">NavigationCell</a>), <span class="r5 r">navigationCellId</span>);
 
			<a href="../ViewRenderer.cs.html#5a05fd07ede87b4f" class="i method">SetNativeControl</a>(<a href="#344b46bf8b69b945" class="i field">_collectionView</a>);
		}
 
		<b>sealed class</b> <a id="a3d9b793391c60b6" href="../R/a3d9b793391c60b6.html" target="n" data-glyph="4,1" class="t t">NavigationCell</a> : <span class="t t">UICollectionViewCell</span>
		{
			<b>readonly</b> <span class="t t">UIButton</span> <a id="1e36149ea3c49b6b" href="../R/1e36149ea3c49b6b.html" target="n" data-glyph="46,2" class="i field">_image</a> = <b>new</b> <span class="t constructor">UIButton</span>(<span class="t t">RectangleF</span>.<span class="i field">Empty</span>);
 
			<b>readonly</b> <span class="t t">UILabel</span> <a id="ab5d404cb38f3204" href="../R/ab5d404cb38f3204.html" target="n" data-glyph="46,2" class="i field">_nameLabel</a> = <b>new</b> <span class="t constructor">UILabel</span>(<span class="t t">RectangleF</span>.<span class="i field">Empty</span>) { <span class="i property">BackgroundColor</span> = <span class="t t">UIColor</span>.<span class="i property">Clear</span>, <span class="i property">TextAlignment</span> = <span class="t t">UITextAlignment</span>.<span class="i field">Center</span>, <span class="i property">Font</span> = <span class="t t">UIFont</span>.<span class="i method">SystemFontOfSize</span>(14) };
 
			<b>string</b> <a id="da60171d7fd6bad5" href="../R/da60171d7fd6bad5.html" target="n" data-glyph="46,2" class="i field">_icon</a>;
 
			[<span class="t constructor">Export</span>(<span class="s">&quot;initWithFrame:&quot;</span>)]
			<b>public</b> <a id="e104663f48a7d127" href="../R/../../0000000000.html" target="n" data-glyph="72,2" class="i constructor">NavigationCell</a>(<span class="t t">RectangleF</span> <span id="r6 rd" class="r6 r">frame</span>) : <b>base</b>(<span class="r6 r">frame</span>)
			{
				<a href="#d7e69cee42c5a8fb" class="i method">SetupLayer</a>();
				<a href="#1e36149ea3c49b6b" class="i field">_image</a>.<span class="i">TouchUpInside</span> += (<b>object</b> <span id="r7 rd" class="r7 r">sender</span>, <a href="@0@mscorlib/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r8 rd" class="r8 r">e</span>) =&gt;
				{
					<b>if</b> (<a href="#a9cbfc3c14c0495a" class="i property">Selected</a> != <b>null</b>)
						<a href="#a9cbfc3c14c0495a" class="i property">Selected</a>();
				};
				<a href="#1e36149ea3c49b6b" class="i field">_image</a>.<span class="i property">ContentMode</span> = <span class="t t">UIViewContentMode</span>.<span class="i field">ScaleAspectFit</span>;
				<a href="#1e36149ea3c49b6b" class="i field">_image</a>.<span class="i property">Center</span> = <span class="i property">ContentView</span>.<span class="i property">Center</span>;
 
				<span class="i property">ContentView</span>.<span class="i method">AddSubview</span>(<a href="#1e36149ea3c49b6b" class="i field">_image</a>);
				<span class="i property">ContentView</span>.<span class="i method">AddSubview</span>(<a href="#ab5d404cb38f3204" class="i field">_nameLabel</a>);
			}
 
			<b>public string</b> <a id="7aa41ff4b9c9d337" href="../R/7aa41ff4b9c9d337.html" target="n" data-glyph="102,2" class="i property">Icon</a>
			{
				<b>get</b> { <b>return</b> <a href="#da60171d7fd6bad5" class="i field">_icon</a>; }
				<b>set</b>
				{
					<a href="#da60171d7fd6bad5" class="i field">_icon</a> = <b>value</b>;
					<a href="#1e36149ea3c49b6b" class="i field">_image</a>.<span class="i method">SetImage</span>(<b>new</b> <span class="t constructor">UIImage</span>(<a href="#da60171d7fd6bad5" class="i field">_icon</a>), <span class="t t">UIControlState</span>.<span class="i field">Normal</span>);
				}
			}
 
			<b>public string</b> <a id="59df8c7bb169aa30" href="../R/59df8c7bb169aa30.html" target="n" data-glyph="102,2" class="i property">Name</a>
			{
				<b>get</b> { <b>return</b> <a href="#ab5d404cb38f3204" class="i field">_nameLabel</a>.<span class="i property">Text</span>; }
				<b>set</b> { <a href="#ab5d404cb38f3204" class="i field">_nameLabel</a>.<span class="i property">Text</span> = <b>value</b>; }
			}
 
			<b>public</b> <b>new</b> <a href="@0@mscorlib/A.html#9147ae6f76643aae" class="t t">Action</a> <a id="a9cbfc3c14c0495a" href="../R/a9cbfc3c14c0495a.html" target="n" data-glyph="102,2" class="i property">Selected</a> { <b>get</b>; <b>set</b>; }
 
			<b>public override void</b> <a id="14a61a8f409e859a" href="../R/14a61a8f409e859a.html" target="n" data-glyph="72,2" class="i method">LayoutSubviews</a>()
			{
				<b>base</b>.<span class="i method">LayoutSubviews</span>();
				<a href="#1e36149ea3c49b6b" class="i field">_image</a>.<span class="i property">Frame</span> = <b>new</b> <span class="t constructor">RectangleF</span>(0, 0, <span class="i property">ContentView</span>.<span class="i property">Frame</span>.<span class="i property">Width</span>, <span class="i property">ContentView</span>.<span class="i property">Frame</span>.<span class="i property">Height</span> - 30);
				<b>var</b> <span id="r9 rd" class="r9 r">sizeThatFits</span> = <a href="#ab5d404cb38f3204" class="i field">_nameLabel</a>.<span class="i method">SizeThatFits</span>(<span class="i property">ContentView</span>.<span class="i property">Frame</span>.<span class="i property">Size</span>);
				<a href="#ab5d404cb38f3204" class="i field">_nameLabel</a>.<span class="i property">Frame</span> = <b>new</b> <span class="t constructor">RectangleF</span>(0, <span class="i property">ContentView</span>.<span class="i property">Frame</span>.<span class="i property">Height</span> - 15 - <span class="r9 r">sizeThatFits</span>.<span class="i property">Height</span> / 2, <span class="i property">ContentView</span>.<span class="i property">Frame</span>.<span class="i property">Width</span>, <span class="r9 r">sizeThatFits</span>.<span class="i property">Height</span>);
			}
 
			<b>void</b> <a id="d7e69cee42c5a8fb" href="../R/d7e69cee42c5a8fb.html" target="n" data-glyph="76,2" class="i method">SetupLayer</a>()
			{
				<b>var</b> <span id="r10 rd" class="r10 r">layer</span> = <a href="#1e36149ea3c49b6b" class="i field">_image</a>.<span class="i property">Layer</span>;
 
				<span class="r10 r">layer</span>.<span class="i property">ShadowRadius</span> = 6;
				<span class="r10 r">layer</span>.<span class="i property">ShadowColor</span> = <span class="t t">UIColor</span>.<span class="i property">Black</span>.<span class="i property">CGColor</span>;
				<span class="r10 r">layer</span>.<span class="i property">ShadowOpacity</span> = 0.2f;
				<span class="r10 r">layer</span>.<span class="i property">ShadowOffset</span> = <b>new</b> <span class="t constructor">SizeF</span>();
 
				<span class="r10 r">layer</span>.<span class="i property">RasterizationScale</span> = <span class="t t">UIScreen</span>.<span class="i property">MainScreen</span>.<span class="i property">Scale</span>;
				<span class="r10 r">layer</span>.<span class="i property">ShouldRasterize</span> = <b>true</b>;
			}
		}
 
		<b>class</b> <a id="d00c819659755c26" href="../R/d00c819659755c26.html" target="n" data-glyph="4,1" class="t t">DataSource</a> : <span class="t t">UICollectionViewDataSource</span>
		{
			<b>readonly</b> <a href="/Xamarin.Forms.Core/A.html#4fa2a110e0d85e1c" class="t t">NavigationMenu</a> <a id="f22548c539598645" href="../R/f22548c539598645.html" target="n" data-glyph="46,2" class="i field">_menu</a>;
 
			<b>public</b> <a id="d95022fbbece94c3" href="../R/d95022fbbece94c3.html" target="n" data-glyph="72,2" class="i constructor">DataSource</a>(<a href="/Xamarin.Forms.Core/A.html#4fa2a110e0d85e1c" class="t t">NavigationMenu</a> <span id="r11 rd" class="r11 r">menu</span>)
			{
				<a href="#f22548c539598645" class="i field">_menu</a> = <span class="r11 r">menu</span>;
			}
 
			<b>public override</b> <span class="t t">UICollectionViewCell</span> <a id="116257722870d12e" href="../R/116257722870d12e.html" target="n" data-glyph="72,2" class="i method">GetCell</a>(<span class="t t">UICollectionView</span> <span id="r12 rd" class="r12 r">collectionView</span>, <span class="t t">NSIndexPath</span> <span id="r13 rd" class="r13 r">indexPath</span>)
			{
				<a href="#a3d9b793391c60b6" class="k">var</a> <span id="r14 rd" class="r14 r">cell</span> = (<a href="#a3d9b793391c60b6" class="t t">NavigationCell</a>)<span class="r12 r">collectionView</span>.<span class="i method">DequeueReusableCell</span>(<b>new</b> <span class="t constructor">NSString</span>(<span class="s">&quot;NavigationCell&quot;</span>), <span class="r13 r">indexPath</span>);
				<a href="/Xamarin.Forms.Core/A.html#d2450da355a1c8f2" class="k">var</a> <span id="r15 rd" class="r15 r">target</span> = <a href="#f22548c539598645" class="i field">_menu</a>.<a href="/Xamarin.Forms.Core/A.html#8b7001c8b7907f5d" class="i property">Targets</a>.<a href="@0@System.Core/A.html#90ccdbd47b57182e" class="i method">Skip</a>(<span class="r13 r">indexPath</span>.<span class="i property">Row</span>).<a href="@0@System.Core/A.html#8087366974af11d2" class="i method">FirstOrDefault</a>();
 
				<b>if</b> (<span class="r15 r">target</span> != <b>null</b>)
				{
					<span class="r14 r">cell</span>.<a href="#59df8c7bb169aa30" class="i property">Name</a> = <span class="r15 r">target</span>.<a href="/Xamarin.Forms.Core/A.html#25a9b5c9e8eb0d28" class="i property">Title</a>;
					<span class="r14 r">cell</span>.<a href="#7aa41ff4b9c9d337" class="i property">Icon</a> = <span class="r15 r">target</span>.<a href="/Xamarin.Forms.Core/A.html#27bdee04ff62bec2" class="i property">Icon</a>?.<a href="/Xamarin.Forms.Core/A.html#a7a7e7a7e3b9cdb3" class="i property">File</a>;
					<span class="r14 r">cell</span>.<a href="#a9cbfc3c14c0495a" class="i property">Selected</a> = () =&gt; <a href="#f22548c539598645" class="i field">_menu</a>.<a href="/Xamarin.Forms.Core/A.html#542d8588678e5a64" class="i method">SendTargetSelected</a>(<span class="r15 r">target</span>);
				}
				<b>else</b>
				{
					<span class="r14 r">cell</span>.<a href="#a9cbfc3c14c0495a" class="i property">Selected</a> = <b>null</b>;
					<span class="r14 r">cell</span>.<a href="#7aa41ff4b9c9d337" class="i property">Icon</a> = <span class="s">&quot;&quot;</span>;
					<span class="r14 r">cell</span>.<a href="#59df8c7bb169aa30" class="i property">Name</a> = <span class="s">&quot;&quot;</span>;
				}
 
				<b>return</b> <span class="r14 r">cell</span>;
			}
 
			<b>public override</b> <span class="t t">nint</span> <a id="8295d3e2c8bd7eed" href="../R/8295d3e2c8bd7eed.html" target="n" data-glyph="72,2" class="i method">GetItemsCount</a>(<span class="t t">UICollectionView</span> <span id="r16 rd" class="r16 r">collectionView</span>, <span class="t t">nint</span> <span id="r17 rd" class="r17 r">section</span>)
			{
				<b>return</b> <a href="#f22548c539598645" class="i field">_menu</a>.<a href="/Xamarin.Forms.Core/A.html#8b7001c8b7907f5d" class="i property">Targets</a>.<a href="@0@System.Core/A.html#41ef9e39e54d0d0b" class="i method">Count</a>();
			}
		}
	}
}</pre></td></tr></table></div></body></html>
