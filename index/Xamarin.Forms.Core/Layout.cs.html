<!DOCTYPE html>
<html><head><title>Layout.cs</title><link rel="stylesheet" href="../styles.css"><script src="../scripts.js"></script></head>
<body class="cB" onload="i(451);"><div class="dH">
<table style="width: 100%">
<tr><td>File: <a id="filePath" class="blueLink" href="Xamarin.Forms.Core/Layout.cs" target="_top">Layout.cs</a><br/></td><td></td></tr>
<tr><td>Project: <a id="projectPath" class="blueLink" href="/#Xamarin.Forms.Core" target="_top">Xamarin.Forms.Core\Xamarin.Forms.Core.csproj</a> (Xamarin.Forms.Core)</td><td></td></tr>
</table>
</div>
<div class="cz"><table class="tb" cellpadding="0" cellspacing="0"><tr><td valign="top" align="right"><pre id="ln"></pre></td><td valign="top" align="left"><pre id="code">
<b>using</b> <span class="i n">System</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Generic</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">ObjectModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Collections</span>.<span class="i n">Specialized</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">ComponentModel</span>;
<b>using</b> <span class="i n">System</span>.<span class="i n">Linq</span>;
<b>using</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>.<span class="i n">Internals</span>;
 
<b>namespace</b> <span class="i n">Xamarin</span>.<span class="i n">Forms</span>
{
	[<a href="ContentPropertyAttribute.cs.html#bef2b2c38a491b0a" class="t constructor">ContentProperty</a>(<span class="s">&quot;Children&quot;</span>)]
	<b>public abstract class</b> <a id="8862e539d70ce5bc" href="R/8862e539d70ce5bc.html" target="n" data-glyph="0,0" class="t t">Layout</a>&lt;<span id="r0 rd t" class="r0 r t">T</span>&gt; : <a href="#63eb70469ecf4413" class="t t">Layout</a>, <a href="IViewContainer.cs.html#775ce6843a2f7cba" class="t t">IViewContainer</a>&lt;<span class="r0 r t">T</span>&gt; <b>where</b> <span class="r0 r t">T</span> : <a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a>
	{
		<b>readonly</b> <a href="ElementCollection.cs.html#f1c369b63f2c2d5f" class="t t">ElementCollection</a>&lt;<span class="r0 r t">T</span>&gt; <a id="7526dcb317181d4f" href="R/7526dcb317181d4f.html" target="n" data-glyph="46,1" class="i field">_children</a>;
 
		<b>protected</b> <a id="b028fca38e42e875" href="R/../../0000000000.html" target="n" data-glyph="75,1" class="i constructor">Layout</a>()
		{
			<a href="#7526dcb317181d4f" class="i field">_children</a> = <b>new</b> <a href="ElementCollection.cs.html#8d3a6dbff96cf5a7" class="t constructor">ElementCollection</a>&lt;<span class="r0 r t">T</span>&gt;(<a href="#1410153f062e9d91" class="i property">InternalChildren</a>);
		}
 
		<b>public</b> <b>new</b> <a href="@1@System.Runtime/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<span class="r0 r t">T</span>&gt; <a id="5049824abac2f58c" href="R/5049824abac2f58c.html" target="n" data-glyph="102,1" class="i property">Children</a>
		{
			<b>get</b> { <b>return</b> <a href="#7526dcb317181d4f" class="i field">_children</a>; }
		}
 
		<b>protected virtual void</b> <a id="4ce3de0ad29ec962" href="R/4ce3de0ad29ec962.html" target="n" data-glyph="75,1" class="i method">OnAdded</a>(<span class="r0 r t">T</span> <span id="r1 rd" class="r1 r">view</span>)
		{
		}
 
		<b>protected override void</b> <a id="71a867232533c9c5" href="R/71a867232533c9c5.html" target="n" data-glyph="75,1" class="i method">OnChildAdded</a>(<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a> <span id="r2 rd" class="r2 r">child</span>)
		{
			<a href="#63eb70469ecf4413" class="k">base</a>.<a href="VisualElement.cs.html#06dd13a3b8f2afdd" class="i method">OnChildAdded</a>(<span class="r2 r">child</span>);
 
			<span class="r0 r t">var</span> <span id="r3 rd" class="r3 r">typedChild</span> = <span class="r2 r">child</span> <b>as</b> <span class="r0 r t">T</span>;
			<b>if</b> (<span class="r3 r">typedChild</span> != <b>null</b>)
				<a href="#4ce3de0ad29ec962" class="i method">OnAdded</a>(<span class="r3 r">typedChild</span>);
		}
 
		<b>protected override void</b> <a id="058e5b45668fbb63" href="R/058e5b45668fbb63.html" target="n" data-glyph="75,1" class="i method">OnChildRemoved</a>(<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a> <span id="r4 rd" class="r4 r">child</span>)
		{
			<a href="#63eb70469ecf4413" class="k">base</a>.<a href="VisualElement.cs.html#27d5a802d261c91a" class="i method">OnChildRemoved</a>(<span class="r4 r">child</span>);
 
			<span class="r0 r t">var</span> <span id="r5 rd" class="r5 r">typedChild</span> = <span class="r4 r">child</span> <b>as</b> <span class="r0 r t">T</span>;
			<b>if</b> (<span class="r5 r">typedChild</span> != <b>null</b>)
				<a href="#7c9a9c41bad33dba" class="i method">OnRemoved</a>(<span class="r5 r">typedChild</span>);
		}
 
		<b>protected virtual void</b> <a id="7c9a9c41bad33dba" href="R/7c9a9c41bad33dba.html" target="n" data-glyph="75,1" class="i method">OnRemoved</a>(<span class="r0 r t">T</span> <span id="r6 rd" class="r6 r">view</span>)
		{
		}
	}
 
	<b>public abstract class</b> <a id="63eb70469ecf4413" href="R/63eb70469ecf4413.html" target="n" data-glyph="0,0" class="t t">Layout</a> : <a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a>, <a href="ILayout.cs.html#937f05e37f3c4270" class="t t">ILayout</a>, <a href="ILayoutController.cs.html#339d284b6c483ed7" class="t t">ILayoutController</a>
	{
		<b>public static readonly</b> <a href="BindableProperty.cs.html#743d6dd5177e1828" class="t t">BindableProperty</a> <a id="04754be94fee3ad3" href="R/04754be94fee3ad3.html" target="n" data-glyph="42,1" class="i field">IsClippedToBoundsProperty</a> = <a href="BindableProperty.cs.html#743d6dd5177e1828" class="t t">BindableProperty</a>.<a href="BindableProperty.cs.html#d20d5764687c67bb" class="i method">Create</a>(<span class="s">&quot;IsClippedToBounds&quot;</span>, <b>typeof</b>(<b>bool</b>), <b>typeof</b>(<a href="#63eb70469ecf4413" class="t t">Layout</a>), <b>false</b>);
 
		<b>public static readonly</b> <a href="BindableProperty.cs.html#743d6dd5177e1828" class="t t">BindableProperty</a> <a id="e4b1b8392e96697c" href="R/e4b1b8392e96697c.html" target="n" data-glyph="42,1" class="i field">PaddingProperty</a> = <a href="BindableProperty.cs.html#743d6dd5177e1828" class="t t">BindableProperty</a>.<a href="BindableProperty.cs.html#d20d5764687c67bb" class="i method">Create</a>(<span class="s">&quot;Padding&quot;</span>, <b>typeof</b>(<a href="Thickness.cs.html#318ad9558f37f9c7" class="t t">Thickness</a>), <b>typeof</b>(<a href="#63eb70469ecf4413" class="t t">Layout</a>), <b>default</b>(<a href="Thickness.cs.html#318ad9558f37f9c7" class="t t">Thickness</a>),
									<span class="r7 r">propertyChanged</span>: (<span id="r8 rd" class="r8 r">bindable</span>, <span id="r9 rd" class="r9 r">old</span>, <span id="r10 rd" class="r10 r">newValue</span>) =&gt; {
										<a href="#63eb70469ecf4413" class="k">var</a> <span id="r11 rd" class="r11 r">layout</span> = (<a href="#63eb70469ecf4413" class="t t">Layout</a>)<span class="r8 r">bindable</span>;
										<span class="r11 r">layout</span>.<a href="#dacb1a0ccc531ab0" class="i method">UpdateChildrenLayout</a>();
									}, <span class="r12 r">defaultValueCreator</span>: (<span id="r13 rd" class="r13 r">bindable</span>) =&gt; ((<a href="#63eb70469ecf4413" class="t t">Layout</a>)<span class="r13 r">bindable</span>).<a href="#3b33856d3b25c5c3" class="i method">CreateDefaultPadding</a>());
 
		<b>static</b> <a href="@1@System.Runtime/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="@1@System.Runtime/A.html#8585965bb176a426" class="t t">KeyValuePair</a>&lt;<a href="#63eb70469ecf4413" class="t t">Layout</a>, <b>int</b>&gt;&gt; <a id="5ad5340fb0a72a6f" href="R/5ad5340fb0a72a6f.html" target="n" data-glyph="46,1" class="i field">s_resolutionList</a> = <b>new</b> <a href="@1@System.Collections/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="@1@System.Runtime/A.html#8585965bb176a426" class="t t">KeyValuePair</a>&lt;<a href="#63eb70469ecf4413" class="t t">Layout</a>, <b>int</b>&gt;&gt;();
		<b>static bool</b> <a id="cc29a8db39e433aa" href="R/cc29a8db39e433aa.html" target="n" data-glyph="46,1" class="i field">s_relayoutInProgress</a>;
		<b>bool</b> <a id="fcfd1ac0e1f4f6dd" href="R/fcfd1ac0e1f4f6dd.html" target="n" data-glyph="46,1" class="i field">_allocatedFlag</a>;
 
		<b>bool</b> <a id="398e25010b2622df" href="R/398e25010b2622df.html" target="n" data-glyph="46,1" class="i field">_hasDoneLayout</a>;
		<a href="Size.cs.html#a940b381a4300f8b" class="t t">Size</a> <a id="eb128c0fbd28897d" href="R/eb128c0fbd28897d.html" target="n" data-glyph="46,1" class="i field">_lastLayoutSize</a> = <b>new</b> <a href="Size.cs.html#1727209bca650e71" class="t constructor">Size</a>(-1, -1);
 
		<a href="@1@System.Runtime/A.html#aafef79f3fced6c2" class="t t">ReadOnlyCollection</a>&lt;<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a>&gt; <a id="09a8d180da7778c5" href="R/09a8d180da7778c5.html" target="n" data-glyph="46,1" class="i field">_logicalChildren</a>;
 
		<b>protected</b> <a id="a37062ff1b5ae306" href="R/../../0000000000.html" target="n" data-glyph="75,1" class="i constructor">Layout</a>()
		{
			<span class="c">//if things were added in base ctor (through implicit styles), the items added aren&#39;t properly parented</span>
			<b>if</b> (<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<a href="@1@System.Runtime/A.html#f2419069e9890f5d" class="i property">Count</a> &gt; 0)
				<a href="#e50fcaf406c96e1d" class="i method">InternalChildrenOnCollectionChanged</a>(<a href="#63eb70469ecf4413" class="k">this</a>, <b>new</b> <span class="t constructor">NotifyCollectionChangedEventArgs</span>(<span class="t t">NotifyCollectionChangedAction</span>.<span class="i field">Add</span>, <a href="#1410153f062e9d91" class="i property">InternalChildren</a>));
 
			<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<span class="i">CollectionChanged</span> += <a href="#e50fcaf406c96e1d" class="i method">InternalChildrenOnCollectionChanged</a>;
		}
 
		<b>public bool</b> <a id="caa4a685520ee9de" href="R/caa4a685520ee9de.html" target="n" data-glyph="102,1" class="i property">IsClippedToBounds</a>
		{
			<b>get</b> { <b>return</b> (<b>bool</b>)<a href="BindableObject.cs.html#00e81fee0b400c43" class="i method">GetValue</a>(<a href="#04754be94fee3ad3" class="i field">IsClippedToBoundsProperty</a>); }
			<b>set</b> { <a href="BindableObject.cs.html#71f22f51364ed0e1" class="i method">SetValue</a>(<a href="#04754be94fee3ad3" class="i field">IsClippedToBoundsProperty</a>, <b>value</b>); }
		}
 
		<b>public</b> <a href="Thickness.cs.html#318ad9558f37f9c7" class="t t">Thickness</a> <a id="7ca8765029e54dfb" href="R/7ca8765029e54dfb.html" target="n" data-glyph="102,1" class="i property">Padding</a>
		{
			<b>get</b> { <b>return</b> (<a href="Thickness.cs.html#318ad9558f37f9c7" class="t t">Thickness</a>)<a href="BindableObject.cs.html#00e81fee0b400c43" class="i method">GetValue</a>(<a href="#e4b1b8392e96697c" class="i field">PaddingProperty</a>); }
			<b>set</b> { <a href="BindableObject.cs.html#71f22f51364ed0e1" class="i method">SetValue</a>(<a href="#e4b1b8392e96697c" class="i field">PaddingProperty</a>, <b>value</b>); }
		}
 
		<b>internal virtual</b> <a href="Thickness.cs.html#318ad9558f37f9c7" class="t t">Thickness</a> <a id="3b33856d3b25c5c3" href="R/3b33856d3b25c5c3.html" target="n" data-glyph="74,1" class="i method">CreateDefaultPadding</a>()
		{
			<b>return default</b>(<a href="Thickness.cs.html#318ad9558f37f9c7" class="t t">Thickness</a>);
		}
 
		<b>internal</b> <span class="t t">ObservableCollection</span>&lt;<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a>&gt; <a id="1410153f062e9d91" href="R/1410153f062e9d91.html" target="n" data-glyph="104,1" class="i property">InternalChildren</a> { <b>get</b>; } = <b>new</b> <span class="t constructor">ObservableCollection</span>&lt;<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a>&gt;();
 
		<b>internal override</b> <a href="@1@System.Runtime/A.html#aafef79f3fced6c2" class="t t">ReadOnlyCollection</a>&lt;<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a>&gt; <a id="82862988aea7989e" href="R/82862988aea7989e.html" target="n" data-glyph="104,1" class="i property">LogicalChildrenInternal</a>
		{
			<b>get</b> { <b>return</b> <a href="#09a8d180da7778c5" class="i field">_logicalChildren</a> ?? (<a href="#09a8d180da7778c5" class="i field">_logicalChildren</a> = <b>new</b> <a href="@1@System.Runtime/A.html#64e45c8a9b38b1c2" class="t constructor">ReadOnlyCollection</a>&lt;<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a>&gt;(<a href="#1410153f062e9d91" class="i property">InternalChildren</a>)); }
		}
 
		<b>public event</b> <a href="@1@System.Runtime/A.html#3b79d2b06c15f250" class="t t">EventHandler</a> <a id="f5589e5d68752929" href="R/f5589e5d68752929.html" target="n" data-glyph="30,1" class="i">LayoutChanged</a>;
 
		[<a href="@1@System.Runtime/A.html#ab67c52c634f618d" class="t constructor">EditorBrowsable</a>(<a href="@1@System.Runtime/A.html#1a60f7b04af02e88" class="t t">EditorBrowsableState</a>.<a href="@1@System.Runtime/A.html#043ce0a55050bfc5" class="i field">Never</a>)]
		<b>public</b> <a href="@1@System.Runtime/A.html#b040fb780bdd59f4" class="t t">IReadOnlyList</a>&lt;<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a>&gt; <a id="8d358042762d736e" href="R/8d358042762d736e.html" target="n" data-glyph="102,1" class="i property">Children</a>
		{
			<b>get</b> { <b>return</b> <a href="#1410153f062e9d91" class="i property">InternalChildren</a>; }
		}
 
		<b>public void</b> <a id="863cd2a150a3165d" href="R/863cd2a150a3165d.html" target="n" data-glyph="72,1" class="i method">ForceLayout</a>()
		{
			<a href="VisualElement.cs.html#19701b25c4ff6946" class="i method">SizeAllocated</a>(<a href="VisualElement.cs.html#4b4ff8e00e0429d0" class="i property">Width</a>, <a href="VisualElement.cs.html#5d4bfa7087771a1d" class="i property">Height</a>);
		}
 
		[<a href="@1@System.Runtime/A.html#66ed4e142f4e14e7" class="t constructor">Obsolete</a>(<span class="s">&quot;OnSizeRequest is obsolete as of version 2.2.0. Please use OnMeasure instead.&quot;</span>)]
		<b>public sealed override</b> <a href="SizeRequest.cs.html#76c9ea4b373db5b2" class="t t">SizeRequest</a> <a id="8e90c5a3a976a403" href="R/8e90c5a3a976a403.html" target="n" data-glyph="72,1" class="i method">GetSizeRequest</a>(<b>double</b> <span id="r14 rd" class="r14 r">widthConstraint</span>, <b>double</b> <span id="r15 rd" class="r15 r">heightConstraint</span>)
		{
			<a href="SizeRequest.cs.html#76c9ea4b373db5b2" class="t t">SizeRequest</a> <span id="r16 rd" class="r16 r">size</span> = <a href="View.cs.html#60f54d5b73cefedd" class="k">base</a>.<a href="VisualElement.cs.html#b914fd030f3b40db" class="i method">GetSizeRequest</a>(<span class="r14 r">widthConstraint</span> - <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#b239e161e31297f6" class="i property">HorizontalThickness</a>, <span class="r15 r">heightConstraint</span> - <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#9c1debb853cb2633" class="i property">VerticalThickness</a>);
			<b>return</b> <b>new</b> <a href="SizeRequest.cs.html#e57ae25284fd9c9e" class="t constructor">SizeRequest</a>(<b>new</b> <a href="Size.cs.html#1727209bca650e71" class="t constructor">Size</a>(<span class="r16 r">size</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>.<a href="Size.cs.html#6207d8e3826352f7" class="i property">Width</a> + <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#b239e161e31297f6" class="i property">HorizontalThickness</a>, <span class="r16 r">size</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>.<a href="Size.cs.html#d581c837a1ed6a2e" class="i property">Height</a> + <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#9c1debb853cb2633" class="i property">VerticalThickness</a>),
				<b>new</b> <a href="Size.cs.html#1727209bca650e71" class="t constructor">Size</a>(<span class="r16 r">size</span>.<a href="SizeRequest.cs.html#bb6f162e62c2a687" class="i property">Minimum</a>.<a href="Size.cs.html#6207d8e3826352f7" class="i property">Width</a> + <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#b239e161e31297f6" class="i property">HorizontalThickness</a>, <span class="r16 r">size</span>.<a href="SizeRequest.cs.html#bb6f162e62c2a687" class="i property">Minimum</a>.<a href="Size.cs.html#d581c837a1ed6a2e" class="i property">Height</a> + <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#9c1debb853cb2633" class="i property">VerticalThickness</a>));
		}
 
		<b>public static void</b> <a id="7ef8e1dd509efc78" href="R/7ef8e1dd509efc78.html" target="n" data-glyph="72,1" class="i method">LayoutChildIntoBoundingRegion</a>(<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="t t">VisualElement</a> <span id="r17 rd" class="r17 r">child</span>, <a href="Rectangle.cs.html#2ad9a305ad01941d" class="t t">Rectangle</a> <span id="r18 rd" class="r18 r">region</span>)
		{
			<a href="View.cs.html#60f54d5b73cefedd" class="k">var</a> <span id="r19 rd" class="r19 r">view</span> = <span class="r17 r">child</span> <b>as</b> <a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a>;
			<b>if</b> (<span class="r19 r">view</span> == <b>null</b>)
			{
				<span class="r17 r">child</span>.<a href="VisualElement.cs.html#fbd64ad9b55bdc37" class="i method">Layout</a>(<span class="r18 r">region</span>);
				<b>return</b>;
			}
 
			<a href="LayoutOptions.cs.html#633bdae02c57accb" class="t t">LayoutOptions</a> <span id="r20 rd" class="r20 r">horizontalOptions</span> = <span class="r19 r">view</span>.<a href="View.cs.html#f0a998bd8f7ce0dc" class="i property">HorizontalOptions</a>;
			<b>if</b> (<span class="r20 r">horizontalOptions</span>.<a href="LayoutOptions.cs.html#fe73dc38b93138be" class="i property">Alignment</a> != <a href="LayoutAlignment.cs.html#84f24e62d0dba696" class="t t">LayoutAlignment</a>.<a href="LayoutAlignment.cs.html#a9ab1cd983580897" class="i field">Fill</a>)
			{
				<a href="SizeRequest.cs.html#76c9ea4b373db5b2" class="t t">SizeRequest</a> <span id="r21 rd" class="r21 r">request</span> = <span class="r17 r">child</span>.<a href="VisualElement.cs.html#f73a7c3c52ba9361" class="i method">Measure</a>(<span class="r18 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a>, <span class="r18 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a>, <a href="MeasureFlags.cs.html#19188af5047dacb2" class="t t">MeasureFlags</a>.<a href="MeasureFlags.cs.html#1d00849f5d3cab40" class="i field">IncludeMargins</a>);
				<b>double</b> <span id="r22 rd" class="r22 r">diff</span> = <span class="t t">Math</span>.<span class="i method">Max</span>(0, <span class="r18 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a> - <span class="r21 r">request</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>.<a href="Size.cs.html#6207d8e3826352f7" class="i property">Width</a>);
				<span class="r18 r">region</span>.<a href="Rectangle.cs.html#b47b6e80b78191c6" class="i property">X</a> += (<b>int</b>)(<span class="r22 r">diff</span> * <span class="r20 r">horizontalOptions</span>.<a href="LayoutOptions.cs.html#fe73dc38b93138be" class="i property">Alignment</a>.<a href="LayoutAlignmentExtensions.cs.html#212e7d1ae634c8d2" class="i method">ToDouble</a>());
				<span class="r18 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a> -= <span class="r22 r">diff</span>;
			}
 
			<a href="LayoutOptions.cs.html#633bdae02c57accb" class="t t">LayoutOptions</a> <span id="r23 rd" class="r23 r">verticalOptions</span> = <span class="r19 r">view</span>.<a href="View.cs.html#8e761ec8c2755065" class="i property">VerticalOptions</a>;
			<b>if</b> (<span class="r23 r">verticalOptions</span>.<a href="LayoutOptions.cs.html#fe73dc38b93138be" class="i property">Alignment</a> != <a href="LayoutAlignment.cs.html#84f24e62d0dba696" class="t t">LayoutAlignment</a>.<a href="LayoutAlignment.cs.html#a9ab1cd983580897" class="i field">Fill</a>)
			{
				<a href="SizeRequest.cs.html#76c9ea4b373db5b2" class="t t">SizeRequest</a> <span id="r24 rd" class="r24 r">request</span> = <span class="r17 r">child</span>.<a href="VisualElement.cs.html#f73a7c3c52ba9361" class="i method">Measure</a>(<span class="r18 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a>, <span class="r18 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a>, <a href="MeasureFlags.cs.html#19188af5047dacb2" class="t t">MeasureFlags</a>.<a href="MeasureFlags.cs.html#1d00849f5d3cab40" class="i field">IncludeMargins</a>);
				<b>double</b> <span id="r25 rd" class="r25 r">diff</span> = <span class="t t">Math</span>.<span class="i method">Max</span>(0, <span class="r18 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a> - <span class="r24 r">request</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>.<a href="Size.cs.html#d581c837a1ed6a2e" class="i property">Height</a>);
				<span class="r18 r">region</span>.<a href="Rectangle.cs.html#d037b6a24bab4dc3" class="i property">Y</a> += (<b>int</b>)(<span class="r25 r">diff</span> * <span class="r23 r">verticalOptions</span>.<a href="LayoutOptions.cs.html#fe73dc38b93138be" class="i property">Alignment</a>.<a href="LayoutAlignmentExtensions.cs.html#212e7d1ae634c8d2" class="i method">ToDouble</a>());
				<span class="r18 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a> -= <span class="r25 r">diff</span>;
			}
 
			<a href="Thickness.cs.html#318ad9558f37f9c7" class="t t">Thickness</a> <span id="r26 rd" class="r26 r">margin</span> = <span class="r19 r">view</span>.<a href="View.cs.html#5b26c8810521bc25" class="i property">Margin</a>;
			<span class="r18 r">region</span>.<a href="Rectangle.cs.html#b47b6e80b78191c6" class="i property">X</a> += <span class="r26 r">margin</span>.<a href="Thickness.cs.html#a0bd4afd75788341" class="i property">Left</a>;
			<span class="r18 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a> -= <span class="r26 r">margin</span>.<a href="Thickness.cs.html#b239e161e31297f6" class="i property">HorizontalThickness</a>;
			<span class="r18 r">region</span>.<a href="Rectangle.cs.html#d037b6a24bab4dc3" class="i property">Y</a> += <span class="r26 r">margin</span>.<a href="Thickness.cs.html#3e75692d2dcdb7ce" class="i property">Top</a>;
			<span class="r18 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a> -= <span class="r26 r">margin</span>.<a href="Thickness.cs.html#9c1debb853cb2633" class="i property">VerticalThickness</a>;
 
			<span class="r17 r">child</span>.<a href="VisualElement.cs.html#fbd64ad9b55bdc37" class="i method">Layout</a>(<span class="r18 r">region</span>);
		}
 
		<b>public void</b> <a id="fb7df6d9e11ef1c2" href="R/fb7df6d9e11ef1c2.html" target="n" data-glyph="72,1" class="i method">LowerChild</a>(<a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a> <span id="r27 rd" class="r27 r">view</span>)
		{
			<b>if</b> (!<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<a href="@1@System.Runtime/A.html#bdb5717f62176a67" class="i method">Contains</a>(<span class="r27 r">view</span>) || <a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<span class="i method">First</span>() == <span class="r27 r">view</span>)
				<b>return</b>;
 
			<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<span class="i method">Move</span>(<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<a href="@1@System.Runtime/A.html#5f1520f6f0d504ad" class="i method">IndexOf</a>(<span class="r27 r">view</span>), 0);
			<a href="VisualElement.cs.html#fbe177962af4c23d" class="i method">OnChildrenReordered</a>();
		}
 
		<b>public void</b> <a id="f038ace5acb6b826" href="R/f038ace5acb6b826.html" target="n" data-glyph="72,1" class="i method">RaiseChild</a>(<a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a> <span id="r28 rd" class="r28 r">view</span>)
		{
			<b>if</b> (!<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<a href="@1@System.Runtime/A.html#bdb5717f62176a67" class="i method">Contains</a>(<span class="r28 r">view</span>) || <a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<span class="i method">Last</span>() == <span class="r28 r">view</span>)
				<b>return</b>;
 
			<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<span class="i method">Move</span>(<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<a href="@1@System.Runtime/A.html#5f1520f6f0d504ad" class="i method">IndexOf</a>(<span class="r28 r">view</span>), <a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<a href="@1@System.Runtime/A.html#f2419069e9890f5d" class="i property">Count</a> - 1);
			<a href="VisualElement.cs.html#fbe177962af4c23d" class="i method">OnChildrenReordered</a>();
		}
 
		<b>protected virtual void</b> <a id="fc52f7d6410af709" href="R/fc52f7d6410af709.html" target="n" data-glyph="75,1" class="i method">InvalidateLayout</a>()
		{
			<a href="#398e25010b2622df" class="i field">_hasDoneLayout</a> = <b>false</b>;
			<a href="VisualElement.cs.html#da8740295ddd4d28" class="i method">InvalidateMeasureInternal</a>(<a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#1c7a97ba4e810a20" class="i field">MeasureChanged</a>);
			<b>if</b> (!<a href="#398e25010b2622df" class="i field">_hasDoneLayout</a>)
				<a href="#863cd2a150a3165d" class="i method">ForceLayout</a>();
		}
 
		<b>protected abstract void</b> <a id="62eda31b6cf1514f" href="R/62eda31b6cf1514f.html" target="n" data-glyph="75,1" class="i method">LayoutChildren</a>(<b>double</b> <span id="r29 rd" class="r29 r">x</span>, <b>double</b> <span id="r30 rd" class="r30 r">y</span>, <b>double</b> <span id="r31 rd" class="r31 r">width</span>, <b>double</b> <span id="r32 rd" class="r32 r">height</span>);
 
		<b>protected void</b> <a id="4b34624021c6b584" href="R/4b34624021c6b584.html" target="n" data-glyph="75,1" class="i method">OnChildMeasureInvalidated</a>(<b>object</b> <span id="r33 rd" class="r33 r">sender</span>, <a href="@1@System.Runtime/A.html#9a1496aa60befd10" class="t t">EventArgs</a> <span id="r34 rd" class="r34 r">e</span>)
		{
			<a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a> <span id="r35 rd" class="r35 r">trigger</span> = (<span class="r34 r">e</span> <b>as</b> <a href="InvalidationEventArgs.cs.html#73ff7d345c73df3f" class="t t">InvalidationEventArgs</a>)?.<a href="InvalidationEventArgs.cs.html#3bd88bca1df8209b" class="i property">Trigger</a> ?? <a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#d5eeef2ca10e6a6d" class="i field">Undefined</a>;
			<a href="#219672f05ee5e988" class="i method">OnChildMeasureInvalidated</a>((<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="t t">VisualElement</a>)<span class="r33 r">sender</span>, <span class="r35 r">trigger</span>);
			<a href="#27405b260ce19a08" class="i method">OnChildMeasureInvalidated</a>();
		}
 
		<b>protected virtual void</b> <a id="27405b260ce19a08" href="R/27405b260ce19a08.html" target="n" data-glyph="75,1" class="i method">OnChildMeasureInvalidated</a>()
		{
		}
 
		<b>protected override void</b> <a id="259658e7a50f379e" href="R/259658e7a50f379e.html" target="n" data-glyph="75,1" class="i method">OnSizeAllocated</a>(<b>double</b> <span id="r36 rd" class="r36 r">width</span>, <b>double</b> <span id="r37 rd" class="r37 r">height</span>)
		{
			<a href="#fcfd1ac0e1f4f6dd" class="i field">_allocatedFlag</a> = <b>true</b>;
			<a href="View.cs.html#60f54d5b73cefedd" class="k">base</a>.<a href="VisualElement.cs.html#30ad5029b1467dde" class="i method">OnSizeAllocated</a>(<span class="r36 r">width</span>, <span class="r37 r">height</span>);
			<a href="#dacb1a0ccc531ab0" class="i method">UpdateChildrenLayout</a>();
		}
 
		<b>protected virtual bool</b> <a id="7dd2af160efef921" href="R/7dd2af160efef921.html" target="n" data-glyph="75,1" class="i method">ShouldInvalidateOnChildAdded</a>(<a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a> <span id="r38 rd" class="r38 r">child</span>)
		{
			<b>return true</b>;
		}
 
		<b>protected virtual bool</b> <a id="9606814d96595808" href="R/9606814d96595808.html" target="n" data-glyph="75,1" class="i method">ShouldInvalidateOnChildRemoved</a>(<a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a> <span id="r39 rd" class="r39 r">child</span>)
		{
			<b>return true</b>;
		}
 
		<b>protected void</b> <a id="dacb1a0ccc531ab0" href="R/dacb1a0ccc531ab0.html" target="n" data-glyph="75,1" class="i method">UpdateChildrenLayout</a>()
		{
			<a href="#398e25010b2622df" class="i field">_hasDoneLayout</a> = <b>true</b>;
 
			<b>if</b> (!<a href="#f1fcdd89fc4d0b98" class="i method">ShouldLayoutChildren</a>())
				<b>return</b>;
 
			<b>var</b> <span id="r40 rd" class="r40 r">oldBounds</span> = <b>new</b> <a href="Rectangle.cs.html#2ad9a305ad01941d" class="t t">Rectangle</a>[<a href="#82862988aea7989e" class="i property">LogicalChildrenInternal</a>.<a href="@1@System.Runtime/A.html#7e2071514968aca1" class="i property">Count</a>];
			<b>for</b> (<a href="@1@System.Runtime/A.html#225942ed7b7a3252" class="k">var</a> <span id="r41 rd" class="r41 r">index</span> = 0; <span class="r41 r">index</span> &lt; <span class="r40 r">oldBounds</span>.<a href="@1@System.Runtime/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r41 r">index</span>++)
			{
				<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="k">var</a> <span id="r42 rd" class="r42 r">c</span> = (<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="t t">VisualElement</a>)<a href="#82862988aea7989e" class="i property">LogicalChildrenInternal</a><a href="@1@System.Runtime/A.html#6c5b571f8784e13b">[</a><span class="r41 r">index</span>];
				<span class="r40 r">oldBounds</span>[<span class="r41 r">index</span>] = <span class="r42 r">c</span>.<a href="VisualElement.cs.html#0e284b498897247f" class="i property">Bounds</a>;
			}
 
			<b>double</b> <span id="r43 rd" class="r43 r">width</span> = <a href="VisualElement.cs.html#4b4ff8e00e0429d0" class="i property">Width</a>;
			<b>double</b> <span id="r44 rd" class="r44 r">height</span> = <a href="VisualElement.cs.html#5d4bfa7087771a1d" class="i property">Height</a>;
 
			<b>double</b> <span id="r45 rd" class="r45 r">x</span> = <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#a0bd4afd75788341" class="i property">Left</a>;
			<b>double</b> <span id="r46 rd" class="r46 r">y</span> = <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#3e75692d2dcdb7ce" class="i property">Top</a>;
			<b>double</b> <span id="r47 rd" class="r47 r">w</span> = <span class="t t">Math</span>.<span class="i method">Max</span>(0, <span class="r43 r">width</span> - <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#b239e161e31297f6" class="i property">HorizontalThickness</a>);
			<b>double</b> <span id="r48 rd" class="r48 r">h</span> = <span class="t t">Math</span>.<span class="i method">Max</span>(0, <span class="r44 r">height</span> - <a href="#7ca8765029e54dfb" class="i property">Padding</a>.<a href="Thickness.cs.html#9c1debb853cb2633" class="i property">VerticalThickness</a>);
 
			<a href="@1@System.Runtime/A.html#f1b135ff6c380b37" class="k">var</a> <span id="r49 rd" class="r49 r">isHeadless</span> = <a href="CompressedLayout.cs.html#e89c967ef6169b93" class="t t">CompressedLayout</a>.<a href="CompressedLayout.cs.html#e048a03f2885c7ed" class="i method">GetIsHeadless</a>(<a href="#63eb70469ecf4413" class="k">this</a>);
			<a href="Point.cs.html#71c2b8add148844d" class="k">var</a> <span id="r50 rd" class="r50 r">headlessOffset</span> = <a href="CompressedLayout.cs.html#e89c967ef6169b93" class="t t">CompressedLayout</a>.<a href="CompressedLayout.cs.html#2a013f032c5f19af" class="i method">GetHeadlessOffset</a>(<a href="#63eb70469ecf4413" class="k">this</a>);
			<b>for</b> (<a href="@1@System.Runtime/A.html#225942ed7b7a3252" class="k">var</a> <span id="r51 rd" class="r51 r">i</span> = 0; <span class="r51 r">i</span> &lt; <a href="#82862988aea7989e" class="i property">LogicalChildrenInternal</a>.<a href="@1@System.Runtime/A.html#7e2071514968aca1" class="i property">Count</a>; <span class="r51 r">i</span>++)
				<a href="CompressedLayout.cs.html#e89c967ef6169b93" class="t t">CompressedLayout</a>.<a href="CompressedLayout.cs.html#e3bd106715e7770d" class="i method">SetHeadlessOffset</a>((<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="t t">VisualElement</a>)<a href="#82862988aea7989e" class="i property">LogicalChildrenInternal</a><a href="@1@System.Runtime/A.html#6c5b571f8784e13b">[</a><span class="r51 r">i</span>], <span class="r49 r">isHeadless</span> ? <b>new</b> <a href="Point.cs.html#a96bb28c9688c765" class="t constructor">Point</a>(<span class="r50 r">headlessOffset</span>.<a href="Point.cs.html#e872b708b176ccbd" class="i property">X</a> + <a href="VisualElement.cs.html#0e284b498897247f" class="i property">Bounds</a>.<a href="Rectangle.cs.html#b47b6e80b78191c6" class="i property">X</a>, <span class="r50 r">headlessOffset</span>.<a href="Point.cs.html#ed844b5bb67ba407" class="i property">Y</a> + <a href="VisualElement.cs.html#0e284b498897247f" class="i property">Bounds</a>.<a href="Rectangle.cs.html#d037b6a24bab4dc3" class="i property">Y</a>) : <b>new</b> <a href="Point.cs.html#71c2b8add148844d" class="t constructor">Point</a>());
 
			<a href="#62eda31b6cf1514f" class="i method">LayoutChildren</a>(<span class="r45 r">x</span>, <span class="r46 r">y</span>, <span class="r47 r">w</span>, <span class="r48 r">h</span>);
 
			<b>for</b> (<a href="@1@System.Runtime/A.html#225942ed7b7a3252" class="k">var</a> <span id="r52 rd" class="r52 r">i</span> = 0; <span class="r52 r">i</span> &lt; <span class="r40 r">oldBounds</span>.<a href="@1@System.Runtime/A.html#42e9b7616956cf94" class="i property">Length</a>; <span class="r52 r">i</span>++)
			{
				<a href="Rectangle.cs.html#2ad9a305ad01941d" class="t t">Rectangle</a> <span id="r53 rd" class="r53 r">oldBound</span> = <span class="r40 r">oldBounds</span>[<span class="r52 r">i</span>];
				<a href="Rectangle.cs.html#2ad9a305ad01941d" class="t t">Rectangle</a> <span id="r54 rd" class="r54 r">newBound</span> = ((<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="t t">VisualElement</a>)<a href="#82862988aea7989e" class="i property">LogicalChildrenInternal</a><a href="@1@System.Runtime/A.html#6c5b571f8784e13b">[</a><span class="r52 r">i</span>]).<a href="VisualElement.cs.html#0e284b498897247f" class="i property">Bounds</a>;
				<b>if</b> (<span class="r53 r">oldBound</span> != <span class="r54 r">newBound</span>)
				{
					<a href="#f5589e5d68752929" class="i">LayoutChanged</a>?.<a href="@1@System.Runtime/A.html#aaedcaa3f05a32f9" class="i method">Invoke</a>(<a href="#63eb70469ecf4413" class="k">this</a>, <a href="@1@System.Runtime/A.html#9a1496aa60befd10" class="t t">EventArgs</a>.<a href="@1@System.Runtime/A.html#433622385e05af0d" class="i field">Empty</a>);
					<b>return</b>;
				}
			}
 
			<a href="#eb128c0fbd28897d" class="i field">_lastLayoutSize</a> = <b>new</b> <a href="Size.cs.html#1727209bca650e71" class="t constructor">Size</a>(<span class="r43 r">width</span>, <span class="r44 r">height</span>);
		}
 
		<b>internal static void</b> <a id="9caf7a0266b5a996" href="R/9caf7a0266b5a996.html" target="n" data-glyph="74,1" class="i method">LayoutChildIntoBoundingRegion</a>(<a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a> <span id="r55 rd" class="r55 r">child</span>, <a href="Rectangle.cs.html#2ad9a305ad01941d" class="t t">Rectangle</a> <span id="r56 rd" class="r56 r">region</span>, <a href="SizeRequest.cs.html#76c9ea4b373db5b2" class="t t">SizeRequest</a> <span id="r57 rd" class="r57 r">childSizeRequest</span>)
		{
			<b>if</b> (<span class="r56 r">region</span>.<a href="Rectangle.cs.html#45ac79cdb3917daa" class="i property">Size</a> != <span class="r57 r">childSizeRequest</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>)
			{
				<b>bool</b> <span id="r58 rd" class="r58 r">canUseAlreadyDoneRequest</span> = <span class="r56 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a> &gt;= <span class="r57 r">childSizeRequest</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>.<a href="Size.cs.html#6207d8e3826352f7" class="i property">Width</a> &amp;&amp; <span class="r56 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a> &gt;= <span class="r57 r">childSizeRequest</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>.<a href="Size.cs.html#d581c837a1ed6a2e" class="i property">Height</a>;
 
				<b>if</b> (<span class="r55 r">child</span>.<a href="View.cs.html#f0a998bd8f7ce0dc" class="i property">HorizontalOptions</a>.<a href="LayoutOptions.cs.html#fe73dc38b93138be" class="i property">Alignment</a> != <a href="LayoutAlignment.cs.html#84f24e62d0dba696" class="t t">LayoutAlignment</a>.<a href="LayoutAlignment.cs.html#a9ab1cd983580897" class="i field">Fill</a>)
				{
					<a href="SizeRequest.cs.html#76c9ea4b373db5b2" class="t t">SizeRequest</a> <span id="r59 rd" class="r59 r">request</span> = <span class="r58 r">canUseAlreadyDoneRequest</span> ? <span class="r57 r">childSizeRequest</span> : <span class="r55 r">child</span>.<a href="VisualElement.cs.html#f73a7c3c52ba9361" class="i method">Measure</a>(<span class="r56 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a>, <span class="r56 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a>, <a href="MeasureFlags.cs.html#19188af5047dacb2" class="t t">MeasureFlags</a>.<a href="MeasureFlags.cs.html#1d00849f5d3cab40" class="i field">IncludeMargins</a>);
					<b>double</b> <span id="r60 rd" class="r60 r">diff</span> = <span class="t t">Math</span>.<span class="i method">Max</span>(0, <span class="r56 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a> - <span class="r59 r">request</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>.<a href="Size.cs.html#6207d8e3826352f7" class="i property">Width</a>);
					<span class="r56 r">region</span>.<a href="Rectangle.cs.html#b47b6e80b78191c6" class="i property">X</a> += (<b>int</b>)(<span class="r60 r">diff</span> * <span class="r55 r">child</span>.<a href="View.cs.html#f0a998bd8f7ce0dc" class="i property">HorizontalOptions</a>.<a href="LayoutOptions.cs.html#fe73dc38b93138be" class="i property">Alignment</a>.<a href="LayoutAlignmentExtensions.cs.html#212e7d1ae634c8d2" class="i method">ToDouble</a>());
					<span class="r56 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a> -= <span class="r60 r">diff</span>;
				}
 
				<b>if</b> (<span class="r55 r">child</span>.<a href="View.cs.html#8e761ec8c2755065" class="i property">VerticalOptions</a>.<a href="LayoutOptions.cs.html#fe73dc38b93138be" class="i property">Alignment</a> != <a href="LayoutAlignment.cs.html#84f24e62d0dba696" class="t t">LayoutAlignment</a>.<a href="LayoutAlignment.cs.html#a9ab1cd983580897" class="i field">Fill</a>)
				{
					<a href="SizeRequest.cs.html#76c9ea4b373db5b2" class="t t">SizeRequest</a> <span id="r61 rd" class="r61 r">request</span> = <span class="r58 r">canUseAlreadyDoneRequest</span> ? <span class="r57 r">childSizeRequest</span> : <span class="r55 r">child</span>.<a href="VisualElement.cs.html#f73a7c3c52ba9361" class="i method">Measure</a>(<span class="r56 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a>, <span class="r56 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a>, <a href="MeasureFlags.cs.html#19188af5047dacb2" class="t t">MeasureFlags</a>.<a href="MeasureFlags.cs.html#1d00849f5d3cab40" class="i field">IncludeMargins</a>);
					<b>double</b> <span id="r62 rd" class="r62 r">diff</span> = <span class="t t">Math</span>.<span class="i method">Max</span>(0, <span class="r56 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a> - <span class="r61 r">request</span>.<a href="SizeRequest.cs.html#18756f69c7ccde74" class="i property">Request</a>.<a href="Size.cs.html#d581c837a1ed6a2e" class="i property">Height</a>);
					<span class="r56 r">region</span>.<a href="Rectangle.cs.html#d037b6a24bab4dc3" class="i property">Y</a> += (<b>int</b>)(<span class="r62 r">diff</span> * <span class="r55 r">child</span>.<a href="View.cs.html#8e761ec8c2755065" class="i property">VerticalOptions</a>.<a href="LayoutOptions.cs.html#fe73dc38b93138be" class="i property">Alignment</a>.<a href="LayoutAlignmentExtensions.cs.html#212e7d1ae634c8d2" class="i method">ToDouble</a>());
					<span class="r56 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a> -= <span class="r62 r">diff</span>;
				}
			}
 
			<a href="Thickness.cs.html#318ad9558f37f9c7" class="t t">Thickness</a> <span id="r63 rd" class="r63 r">margin</span> = <span class="r55 r">child</span>.<a href="View.cs.html#5b26c8810521bc25" class="i property">Margin</a>;
			<span class="r56 r">region</span>.<a href="Rectangle.cs.html#b47b6e80b78191c6" class="i property">X</a> += <span class="r63 r">margin</span>.<a href="Thickness.cs.html#a0bd4afd75788341" class="i property">Left</a>;
			<span class="r56 r">region</span>.<a href="Rectangle.cs.html#2116af7437c7d76b" class="i property">Width</a> -= <span class="r63 r">margin</span>.<a href="Thickness.cs.html#b239e161e31297f6" class="i property">HorizontalThickness</a>;
			<span class="r56 r">region</span>.<a href="Rectangle.cs.html#d037b6a24bab4dc3" class="i property">Y</a> += <span class="r63 r">margin</span>.<a href="Thickness.cs.html#3e75692d2dcdb7ce" class="i property">Top</a>;
			<span class="r56 r">region</span>.<a href="Rectangle.cs.html#243989d5c58d974b" class="i property">Height</a> -= <span class="r63 r">margin</span>.<a href="Thickness.cs.html#9c1debb853cb2633" class="i property">VerticalThickness</a>;
 
			<span class="r55 r">child</span>.<a href="VisualElement.cs.html#fbd64ad9b55bdc37" class="i method">Layout</a>(<span class="r56 r">region</span>);
		}
 
		<b>internal virtual void</b> <a id="219672f05ee5e988" href="R/219672f05ee5e988.html" target="n" data-glyph="74,1" class="i method">OnChildMeasureInvalidated</a>(<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="t t">VisualElement</a> <span id="r64 rd" class="r64 r">child</span>, <a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a> <span id="r65 rd" class="r65 r">trigger</span>)
		{
			<a href="@1@System.Runtime/A.html#aafef79f3fced6c2" class="t t">ReadOnlyCollection</a>&lt;<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a>&gt; <span id="r66 rd" class="r66 r">children</span> = <a href="#82862988aea7989e" class="i property">LogicalChildrenInternal</a>;
			<b>int</b> <span id="r67 rd" class="r67 r">count</span> = <span class="r66 r">children</span>.<a href="@1@System.Runtime/A.html#7e2071514968aca1" class="i property">Count</a>;
			<b>for</b> (<a href="@1@System.Runtime/A.html#225942ed7b7a3252" class="k">var</a> <span id="r68 rd" class="r68 r">index</span> = 0; <span class="r68 r">index</span> &lt; <span class="r67 r">count</span>; <span class="r68 r">index</span>++)
			{
				<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="k">var</a> <span id="r69 rd" class="r69 r">v</span> = <a href="#82862988aea7989e" class="i property">LogicalChildrenInternal</a><a href="@1@System.Runtime/A.html#6c5b571f8784e13b">[</a><span class="r68 r">index</span>] <b>as</b> <a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="t t">VisualElement</a>;
				<b>if</b> (<span class="r69 r">v</span> != <b>null</b> &amp;&amp; <span class="r69 r">v</span>.<a href="VisualElement.cs.html#138318a4447c6c41" class="i property">IsVisible</a> &amp;&amp; (!<span class="r69 r">v</span>.<a href="VisualElement.cs.html#08f2f1b9bb6df5c5" class="i property">IsPlatformEnabled</a> || !<span class="r69 r">v</span>.<a href="VisualElement.cs.html#5db0ed86f8dbab31" class="i property">IsNativeStateConsistent</a>))
					<b>return</b>;
			}
 
			<a href="View.cs.html#60f54d5b73cefedd" class="k">var</a> <span id="r70 rd" class="r70 r">view</span> = <span class="r64 r">child</span> <b>as</b> <a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a>;
			<b>if</b> (<span class="r70 r">view</span> != <b>null</b>)
			{
				<span class="c">// we can ignore the request if we are either fully constrained or when the size request changes and we were already fully constrainted</span>
				<b>if</b> ((<span class="r65 r">trigger</span> == <a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#1c7a97ba4e810a20" class="i field">MeasureChanged</a> &amp;&amp; <span class="r70 r">view</span>.<a href="VisualElement.cs.html#09fe902d796fabfa" class="i property">Constraint</a> == <a href="LayoutConstraint.cs.html#cc1ff5e573a0e98d" class="t t">LayoutConstraint</a>.<a href="LayoutConstraint.cs.html#dacdbe1e4822c0b0" class="i field">Fixed</a>) ||
					(<span class="r65 r">trigger</span> == <a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#9946e0683cc40fb2" class="i field">SizeRequestChanged</a> &amp;&amp; <span class="r70 r">view</span>.<a href="VisualElement.cs.html#39b42863b51d11da" class="i property">ComputedConstraint</a> == <a href="LayoutConstraint.cs.html#cc1ff5e573a0e98d" class="t t">LayoutConstraint</a>.<a href="LayoutConstraint.cs.html#dacdbe1e4822c0b0" class="i field">Fixed</a>))
				{
					<b>return</b>;
				}
				<b>if</b> (<span class="r65 r">trigger</span> == <a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#72bf7fe0540ef16b" class="i field">HorizontalOptionsChanged</a> || <span class="r65 r">trigger</span> == <a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#ffe36eff72143674" class="i field">VerticalOptionsChanged</a>)
				{
					<a href="VisualElement.cs.html#81287604253a4fde" class="i method">ComputeConstraintForView</a>(<span class="r70 r">view</span>);
				}
			}
 
			<a href="#fcfd1ac0e1f4f6dd" class="i field">_allocatedFlag</a> = <b>false</b>;
			<b>if</b> (<span class="r65 r">trigger</span> == <a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#097de89f173d89c3" class="i field">RendererReady</a>)
			{
				<a href="VisualElement.cs.html#da8740295ddd4d28" class="i method">InvalidateMeasureInternal</a>(<a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#097de89f173d89c3" class="i field">RendererReady</a>);
			}
			<b>else</b>
			{
				<a href="VisualElement.cs.html#da8740295ddd4d28" class="i method">InvalidateMeasureInternal</a>(<a href="Internals/InvalidationTrigger.cs.html#310448c2f71c61f1" class="t t">InvalidationTrigger</a>.<a href="Internals/InvalidationTrigger.cs.html#1c7a97ba4e810a20" class="i field">MeasureChanged</a>);
			}
 
			<a href="#5ad5340fb0a72a6f" class="i field">s_resolutionList</a>.<a href="@1@System.Runtime/A.html#a9319db8c62ae453" class="i method">Add</a>(<b>new</b> <a href="@1@System.Runtime/A.html#0d04c81b31e41262" class="t constructor">KeyValuePair</a>&lt;<a href="#63eb70469ecf4413" class="t t">Layout</a>, <b>int</b>&gt;(<a href="#63eb70469ecf4413" class="k">this</a>, <a href="#7b235ca151e06daa" class="i method">GetElementDepth</a>(<a href="#63eb70469ecf4413" class="k">this</a>)));
			<b>if</b> (!<a href="#cc29a8db39e433aa" class="i field">s_relayoutInProgress</a>)
			{
				<a href="#cc29a8db39e433aa" class="i field">s_relayoutInProgress</a> = <b>true</b>;
				<a href="Device.cs.html#4809323d42d3030a" class="t t">Device</a>.<a href="Device.cs.html#c01f48f642e0b305" class="i method">BeginInvokeOnMainThread</a>(() =&gt;
				{
					<span class="c">// if thread safety mattered we would need to lock this and compareexchange above</span>
					<a href="@1@System.Runtime/A.html#b19f71a84062554b" class="t t">IList</a>&lt;<a href="@1@System.Runtime/A.html#8585965bb176a426" class="t t">KeyValuePair</a>&lt;<a href="#63eb70469ecf4413" class="t t">Layout</a>, <b>int</b>&gt;&gt; <span id="r71 rd" class="r71 r">copy</span> = <a href="#5ad5340fb0a72a6f" class="i field">s_resolutionList</a>;
					<a href="#5ad5340fb0a72a6f" class="i field">s_resolutionList</a> = <b>new</b> <a href="@1@System.Collections/A.html#9e5352b2b304ceba" class="t constructor">List</a>&lt;<a href="@1@System.Runtime/A.html#8585965bb176a426" class="t t">KeyValuePair</a>&lt;<a href="#63eb70469ecf4413" class="t t">Layout</a>, <b>int</b>&gt;&gt;();
					<a href="#cc29a8db39e433aa" class="i field">s_relayoutInProgress</a> = <b>false</b>;
 
					<b>foreach</b> (<a href="@1@System.Runtime/A.html#8585965bb176a426" class="t t">KeyValuePair</a>&lt;<a href="#63eb70469ecf4413" class="t t">Layout</a>, <b>int</b>&gt; <span id="r72 rd" class="r72 r">kvp</span> <b>in</b> <span class="r71 r">copy</span>.<span class="i method">OrderBy</span>(<span id="r73 rd" class="r73 r">kvp</span> =&gt; <span class="r73 r">kvp</span>.<a href="@1@System.Runtime/A.html#38c0e86cc4b30170" class="i property">Value</a>))
					{
						<a href="#63eb70469ecf4413" class="t t">Layout</a> <span id="r74 rd" class="r74 r">layout</span> = <span class="r72 r">kvp</span>.<a href="@1@System.Runtime/A.html#f9d1c04feb1af032" class="i property">Key</a>;
						<b>double</b> <span id="r75 rd" class="r75 r">width</span> = <span class="r74 r">layout</span>.<a href="VisualElement.cs.html#4b4ff8e00e0429d0" class="i property">Width</a>, <span id="r76 rd" class="r76 r">height</span> = <span class="r74 r">layout</span>.<a href="VisualElement.cs.html#5d4bfa7087771a1d" class="i property">Height</a>;
						<b>if</b> (!<span class="r74 r">layout</span>.<a href="#fcfd1ac0e1f4f6dd" class="i field">_allocatedFlag</a> &amp;&amp; <span class="r75 r">width</span> &gt;= 0 &amp;&amp; <span class="r76 r">height</span> &gt;= 0)
						{
							<span class="r74 r">layout</span>.<a href="VisualElement.cs.html#19701b25c4ff6946" class="i method">SizeAllocated</a>(<span class="r75 r">width</span>, <span class="r76 r">height</span>);
						}
					}
				});
			}
		}
 
		<b>internal override void</b> <a id="04926d76843a4c53" href="R/04926d76843a4c53.html" target="n" data-glyph="74,1" class="i method">OnIsVisibleChanged</a>(<b>bool</b> <span id="r77 rd" class="r77 r">oldValue</span>, <b>bool</b> <span id="r78 rd" class="r78 r">newValue</span>)
		{
			<a href="View.cs.html#60f54d5b73cefedd" class="k">base</a>.<a href="VisualElement.cs.html#4acd40bed63704e3" class="i method">OnIsVisibleChanged</a>(<span class="r77 r">oldValue</span>, <span class="r78 r">newValue</span>);
			<b>if</b> (<span class="r78 r">newValue</span>)
			{
				<b>if</b> (<a href="#eb128c0fbd28897d" class="i field">_lastLayoutSize</a> != <b>new</b> <a href="Size.cs.html#1727209bca650e71" class="t constructor">Size</a>(<a href="VisualElement.cs.html#4b4ff8e00e0429d0" class="i property">Width</a>, <a href="VisualElement.cs.html#5d4bfa7087771a1d" class="i property">Height</a>))
				{
					<a href="#dacb1a0ccc531ab0" class="i method">UpdateChildrenLayout</a>();
				}
			}
		}
 
		<b>static int</b> <a id="7b235ca151e06daa" href="R/7b235ca151e06daa.html" target="n" data-glyph="76,1" class="i method">GetElementDepth</a>(<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a> <span id="r79 rd" class="r79 r">view</span>)
		{
			<a href="@1@System.Runtime/A.html#225942ed7b7a3252" class="k">var</a> <span id="r80 rd" class="r80 r">result</span> = 0;
			<b>while</b> (<span class="r79 r">view</span>.<a href="Element.cs.html#c4bf3d030cd32fe9" class="i property">Parent</a> != <b>null</b>)
			{
				<span class="r80 r">result</span>++;
				<span class="r79 r">view</span> = <span class="r79 r">view</span>.<a href="Element.cs.html#c4bf3d030cd32fe9" class="i property">Parent</a>;
			}
			<b>return</b> <span class="r80 r">result</span>;
		}
 
		<b>void</b> <a id="e50fcaf406c96e1d" href="R/e50fcaf406c96e1d.html" target="n" data-glyph="76,1" class="i method">InternalChildrenOnCollectionChanged</a>(<b>object</b> <span id="r81 rd" class="r81 r">sender</span>, <span class="t t">NotifyCollectionChangedEventArgs</span> <span id="r82 rd" class="r82 r">e</span>)
		{
			<b>if</b> (<span class="r82 r">e</span>.<span class="i property">Action</span> == <span class="t t">NotifyCollectionChangedAction</span>.<span class="i field">Move</span>)
			{
				<b>return</b>;
			}
 
			<b>if</b> (<span class="r82 r">e</span>.<span class="i property">OldItems</span> != <b>null</b>)
			{
				<b>foreach</b> (<b>object</b> <span id="r83 rd" class="r83 r">item</span> <b>in</b> <span class="r82 r">e</span>.<span class="i property">OldItems</span>)
				{
					<a href="View.cs.html#60f54d5b73cefedd" class="k">var</a> <span id="r84 rd" class="r84 r">v</span> = <span class="r83 r">item</span> <b>as</b> <a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a>;
					<b>if</b> (<span class="r84 r">v</span> == <b>null</b>)
						<b>continue</b>;
 
					<a href="#a4fc86ba9b4376d6" class="i method">OnInternalRemoved</a>(<span class="r84 r">v</span>);
				}
			}
 
			<b>if</b> (<span class="r82 r">e</span>.<span class="i property">NewItems</span> != <b>null</b>)
			{
				<b>foreach</b> (<b>object</b> <span id="r85 rd" class="r85 r">item</span> <b>in</b> <span class="r82 r">e</span>.<span class="i property">NewItems</span>)
				{
					<a href="View.cs.html#60f54d5b73cefedd" class="k">var</a> <span id="r86 rd" class="r86 r">v</span> = <span class="r85 r">item</span> <b>as</b> <a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a>;
					<b>if</b> (<span class="r86 r">v</span> == <b>null</b>)
						<b>continue</b>;
 
					<b>if</b> (<span class="r85 r">item</span> == <a href="#63eb70469ecf4413" class="k">this</a>)
						<b>throw</b> <b>new</b> <a href="@1@System.Runtime/A.html#265d72f49e915224" class="t constructor">InvalidOperationException</a>(<span class="s">&quot;Can not add self to own child collection.&quot;</span>);
 
					<a href="#dfbce46580558f69" class="i method">OnInternalAdded</a>(<span class="r86 r">v</span>);
				}
			}
		}
 
		<b>void</b> <a id="dfbce46580558f69" href="R/dfbce46580558f69.html" target="n" data-glyph="76,1" class="i method">OnInternalAdded</a>(<a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a> <span id="r87 rd" class="r87 r">view</span>)
		{
			<a href="#63eb70469ecf4413" class="k">var</a> <span id="r88 rd" class="r88 r">parent</span> = <span class="r87 r">view</span>.<a href="Element.cs.html#c4bf3d030cd32fe9" class="i property">Parent</a> <b>as</b> <a href="#63eb70469ecf4413" class="t t">Layout</a>;
			<span class="r88 r">parent</span>?.<a href="#1410153f062e9d91" class="i property">InternalChildren</a>.<a href="@1@System.Runtime/A.html#7ea53c2fa96a1c7d" class="i method">Remove</a>(<span class="r87 r">view</span>);
 
			<a href="VisualElement.cs.html#06dd13a3b8f2afdd" class="i method">OnChildAdded</a>(<span class="r87 r">view</span>);
			<b>if</b> (<a href="#7dd2af160efef921" class="i method">ShouldInvalidateOnChildAdded</a>(<span class="r87 r">view</span>))
				<a href="#fc52f7d6410af709" class="i method">InvalidateLayout</a>();
 
			<span class="r87 r">view</span>.<a href="VisualElement.cs.html#1cfb90940f8ddfe2" class="i">MeasureInvalidated</a> += <a href="#4b34624021c6b584" class="i method">OnChildMeasureInvalidated</a>;
		}
 
		<b>void</b> <a id="a4fc86ba9b4376d6" href="R/a4fc86ba9b4376d6.html" target="n" data-glyph="76,1" class="i method">OnInternalRemoved</a>(<a href="View.cs.html#60f54d5b73cefedd" class="t t">View</a> <span id="r89 rd" class="r89 r">view</span>)
		{
			<span class="r89 r">view</span>.<a href="VisualElement.cs.html#1cfb90940f8ddfe2" class="i">MeasureInvalidated</a> -= <a href="#4b34624021c6b584" class="i method">OnChildMeasureInvalidated</a>;
 
			<a href="VisualElement.cs.html#27d5a802d261c91a" class="i method">OnChildRemoved</a>(<span class="r89 r">view</span>);
			<b>if</b> (<a href="#9606814d96595808" class="i method">ShouldInvalidateOnChildRemoved</a>(<span class="r89 r">view</span>))
				<a href="#fc52f7d6410af709" class="i method">InvalidateLayout</a>();
		}
 
		<b>bool</b> <a id="f1fcdd89fc4d0b98" href="R/f1fcdd89fc4d0b98.html" target="n" data-glyph="76,1" class="i method">ShouldLayoutChildren</a>()
		{
			<b>if</b> (<a href="VisualElement.cs.html#4b4ff8e00e0429d0" class="i property">Width</a> &lt;= 0 || <a href="VisualElement.cs.html#5d4bfa7087771a1d" class="i property">Height</a> &lt;= 0 || !<a href="#82862988aea7989e" class="i property">LogicalChildrenInternal</a>.<span class="i method">Any</span>() || !<a href="VisualElement.cs.html#138318a4447c6c41" class="i property">IsVisible</a> || !<a href="VisualElement.cs.html#5db0ed86f8dbab31" class="i property">IsNativeStateConsistent</a> || <a href="VisualElement.cs.html#bbee7b653ffda3bf" class="i property">DisableLayout</a>)
				<b>return false</b>;
 
			<b>foreach</b> (<a href="Element.cs.html#76098df8350c0484" class="t t">Element</a> <span id="r90 rd" class="r90 r">element</span> <b>in</b> <a href="Element.cs.html#826e9277e8165c29" class="i method">VisibleDescendants</a>())
			{
				<a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="k">var</a> <span id="r91 rd" class="r91 r">visual</span> = <span class="r90 r">element</span> <b>as</b> <a href="P/daf307b67182d7d7.html#daf307b67182d7d7" class="t t">VisualElement</a>;
				<b>if</b> (<span class="r91 r">visual</span> == <b>null</b> || !<span class="r91 r">visual</span>.<a href="VisualElement.cs.html#138318a4447c6c41" class="i property">IsVisible</a>)
					<b>continue</b>;
 
				<b>if</b> (!<span class="r91 r">visual</span>.<a href="VisualElement.cs.html#08f2f1b9bb6df5c5" class="i property">IsPlatformEnabled</a> || !<span class="r91 r">visual</span>.<a href="VisualElement.cs.html#5db0ed86f8dbab31" class="i property">IsNativeStateConsistent</a>)
				{
					<b>return false</b>;
				}
			}
			<b>return true</b>;
		}
	}
}</pre></td></tr></table></div></body></html>
